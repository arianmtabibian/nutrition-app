{"ast":null,"code":"import _objectSpread from\"C:/Users/arian/OneDrive/Desktop/Nutrition/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{format,startOfMonth,endOfMonth,eachDayOfInterval,isToday,addMonths,subMonths,subDays}from'date-fns';import{ChevronLeft,ChevronRight,Calendar as CalendarIcon,BarChart3,TrendingUp,TrendingDown,Minus}from'lucide-react';import{mealsAPI,profileAPI}from'../services/api';import{useAuth}from'../contexts/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Diary=()=>{const{user,loading:authLoading}=useAuth();const[currentDate,setCurrentDate]=useState(new Date());const[monthData,setMonthData]=useState(null);const[loading,setLoading]=useState(false);const[selectedDate,setSelectedDate]=useState(null);const[selectedDayData,setSelectedDayData]=useState(null);const[weeklyProgress,setWeeklyProgress]=useState({averageDeficit:0,weeklyWeightChange:0,loading:true,userWantsToLoseWeight:true});useEffect(()=>{// Only load data if user is authenticated and not loading\nif(user&&!authLoading){console.log('ðŸ“… Diary: User authenticated, loading data...');loadMonthData();loadWeeklyProgress();}else{console.log('ðŸ“… Diary: User not authenticated yet, skipping data load');}},[currentDate,user,authLoading]);const loadWeeklyProgress=async function(){let retryCount=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;// Don't proceed if user is not authenticated\nif(!user){console.log('ðŸ“… Diary: No user, skipping weekly progress load');return;}try{setWeeklyProgress(prev=>_objectSpread(_objectSpread({},prev),{},{loading:true}));console.log('ðŸ“… Diary: Loading weekly progress...');// Get the past 7 days\nconst endDate=format(new Date(),'yyyy-MM-dd');const startDate=format(subDays(new Date(),6),'yyyy-MM-dd');console.log(\"\\uD83D\\uDCC5 Diary: Weekly range: \".concat(startDate,\" to \").concat(endDate));// Get meals for the past week\nconst response=await mealsAPI.getByRange(startDate,endDate);const meals=response.data.meals||[];// Group meals by date and calculate daily totals\nconst dailyTotals=meals.reduce((acc,meal)=>{const date=meal.meal_date;if(!acc[date]){acc[date]={calories:0,protein:0};}acc[date].calories+=meal.calories||0;acc[date].protein+=meal.protein||0;return acc;},{});// Get user's daily calorie goal and weight goals from profile\nlet dailyCalorieGoal=2000;// Default fallback\nlet userWantsToLoseWeight=true;// Default assumption\ntry{var _profileResponse$data,_profileResponse$data2,_profileResponse$data3;const profileResponse=await profileAPI.get();if((_profileResponse$data=profileResponse.data.profile)!==null&&_profileResponse$data!==void 0&&_profileResponse$data.daily_calories){dailyCalorieGoal=profileResponse.data.profile.daily_calories;}if((_profileResponse$data2=profileResponse.data.profile)!==null&&_profileResponse$data2!==void 0&&_profileResponse$data2.weight&&(_profileResponse$data3=profileResponse.data.profile)!==null&&_profileResponse$data3!==void 0&&_profileResponse$data3.target_weight){userWantsToLoseWeight=profileResponse.data.profile.weight>profileResponse.data.profile.target_weight;}}catch(error){console.error('Failed to get profile for calorie goal:',error);}const dailyDeficits=Object.values(dailyTotals).map(totals=>dailyCalorieGoal-totals.calories);const averageDeficit=dailyDeficits.length>0?dailyDeficits.reduce((sum,deficit)=>sum+deficit,0)/dailyDeficits.length:0;// Calculate weekly weight change: (average deficit * 7) / 3500\n// Positive deficit = weight loss, Negative deficit = weight gain\nconst weeklyWeightChange=-(averageDeficit*7)/3500;setWeeklyProgress({averageDeficit,weeklyWeightChange,loading:false,userWantsToLoseWeight});}catch(error){var _error$message,_error$message2;console.error('ðŸ“… Diary: Failed to load weekly progress:',error);// Don't retry if user is no longer authenticated\nif(!user){console.log('ðŸ“… Diary: User no longer authenticated, stopping retries');return;}// Retry logic for network errors only\nif(retryCount<2&&error instanceof Error&&((_error$message=error.message)!==null&&_error$message!==void 0&&_error$message.includes('Failed to fetch')||(_error$message2=error.message)!==null&&_error$message2!==void 0&&_error$message2.includes('Network Error')||error.code==='ECONNABORTED')){console.log(\"\\uD83D\\uDCC5 Diary: Retrying weekly progress load (attempt \".concat(retryCount+1,\")...\"));setTimeout(()=>loadWeeklyProgress(retryCount+1),2000*(retryCount+1));return;}// Set default values on persistent errors\nsetWeeklyProgress({averageDeficit:0,weeklyWeightChange:0,loading:false,userWantsToLoseWeight:true});}};const loadMonthData=async function(){let retryCount=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;// Don't proceed if user is not authenticated\nif(!user){console.log('ðŸ“… Diary: No user, skipping month data load');return;}setLoading(true);try{const year=currentDate.getFullYear();const month=currentDate.getMonth()+1;console.log(\"\\uD83D\\uDCC5 Diary: Loading month data for \".concat(year,\"-\").concat(month));// Get the first and last day of the month\nconst startDate=\"\".concat(year,\"-\").concat(month.toString().padStart(2,'0'),\"-01\");const lastDay=new Date(year,month,0).getDate();const endDate=\"\".concat(year,\"-\").concat(month.toString().padStart(2,'0'),\"-\").concat(lastDay);console.log(\"\\uD83D\\uDCC5 Diary: Date range: \".concat(startDate,\" to \").concat(endDate));// Get meals for the entire month\nconst response=await mealsAPI.getByRange(startDate,endDate);const meals=response.data.meals||[];console.log(\"\\uD83D\\uDCC5 Diary: Loaded \".concat(meals.length,\" meals\"));// Get user's profile for goals\nlet dailyCalorieGoal=2000;let dailyProteinGoal=150;try{var _profileResponse$data4,_profileResponse$data5;const profileResponse=await profileAPI.get();if((_profileResponse$data4=profileResponse.data.profile)!==null&&_profileResponse$data4!==void 0&&_profileResponse$data4.daily_calories){dailyCalorieGoal=profileResponse.data.profile.daily_calories;}if((_profileResponse$data5=profileResponse.data.profile)!==null&&_profileResponse$data5!==void 0&&_profileResponse$data5.daily_protein){dailyProteinGoal=profileResponse.data.profile.daily_protein;}}catch(error){console.error('Failed to get profile for goals:',error);}// Group meals by date and calculate daily totals\nconst dailyTotals=meals.reduce((acc,meal)=>{const date=meal.meal_date;if(!acc[date]){acc[date]={calories:0,protein:0,carbs:0,fat:0,fiber:0,sugar:0,sodium:0,meal_count:0};}acc[date].calories+=meal.calories||0;acc[date].protein+=meal.protein||0;acc[date].carbs+=meal.carbs||0;acc[date].fat+=meal.fat||0;acc[date].fiber+=meal.fiber||0;acc[date].sugar+=meal.sugar||0;acc[date].sodium+=meal.sodium||0;acc[date].meal_count+=1;return acc;},{});// Create month data structure\nconst monthData={year,month,days:[]};// Generate all days in the month\nconst loopDate=new Date(startDate);while(loopDate<=new Date(endDate)){const dateStr=loopDate.toISOString().split('T')[0];const dayData=dailyTotals[dateStr];if(dayData){// Day has meal data\nmonthData.days.push({date:dateStr,total_calories:dayData.calories,total_protein:dayData.protein,total_carbs:dayData.carbs,total_fat:dayData.fat,total_fiber:dayData.fiber,total_sugar:dayData.sugar,total_sodium:dayData.sodium,calories_goal:dailyCalorieGoal,protein_goal:dailyProteinGoal,calories_met:dayData.calories<=dailyCalorieGoal,protein_met:dayData.protein>=dailyProteinGoal,meal_count:dayData.meal_count,has_data:true});}else{// Day has no meal data\nmonthData.days.push({date:dateStr,total_calories:0,total_protein:0,total_carbs:0,total_fat:0,total_fiber:0,total_sugar:0,total_sodium:0,calories_goal:dailyCalorieGoal,protein_goal:dailyProteinGoal,calories_met:false,protein_met:false,meal_count:0,has_data:false});}loopDate.setDate(loopDate.getDate()+1);}setMonthData(monthData);}catch(error){var _error$message3,_error$message4;console.error('ðŸ“… Diary: Failed to load month data:',error);// Don't retry if user is no longer authenticated\nif(!user){console.log('ðŸ“… Diary: User no longer authenticated, stopping retries');return;}// Retry logic for network errors only\nif(retryCount<2&&error instanceof Error&&((_error$message3=error.message)!==null&&_error$message3!==void 0&&_error$message3.includes('Failed to fetch')||(_error$message4=error.message)!==null&&_error$message4!==void 0&&_error$message4.includes('Network Error')||error.code==='ECONNABORTED')){console.log(\"\\uD83D\\uDCC5 Diary: Retrying month data load (attempt \".concat(retryCount+1,\")...\"));setTimeout(()=>loadMonthData(retryCount+1),2000*(retryCount+1));return;}// Set empty month data on persistent errors\nsetMonthData({year:currentDate.getFullYear(),month:currentDate.getMonth()+1,days:[]});}finally{setLoading(false);}};const navigateMonth=direction=>{setCurrentDate(prev=>direction==='next'?addMonths(prev,1):subMonths(prev,1));};const getDayStatus=day=>{if(!day.has_data)return'no-data';if(day.calories_met&&day.protein_met)return'both-met';if(day.calories_met||day.protein_met)return'partial';return'none-met';};const getDayColor=day=>{const status=getDayStatus(day);switch(status){case'both-met':return'bg-success-500 text-white';case'partial':return'bg-warning-500 text-white';case'none-met':return'bg-danger-500 text-white';default:return'bg-gray-100 text-gray-400';}};const getProgressColor=(isPositive,isGoodForGoal)=>{if(isGoodForGoal){return'text-green-600';}else{return'text-red-600';}};const handleDateClick=async date=>{setSelectedDate(date);try{// Get meals for the selected date\nconst response=await mealsAPI.getByDate(date);const meals=response.data.meals||[];// Get user's profile for goals\nlet dailyCalorieGoal=2000;let dailyProteinGoal=150;try{var _profileResponse$data6,_profileResponse$data7;const profileResponse=await profileAPI.get();if((_profileResponse$data6=profileResponse.data.profile)!==null&&_profileResponse$data6!==void 0&&_profileResponse$data6.daily_calories){dailyCalorieGoal=profileResponse.data.profile.daily_calories;}if((_profileResponse$data7=profileResponse.data.profile)!==null&&_profileResponse$data7!==void 0&&_profileResponse$data7.daily_protein){dailyProteinGoal=profileResponse.data.profile.daily_protein;}}catch(error){console.error('Failed to get profile for goals:',error);}// Calculate daily totals\nconst dailyTotals=meals.reduce((acc,meal)=>{acc.calories+=meal.calories||0;acc.protein+=meal.protein||0;acc.carbs+=meal.carbs||0;acc.fat+=meal.fat||0;acc.fiber+=meal.fiber||0;acc.sugar+=meal.sugar||0;acc.sodium+=meal.sodium||0;return acc;},{calories:0,protein:0,carbs:0,fat:0,fiber:0,sugar:0,sodium:0});const dayData={date,total_calories:dailyTotals.calories,total_protein:dailyTotals.protein,total_carbs:dailyTotals.carbs,total_fat:dailyTotals.fat,total_fiber:dailyTotals.fiber,total_sugar:dailyTotals.sugar,total_sodium:dailyTotals.sodium,calories_goal:dailyCalorieGoal,protein_goal:dailyProteinGoal,calories_met:dailyTotals.calories<=dailyCalorieGoal,protein_met:dailyTotals.protein>=dailyProteinGoal,meal_count:meals.length,has_data:meals.length>0};setSelectedDayData(dayData);}catch(error){console.error('Failed to load date data:',error);}};const renderCalendar=()=>{if(!monthData)return null;const start=startOfMonth(currentDate);const end=endOfMonth(currentDate);const days=eachDayOfInterval({start,end});// Get the first day of the month to determine padding\nconst firstDayOfMonth=start.getDay();const paddingDays=Array.from({length:firstDayOfMonth},(_,i)=>i);return/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-7 gap-1\",children:[['Sun','Mon','Tue','Wed','Thu','Fri','Sat'].map(day=>/*#__PURE__*/_jsx(\"div\",{className:\"p-2 text-center text-sm font-medium text-gray-500\",children:day},day)),paddingDays.map((_,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"p-2\"},\"padding-\".concat(i))),days.map(day=>{const dateStr=format(day,'yyyy-MM-dd');const dayData=monthData.days.find(d=>d.date===dateStr);const isCurrentDay=isToday(day);return/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDateClick(dateStr),className:\"\\n                p-2 h-16 text-sm font-medium rounded-lg transition-all duration-200\\n                \".concat(getDayColor(dayData||{has_data:false}),\"\\n                \").concat(isCurrentDay?'ring-2 ring-primary-500 ring-offset-2':'',\"\\n                hover:opacity-80 focus:outline-none focus:ring-2 focus:ring-primary-500\\n              \"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold\",children:format(day,'d')}),(dayData===null||dayData===void 0?void 0:dayData.has_data)&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs opacity-75\",children:[dayData.total_calories,\" cal\"]})]})},day.toString());})]});};// Show loading spinner while authentication is in progress\nif(authLoading){return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center min-h-96\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-gray-600\",children:\"Loading...\"})]});}// Redirect to login if no user (this shouldn't happen due to ProtectedRoute, but just in case)\nif(!user){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-96\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"Please log in to view your nutrition diary.\"})})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-gray-900\",children:\"Nutrition Diary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(CalendarIcon,{className:\"h-6 w-6 text-orange-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600 font-medium\",children:\"Track your daily nutrition goals\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-orange-50 to-red-50 border border-orange-200 rounded-2xl p-6 shadow-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mb-4\",children:[/*#__PURE__*/_jsx(BarChart3,{className:\"h-6 w-6 text-orange-600\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-orange-900\",children:\"Weekly Progress Analysis\"})]}),weeklyProgress.loading?/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center py-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-6 w-6 border-b-2 border-orange-600\"})}):/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl p-6 border border-orange-200 shadow-md\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-700\",children:\"Average Daily Calorie\"}),weeklyProgress.averageDeficit>0?/*#__PURE__*/_jsx(TrendingDown,{className:\"h-5 w-5 text-green-600\"}):weeklyProgress.averageDeficit<0?/*#__PURE__*/_jsx(TrendingUp,{className:\"h-5 w-5 text-orange-600\"}):/*#__PURE__*/_jsx(Minus,{className:\"h-5 w-5 text-gray-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-bold \".concat(weeklyProgress.averageDeficit===0?'text-gray-600':getProgressColor(weeklyProgress.averageDeficit>0,weeklyProgress.averageDeficit>0===weeklyProgress.userWantsToLoseWeight)),children:[weeklyProgress.averageDeficit>0?'-':weeklyProgress.averageDeficit<0?'+':'',Math.abs(weeklyProgress.averageDeficit).toFixed(0)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[weeklyProgress.averageDeficit>0?'Deficit':weeklyProgress.averageDeficit<0?'Surplus':'Maintenance',\" calories\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl p-6 border border-orange-200 shadow-md\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-700\",children:\"Weekly Weight Change\"}),weeklyProgress.weeklyWeightChange>0?/*#__PURE__*/_jsx(TrendingUp,{className:\"h-5 w-5 text-orange-600\"}):weeklyProgress.weeklyWeightChange<0?/*#__PURE__*/_jsx(TrendingDown,{className:\"h-5 w-5 text-green-600\"}):/*#__PURE__*/_jsx(Minus,{className:\"h-5 w-5 text-gray-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-bold \".concat(weeklyProgress.weeklyWeightChange===0?'text-gray-600':getProgressColor(weeklyProgress.weeklyWeightChange>0,weeklyProgress.weeklyWeightChange>0!==weeklyProgress.userWantsToLoseWeight)),children:[weeklyProgress.weeklyWeightChange>0?'+':'',Math.abs(weeklyProgress.weeklyWeightChange).toFixed(2)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[weeklyProgress.weeklyWeightChange>0?'Gain':weeklyProgress.weeklyWeightChange<0?'Loss':'No Change',\" per week (lbs)\"]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 pt-4 border-t border-orange-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-orange-700\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Calculation:\"}),\" Based on your average daily calorie \",weeklyProgress.averageDeficit>0?'deficit':weeklyProgress.averageDeficit<0?'surplus':'maintenance',\" over the past 7 days. Weekly weight change = (Average daily \",weeklyProgress.averageDeficit>0?'deficit':weeklyProgress.averageDeficit<0?'surplus':'balance',\" \\xD7 7) \\xF7 3,500 calories per pound.\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigateMonth('prev'),className:\"flex items-center space-x-2 px-4 py-2 border-2 border-gray-300 hover:border-orange-300 text-gray-700 hover:text-orange-600 rounded-xl font-medium transition-all duration-200 hover:bg-orange-50\",children:[/*#__PURE__*/_jsx(ChevronLeft,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Previous\"})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-gray-900\",children:format(currentDate,'MMMM yyyy')}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigateMonth('next'),className:\"flex items-center space-x-2 px-4 py-2 border-2 border-gray-300 hover:border-orange-300 text-gray-700 hover:text-orange-600 rounded-xl font-medium transition-all duration-200 hover:bg-orange-50\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Next\"}),/*#__PURE__*/_jsx(ChevronRight,{className:\"h-4 w-4\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl p-4 shadow-md border border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap items-center gap-6 text-sm font-medium\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-5 h-5 bg-green-500 rounded-lg shadow-sm\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-700\",children:\"Both goals met\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-5 h-5 bg-yellow-500 rounded-lg shadow-sm\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-700\",children:\"One goal met\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-5 h-5 bg-red-500 rounded-lg shadow-sm\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-700\",children:\"No goals met\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-5 h-5 bg-gray-200 rounded-lg shadow-sm\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-700\",children:\"No data\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-2xl p-6 shadow-lg border border-white/20\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600\"})}):renderCalendar()}),selectedDate&&selectedDayData&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-orange-50 to-red-50 rounded-2xl p-6 shadow-lg border border-orange-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-900 mb-4\",children:format(new Date(selectedDate),'EEEE, MMMM d, yyyy')}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700 mb-2\",children:\"Calories\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Consumed:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:selectedDayData.total_calories})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Goal:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:selectedDayData.calories_goal})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Status:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium \".concat(selectedDayData.calories_met?'text-success-600':'text-danger-600'),children:selectedDayData.calories_met?'Met âœ“':'Not Met âœ—'})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700 mb-2\",children:\"Protein\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Consumed:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[selectedDayData.total_protein,\"g\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Goal:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[selectedDayData.protein_goal,\"g\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Status:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium \".concat(selectedDayData.protein_met?'text-success-600':'text-danger-600'),children:selectedDayData.protein_met?'Met âœ“':'Not Met âœ—'})]})]})]})]}),selectedDayData.meal_count>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 pt-4 border-t border-gray-200\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:selectedDayData.meal_count}),\" meal\",selectedDayData.meal_count!==1?'s':'',\" logged\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700 mb-3\",children:\"Additional Nutrients\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 md:grid-cols-5 gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-2 bg-white rounded border\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-medium text-gray-900\",children:[selectedDayData.total_carbs||0,\"g\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"Carbs\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-2 bg-white rounded border\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-medium text-gray-900\",children:[selectedDayData.total_fat||0,\"g\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"Fat\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-2 bg-white rounded border\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-medium text-gray-900\",children:[selectedDayData.total_fiber||0,\"g\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"Fiber\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-2 bg-white rounded border\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-medium text-gray-900\",children:[selectedDayData.total_sugar||0,\"g\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"Sugar\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-2 bg-white rounded border\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-medium text-gray-900\",children:[selectedDayData.total_sodium||0,\"mg\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"Sodium\"})]})]})]})]})]});};export default Diary;","map":{"version":3,"names":["React","useState","useEffect","format","startOfMonth","endOfMonth","eachDayOfInterval","isToday","addMonths","subMonths","subDays","ChevronLeft","ChevronRight","Calendar","CalendarIcon","BarChart3","TrendingUp","TrendingDown","Minus","mealsAPI","profileAPI","useAuth","jsx","_jsx","jsxs","_jsxs","Diary","user","loading","authLoading","currentDate","setCurrentDate","Date","monthData","setMonthData","setLoading","selectedDate","setSelectedDate","selectedDayData","setSelectedDayData","weeklyProgress","setWeeklyProgress","averageDeficit","weeklyWeightChange","userWantsToLoseWeight","console","log","loadMonthData","loadWeeklyProgress","retryCount","arguments","length","undefined","prev","_objectSpread","endDate","startDate","concat","response","getByRange","meals","data","dailyTotals","reduce","acc","meal","date","meal_date","calories","protein","dailyCalorieGoal","_profileResponse$data","_profileResponse$data2","_profileResponse$data3","profileResponse","get","profile","daily_calories","weight","target_weight","error","dailyDeficits","Object","values","map","totals","sum","deficit","_error$message","_error$message2","Error","message","includes","code","setTimeout","year","getFullYear","month","getMonth","toString","padStart","lastDay","getDate","dailyProteinGoal","_profileResponse$data4","_profileResponse$data5","daily_protein","carbs","fat","fiber","sugar","sodium","meal_count","days","loopDate","dateStr","toISOString","split","dayData","push","total_calories","total_protein","total_carbs","total_fat","total_fiber","total_sugar","total_sodium","calories_goal","protein_goal","calories_met","protein_met","has_data","setDate","_error$message3","_error$message4","navigateMonth","direction","getDayStatus","day","getDayColor","status","getProgressColor","isPositive","isGoodForGoal","handleDateClick","getByDate","_profileResponse$data6","_profileResponse$data7","renderCalendar","start","end","firstDayOfMonth","getDay","paddingDays","Array","from","_","i","className","children","find","d","isCurrentDay","onClick","Math","abs","toFixed"],"sources":["C:/Users/arian/OneDrive/Desktop/Nutrition/client/src/components/Diary.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { format, startOfMonth, endOfMonth, eachDayOfInterval, isSameMonth, isToday, addMonths, subMonths, subDays } from 'date-fns';\nimport { ChevronLeft, ChevronRight, Calendar as CalendarIcon, BarChart3, TrendingUp, TrendingDown, Minus } from 'lucide-react';\nimport { diaryAPI, mealsAPI, profileAPI } from '../services/api';\nimport { useAuth } from '../contexts/AuthContext';\n\ninterface DayData {\n  date: string;\n  total_calories: number;\n  total_protein: number;\n  total_carbs?: number;\n  total_fat?: number;\n  total_fiber?: number;\n  total_sugar?: number;\n  total_sodium?: number;\n  calories_goal: number;\n  protein_goal: number;\n  calories_met: boolean;\n  protein_met: boolean;\n  meal_count: number;\n  has_data: boolean;\n}\n\ninterface MonthData {\n  year: number;\n  month: number;\n  days: DayData[];\n}\n\nconst Diary: React.FC = () => {\n  const { user, loading: authLoading } = useAuth();\n  const [currentDate, setCurrentDate] = useState(new Date());\n  const [monthData, setMonthData] = useState<MonthData | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [selectedDate, setSelectedDate] = useState<string | null>(null);\n  const [selectedDayData, setSelectedDayData] = useState<DayData | null>(null);\n  const [weeklyProgress, setWeeklyProgress] = useState<{\n    averageDeficit: number;\n    weeklyWeightChange: number;\n    loading: boolean;\n    userWantsToLoseWeight: boolean;\n  }>({\n    averageDeficit: 0,\n    weeklyWeightChange: 0,\n    loading: true,\n    userWantsToLoseWeight: true\n  });\n\n  useEffect(() => {\n    // Only load data if user is authenticated and not loading\n    if (user && !authLoading) {\n      console.log('ðŸ“… Diary: User authenticated, loading data...');\n      loadMonthData();\n      loadWeeklyProgress();\n    } else {\n      console.log('ðŸ“… Diary: User not authenticated yet, skipping data load');\n    }\n  }, [currentDate, user, authLoading]);\n\n  const loadWeeklyProgress = async (retryCount = 0) => {\n    // Don't proceed if user is not authenticated\n    if (!user) {\n      console.log('ðŸ“… Diary: No user, skipping weekly progress load');\n      return;\n    }\n    \n    try {\n      setWeeklyProgress(prev => ({ ...prev, loading: true }));\n      \n      console.log('ðŸ“… Diary: Loading weekly progress...');\n      \n      // Get the past 7 days\n      const endDate = format(new Date(), 'yyyy-MM-dd');\n      const startDate = format(subDays(new Date(), 6), 'yyyy-MM-dd');\n      \n      console.log(`ðŸ“… Diary: Weekly range: ${startDate} to ${endDate}`);\n      \n      // Get meals for the past week\n      const response = await mealsAPI.getByRange(startDate, endDate);\n      const meals = response.data.meals || [];\n      \n      // Group meals by date and calculate daily totals\n      const dailyTotals = meals.reduce((acc: any, meal: any) => {\n        const date = meal.meal_date;\n        if (!acc[date]) {\n          acc[date] = { calories: 0, protein: 0 };\n        }\n        acc[date].calories += meal.calories || 0;\n        acc[date].protein += meal.protein || 0;\n        return acc;\n      }, {});\n      \n             // Get user's daily calorie goal and weight goals from profile\n       let dailyCalorieGoal = 2000; // Default fallback\n       let userWantsToLoseWeight = true; // Default assumption\n       try {\n         const profileResponse = await profileAPI.get();\n         if (profileResponse.data.profile?.daily_calories) {\n           dailyCalorieGoal = profileResponse.data.profile.daily_calories;\n         }\n         if (profileResponse.data.profile?.weight && profileResponse.data.profile?.target_weight) {\n           userWantsToLoseWeight = profileResponse.data.profile.weight > profileResponse.data.profile.target_weight;\n         }\n       } catch (error) {\n         console.error('Failed to get profile for calorie goal:', error);\n       }\n      \n      const dailyDeficits = Object.values(dailyTotals).map((totals: any) => \n        dailyCalorieGoal - totals.calories\n      );\n      \n      const averageDeficit = dailyDeficits.length > 0 \n        ? dailyDeficits.reduce((sum, deficit) => sum + deficit, 0) / dailyDeficits.length\n        : 0;\n      \n             // Calculate weekly weight change: (average deficit * 7) / 3500\n       // Positive deficit = weight loss, Negative deficit = weight gain\n       const weeklyWeightChange = -(averageDeficit * 7) / 3500;\n      \n             setWeeklyProgress({\n         averageDeficit,\n         weeklyWeightChange,\n         loading: false,\n         userWantsToLoseWeight\n       });\n    } catch (error: any) {\n      console.error('ðŸ“… Diary: Failed to load weekly progress:', error);\n      \n      // Don't retry if user is no longer authenticated\n      if (!user) {\n        console.log('ðŸ“… Diary: User no longer authenticated, stopping retries');\n        return;\n      }\n      \n      // Retry logic for network errors only\n      if (retryCount < 2 && (error instanceof Error && (error.message?.includes('Failed to fetch') || error.message?.includes('Network Error') || error.code === 'ECONNABORTED'))) {\n        console.log(`ðŸ“… Diary: Retrying weekly progress load (attempt ${retryCount + 1})...`);\n        setTimeout(() => loadWeeklyProgress(retryCount + 1), 2000 * (retryCount + 1));\n        return;\n      }\n      \n      // Set default values on persistent errors\n      setWeeklyProgress({\n        averageDeficit: 0,\n        weeklyWeightChange: 0,\n        loading: false,\n        userWantsToLoseWeight: true\n      });\n    }\n  };\n\n  const loadMonthData = async (retryCount = 0) => {\n    // Don't proceed if user is not authenticated\n    if (!user) {\n      console.log('ðŸ“… Diary: No user, skipping month data load');\n      return;\n    }\n    \n    setLoading(true);\n    try {\n      const year: number = currentDate.getFullYear();\n      const month: number = currentDate.getMonth() + 1;\n      \n      console.log(`ðŸ“… Diary: Loading month data for ${year}-${month}`);\n      \n      // Get the first and last day of the month\n      const startDate: string = `${year}-${month.toString().padStart(2, '0')}-01`;\n      const lastDay: number = new Date(year, month, 0).getDate();\n      const endDate: string = `${year}-${month.toString().padStart(2, '0')}-${lastDay}`;\n      \n      console.log(`ðŸ“… Diary: Date range: ${startDate} to ${endDate}`);\n      \n      // Get meals for the entire month\n      const response = await mealsAPI.getByRange(startDate, endDate);\n      const meals = response.data.meals || [];\n      console.log(`ðŸ“… Diary: Loaded ${meals.length} meals`);\n      \n      // Get user's profile for goals\n      let dailyCalorieGoal: number = 2000;\n      let dailyProteinGoal: number = 150;\n      try {\n        const profileResponse = await profileAPI.get();\n        if (profileResponse.data.profile?.daily_calories) {\n          dailyCalorieGoal = profileResponse.data.profile.daily_calories;\n        }\n        if (profileResponse.data.profile?.daily_protein) {\n          dailyProteinGoal = profileResponse.data.profile.daily_protein;\n        }\n      } catch (error) {\n        console.error('Failed to get profile for goals:', error);\n      }\n      \n      // Group meals by date and calculate daily totals\n      const dailyTotals = meals.reduce((acc: any, meal: any) => {\n        const date = meal.meal_date;\n        if (!acc[date]) {\n          acc[date] = { \n            calories: 0, \n            protein: 0, \n            carbs: 0, \n            fat: 0, \n            fiber: 0, \n            sugar: 0, \n            sodium: 0,\n            meal_count: 0\n          };\n        }\n        acc[date].calories += meal.calories || 0;\n        acc[date].protein += meal.protein || 0;\n        acc[date].carbs += meal.carbs || 0;\n        acc[date].fat += meal.fat || 0;\n        acc[date].fiber += meal.fiber || 0;\n        acc[date].sugar += meal.sugar || 0;\n        acc[date].sodium += meal.sodium || 0;\n        acc[date].meal_count += 1;\n        return acc;\n      }, {});\n      \n      // Create month data structure\n      const monthData: MonthData = {\n        year,\n        month,\n        days: []\n      };\n      \n      // Generate all days in the month\n      const loopDate = new Date(startDate);\n      while (loopDate <= new Date(endDate)) {\n        const dateStr = loopDate.toISOString().split('T')[0];\n        const dayData = dailyTotals[dateStr];\n        \n        if (dayData) {\n          // Day has meal data\n          monthData.days.push({\n            date: dateStr,\n            total_calories: dayData.calories,\n            total_protein: dayData.protein,\n            total_carbs: dayData.carbs,\n            total_fat: dayData.fat,\n            total_fiber: dayData.fiber,\n            total_sugar: dayData.sugar,\n            total_sodium: dayData.sodium,\n            calories_goal: dailyCalorieGoal,\n            protein_goal: dailyProteinGoal,\n            calories_met: dayData.calories <= dailyCalorieGoal,\n            protein_met: dayData.protein >= dailyProteinGoal,\n            meal_count: dayData.meal_count,\n            has_data: true\n          });\n        } else {\n          // Day has no meal data\n          monthData.days.push({\n            date: dateStr,\n            total_calories: 0,\n            total_protein: 0,\n            total_carbs: 0,\n            total_fat: 0,\n            total_fiber: 0,\n            total_sugar: 0,\n            total_sodium: 0,\n            calories_goal: dailyCalorieGoal,\n            protein_goal: dailyProteinGoal,\n            calories_met: false,\n            protein_met: false,\n            meal_count: 0,\n            has_data: false\n          });\n        }\n        \n        loopDate.setDate(loopDate.getDate() + 1);\n      }\n      \n      setMonthData(monthData);\n    } catch (error: any) {\n      console.error('ðŸ“… Diary: Failed to load month data:', error);\n      \n      // Don't retry if user is no longer authenticated\n      if (!user) {\n        console.log('ðŸ“… Diary: User no longer authenticated, stopping retries');\n        return;\n      }\n      \n      // Retry logic for network errors only\n      if (retryCount < 2 && (error instanceof Error && (error.message?.includes('Failed to fetch') || error.message?.includes('Network Error') || error.code === 'ECONNABORTED'))) {\n        console.log(`ðŸ“… Diary: Retrying month data load (attempt ${retryCount + 1})...`);\n        setTimeout(() => loadMonthData(retryCount + 1), 2000 * (retryCount + 1));\n        return;\n      }\n      \n      // Set empty month data on persistent errors\n      setMonthData({\n        year: currentDate.getFullYear(),\n        month: currentDate.getMonth() + 1,\n        days: []\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const navigateMonth = (direction: 'prev' | 'next') => {\n    setCurrentDate(prev => direction === 'next' ? addMonths(prev, 1) : subMonths(prev, 1));\n  };\n\n  const getDayStatus = (day: DayData) => {\n    if (!day.has_data) return 'no-data';\n    if (day.calories_met && day.protein_met) return 'both-met';\n    if (day.calories_met || day.protein_met) return 'partial';\n    return 'none-met';\n  };\n\n  const getDayColor = (day: DayData) => {\n    const status = getDayStatus(day);\n    switch (status) {\n      case 'both-met':\n        return 'bg-success-500 text-white';\n      case 'partial':\n        return 'bg-warning-500 text-white';\n      case 'none-met':\n        return 'bg-danger-500 text-white';\n      default:\n        return 'bg-gray-100 text-gray-400';\n    }\n  };\n\n  const getProgressColor = (isPositive: boolean, isGoodForGoal: boolean) => {\n    if (isGoodForGoal) {\n      return 'text-green-600';\n    } else {\n      return 'text-red-600';\n    }\n  };\n\n  const handleDateClick = async (date: string) => {\n    setSelectedDate(date);\n    try {\n      // Get meals for the selected date\n      const response = await mealsAPI.getByDate(date);\n      const meals = response.data.meals || [];\n      \n      // Get user's profile for goals\n      let dailyCalorieGoal = 2000;\n      let dailyProteinGoal = 150;\n      try {\n        const profileResponse = await profileAPI.get();\n        if (profileResponse.data.profile?.daily_calories) {\n          dailyCalorieGoal = profileResponse.data.profile.daily_calories;\n        }\n        if (profileResponse.data.profile?.daily_protein) {\n          dailyProteinGoal = profileResponse.data.profile.daily_protein;\n        }\n      } catch (error) {\n        console.error('Failed to get profile for goals:', error);\n      }\n      \n      // Calculate daily totals\n      const dailyTotals = meals.reduce((acc: any, meal: any) => {\n        acc.calories += meal.calories || 0;\n        acc.protein += meal.protein || 0;\n        acc.carbs += meal.carbs || 0;\n        acc.fat += meal.fat || 0;\n        acc.fiber += meal.fiber || 0;\n        acc.sugar += meal.sugar || 0;\n        acc.sodium += meal.sodium || 0;\n        return acc;\n      }, {\n        calories: 0,\n        protein: 0,\n        carbs: 0,\n        fat: 0,\n        fiber: 0,\n        sugar: 0,\n        sodium: 0\n      });\n      \n      const dayData = {\n        date,\n        total_calories: dailyTotals.calories,\n        total_protein: dailyTotals.protein,\n        total_carbs: dailyTotals.carbs,\n        total_fat: dailyTotals.fat,\n        total_fiber: dailyTotals.fiber,\n        total_sugar: dailyTotals.sugar,\n        total_sodium: dailyTotals.sodium,\n        calories_goal: dailyCalorieGoal,\n        protein_goal: dailyProteinGoal,\n        calories_met: dailyTotals.calories <= dailyCalorieGoal,\n        protein_met: dailyTotals.protein >= dailyProteinGoal,\n        meal_count: meals.length,\n        has_data: meals.length > 0\n      };\n      \n      setSelectedDayData(dayData);\n    } catch (error) {\n      console.error('Failed to load date data:', error);\n    }\n  };\n\n  const renderCalendar = () => {\n    if (!monthData) return null;\n\n    const start = startOfMonth(currentDate);\n    const end = endOfMonth(currentDate);\n    const days = eachDayOfInterval({ start, end });\n\n    // Get the first day of the month to determine padding\n    const firstDayOfMonth = start.getDay();\n    const paddingDays = Array.from({ length: firstDayOfMonth }, (_, i) => i);\n\n    return (\n      <div className=\"grid grid-cols-7 gap-1\">\n        {/* Day headers */}\n        {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map(day => (\n          <div key={day} className=\"p-2 text-center text-sm font-medium text-gray-500\">\n            {day}\n          </div>\n        ))}\n        \n        {/* Padding days */}\n        {paddingDays.map((_, i) => (\n          <div key={`padding-${i}`} className=\"p-2\" />\n        ))}\n        \n        {/* Calendar days */}\n        {days.map(day => {\n          const dateStr = format(day, 'yyyy-MM-dd');\n          const dayData = monthData.days.find(d => d.date === dateStr);\n          const isCurrentDay = isToday(day);\n          \n          return (\n            <button\n              key={day.toString()}\n              onClick={() => handleDateClick(dateStr)}\n              className={`\n                p-2 h-16 text-sm font-medium rounded-lg transition-all duration-200\n                ${getDayColor(dayData || { has_data: false } as DayData)}\n                ${isCurrentDay ? 'ring-2 ring-primary-500 ring-offset-2' : ''}\n                hover:opacity-80 focus:outline-none focus:ring-2 focus:ring-primary-500\n              `}\n            >\n              <div className=\"text-center\">\n                <div className=\"font-semibold\">{format(day, 'd')}</div>\n                                 {dayData?.has_data && (\n                   <div className=\"text-xs opacity-75\">\n                     {dayData.total_calories} cal\n                   </div>\n                 )}\n              </div>\n            </button>\n          );\n        })}\n      </div>\n    );\n  };\n\n  // Show loading spinner while authentication is in progress\n  if (authLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-96\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n        <span className=\"ml-2 text-gray-600\">Loading...</span>\n      </div>\n    );\n  }\n\n  // Redirect to login if no user (this shouldn't happen due to ProtectedRoute, but just in case)\n  if (!user) {\n    return (\n      <div className=\"flex items-center justify-center min-h-96\">\n        <div className=\"text-center\">\n          <p className=\"text-gray-600 mb-4\">Please log in to view your nutrition diary.</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h2 className=\"text-3xl font-bold text-gray-900\">Nutrition Diary</h2>\n        <div className=\"flex items-center space-x-2\">\n          <CalendarIcon className=\"h-6 w-6 text-orange-500\" />\n          <span className=\"text-sm text-gray-600 font-medium\">Track your daily nutrition goals</span>\n        </div>\n      </div>\n\n      {/* Weekly Progress Section */}\n      <div className=\"bg-gradient-to-r from-orange-50 to-red-50 border border-orange-200 rounded-2xl p-6 shadow-lg\">\n        <div className=\"flex items-center space-x-2 mb-4\">\n          <BarChart3 className=\"h-6 w-6 text-orange-600\" />\n          <h3 className=\"text-xl font-bold text-orange-900\">Weekly Progress Analysis</h3>\n        </div>\n        \n        {weeklyProgress.loading ? (\n          <div className=\"flex items-center justify-center py-4\">\n            <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-orange-600\"></div>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            {/* Average Daily Deficit/Surplus */}\n            <div className=\"bg-white rounded-xl p-6 border border-orange-200 shadow-md\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <h4 className=\"font-semibold text-gray-700\">Average Daily Calorie</h4>\n                {weeklyProgress.averageDeficit > 0 ? (\n                  <TrendingDown className=\"h-5 w-5 text-green-600\" />\n                ) : weeklyProgress.averageDeficit < 0 ? (\n                  <TrendingUp className=\"h-5 w-5 text-orange-600\" />\n                ) : (\n                  <Minus className=\"h-5 w-5 text-gray-500\" />\n                )}\n              </div>\n                             <div className=\"text-center\">\n                 <div className={`text-2xl font-bold ${\n                   weeklyProgress.averageDeficit === 0 \n                     ? 'text-gray-600'\n                     : getProgressColor(\n                         weeklyProgress.averageDeficit > 0,\n                         (weeklyProgress.averageDeficit > 0) === weeklyProgress.userWantsToLoseWeight\n                       )\n                 }`}>\n                   {weeklyProgress.averageDeficit > 0 ? '-' : weeklyProgress.averageDeficit < 0 ? '+' : ''}{Math.abs(weeklyProgress.averageDeficit).toFixed(0)}\n                 </div>\n                 <div className=\"text-sm text-gray-600\">\n                   {weeklyProgress.averageDeficit > 0 ? 'Deficit' : weeklyProgress.averageDeficit < 0 ? 'Surplus' : 'Maintenance'} calories\n                 </div>\n               </div>\n            </div>\n            \n                         {/* Weekly Weight Change */}\n             <div className=\"bg-white rounded-xl p-6 border border-orange-200 shadow-md\">\n               <div className=\"flex items-center justify-between mb-2\">\n                 <h4 className=\"font-semibold text-gray-700\">Weekly Weight Change</h4>\n                 {weeklyProgress.weeklyWeightChange > 0 ? (\n                   <TrendingUp className=\"h-5 w-5 text-orange-600\" />\n                 ) : weeklyProgress.weeklyWeightChange < 0 ? (\n                   <TrendingDown className=\"h-5 w-5 text-green-600\" />\n                 ) : (\n                   <Minus className=\"h-5 w-5 text-gray-500\" />\n                 )}\n               </div>\n               <div className=\"text-center\">\n                 <div className={`text-2xl font-bold ${\n                   weeklyProgress.weeklyWeightChange === 0 \n                     ? 'text-gray-600'\n                     : getProgressColor(\n                         weeklyProgress.weeklyWeightChange > 0,\n                         (weeklyProgress.weeklyWeightChange > 0) !== weeklyProgress.userWantsToLoseWeight\n                       )\n                 }`}>\n                   {weeklyProgress.weeklyWeightChange > 0 ? '+' : ''}{Math.abs(weeklyProgress.weeklyWeightChange).toFixed(2)}\n                 </div>\n                 <div className=\"text-sm text-gray-600\">\n                   {weeklyProgress.weeklyWeightChange > 0 ? 'Gain' : weeklyProgress.weeklyWeightChange < 0 ? 'Loss' : 'No Change'} per week (lbs)\n                 </div>\n               </div>\n             </div>\n          </div>\n        )}\n        \n        <div className=\"mt-4 pt-4 border-t border-orange-200\">\n          <div className=\"text-xs text-orange-700\">\n            <strong>Calculation:</strong> Based on your average daily calorie {weeklyProgress.averageDeficit > 0 ? 'deficit' : weeklyProgress.averageDeficit < 0 ? 'surplus' : 'maintenance'} over the past 7 days. \n            Weekly weight change = (Average daily {weeklyProgress.averageDeficit > 0 ? 'deficit' : weeklyProgress.averageDeficit < 0 ? 'surplus' : 'balance'} Ã— 7) Ã· 3,500 calories per pound.\n          </div>\n        </div>\n      </div>\n\n      {/* Month Navigation */}\n      <div className=\"flex items-center justify-between\">\n        <button\n          onClick={() => navigateMonth('prev')}\n          className=\"flex items-center space-x-2 px-4 py-2 border-2 border-gray-300 hover:border-orange-300 text-gray-700 hover:text-orange-600 rounded-xl font-medium transition-all duration-200 hover:bg-orange-50\"\n        >\n          <ChevronLeft className=\"h-4 w-4\" />\n          <span>Previous</span>\n        </button>\n        \n        <h3 className=\"text-2xl font-bold text-gray-900\">\n          {format(currentDate, 'MMMM yyyy')}\n        </h3>\n        \n        <button\n          onClick={() => navigateMonth('next')}\n          className=\"flex items-center space-x-2 px-4 py-2 border-2 border-gray-300 hover:border-orange-300 text-gray-700 hover:text-orange-600 rounded-xl font-medium transition-all duration-200 hover:bg-orange-50\"\n        >\n          <span>Next</span>\n          <ChevronRight className=\"h-4 w-4\" />\n        </button>\n      </div>\n\n      {/* Legend */}\n      <div className=\"bg-white rounded-xl p-4 shadow-md border border-gray-200\">\n        <div className=\"flex flex-wrap items-center gap-6 text-sm font-medium\">\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-5 h-5 bg-green-500 rounded-lg shadow-sm\"></div>\n            <span className=\"text-gray-700\">Both goals met</span>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-5 h-5 bg-yellow-500 rounded-lg shadow-sm\"></div>\n            <span className=\"text-gray-700\">One goal met</span>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-5 h-5 bg-red-500 rounded-lg shadow-sm\"></div>\n            <span className=\"text-gray-700\">No goals met</span>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-5 h-5 bg-gray-200 rounded-lg shadow-sm\"></div>\n            <span className=\"text-gray-700\">No data</span>\n          </div>\n        </div>\n      </div>\n\n      {/* Calendar */}\n      <div className=\"bg-white rounded-2xl p-6 shadow-lg border border-white/20\">\n        {loading ? (\n          <div className=\"flex items-center justify-center h-64\">\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600\"></div>\n          </div>\n        ) : (\n          renderCalendar()\n        )}\n      </div>\n\n      {/* Selected Date Details */}\n      {selectedDate && selectedDayData && (\n        <div className=\"bg-gradient-to-r from-orange-50 to-red-50 rounded-2xl p-6 shadow-lg border border-orange-200\">\n          <h3 className=\"text-xl font-bold text-gray-900 mb-4\">\n            {format(new Date(selectedDate), 'EEEE, MMMM d, yyyy')}\n          </h3>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div>\n              <h4 className=\"font-medium text-gray-700 mb-2\">Calories</h4>\n              <div className=\"space-y-2\">\n                <div className=\"flex justify-between\">\n                  <span>Consumed:</span>\n                  <span className=\"font-medium\">{selectedDayData.total_calories}</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span>Goal:</span>\n                  <span className=\"font-medium\">{selectedDayData.calories_goal}</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span>Status:</span>\n                  <span className={`font-medium ${\n                    selectedDayData.calories_met ? 'text-success-600' : 'text-danger-600'\n                  }`}>\n                    {selectedDayData.calories_met ? 'Met âœ“' : 'Not Met âœ—'}\n                  </span>\n                </div>\n              </div>\n            </div>\n            \n            <div>\n              <h4 className=\"font-medium text-gray-700 mb-2\">Protein</h4>\n              <div className=\"space-y-2\">\n                <div className=\"flex justify-between\">\n                  <span>Consumed:</span>\n                  <span className=\"font-medium\">{selectedDayData.total_protein}g</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span>Goal:</span>\n                  <span className=\"font-medium\">{selectedDayData.protein_goal}g</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span>Status:</span>\n                  <span className={`font-medium ${\n                    selectedDayData.protein_met ? 'text-success-600' : 'text-danger-600'\n                  }`}>\n                    {selectedDayData.protein_met ? 'Met âœ“' : 'Not Met âœ—'}\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n          \n          {selectedDayData.meal_count > 0 && (\n            <div className=\"mt-4 pt-4 border-t border-gray-200\">\n              <p className=\"text-sm text-gray-600\">\n                <span className=\"font-medium\">{selectedDayData.meal_count}</span> meal{selectedDayData.meal_count !== 1 ? 's' : ''} logged\n              </p>\n            </div>\n          )}\n          \n          {/* Additional Macros - Secondary Focus */}\n          <div className=\"mt-4 pt-4 border-t border-gray-200\">\n            <h4 className=\"font-medium text-gray-700 mb-3\">Additional Nutrients</h4>\n            <div className=\"grid grid-cols-2 md:grid-cols-5 gap-3\">\n              <div className=\"text-center p-2 bg-white rounded border\">\n                <div className=\"text-sm font-medium text-gray-900\">{selectedDayData.total_carbs || 0}g</div>\n                <div className=\"text-xs text-gray-500\">Carbs</div>\n              </div>\n              <div className=\"text-center p-2 bg-white rounded border\">\n                <div className=\"text-sm font-medium text-gray-900\">{selectedDayData.total_fat || 0}g</div>\n                <div className=\"text-xs text-gray-500\">Fat</div>\n              </div>\n              <div className=\"text-center p-2 bg-white rounded border\">\n                <div className=\"text-sm font-medium text-gray-900\">{selectedDayData.total_fiber || 0}g</div>\n                <div className=\"text-xs text-gray-500\">Fiber</div>\n              </div>\n              <div className=\"text-center p-2 bg-white rounded border\">\n                <div className=\"text-sm font-medium text-gray-900\">{selectedDayData.total_sugar || 0}g</div>\n                <div className=\"text-xs text-gray-500\">Sugar</div>\n              </div>\n              <div className=\"text-center p-2 bg-white rounded border\">\n                <div className=\"text-sm font-medium text-gray-900\">{selectedDayData.total_sodium || 0}mg</div>\n                <div className=\"text-xs text-gray-500\">Sodium</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Diary;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}