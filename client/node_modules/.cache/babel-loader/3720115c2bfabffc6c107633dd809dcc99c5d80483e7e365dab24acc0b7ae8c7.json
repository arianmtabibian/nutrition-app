{"ast":null,"code":"import _objectSpread from\"C:/Users/arian/OneDrive/Desktop/Nutrition/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{ArrowRight,ArrowLeft,Target,User,Activity,Scale,Ruler,Calendar,CheckCircle,Zap}from'lucide-react';import{useNavigate}from'react-router-dom';import{profileAPI}from'../services/api';import{useUserSession}from'../hooks/useUserSession';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Onboarding=()=>{const navigate=useNavigate();const{hasAccessedAppBefore}=useUserSession();const[currentStep,setCurrentStep]=useState(0);const[profileData,setProfileData]=useState({daily_calories:2000,daily_protein:150,weight:0,target_weight:0,height:0,age:0,activity_level:'moderate',gender:'male'});const[timeRemaining,setTimeRemaining]=useState(120);const[loading,setLoading]=useState(true);const[timeframeError,setTimeframeError]=useState('');// Validate timeframe input\nconst validateTimeframe=useCallback(timeline=>{if(!timeline||!timeline.trim()){setTimeframeError('Please enter a timeframe');return false;}const timelineText=timeline.toLowerCase().trim();const numberMatch=timelineText.match(/(\\d+)/);const unitMatch=timelineText.match(/(week|month|day|wk|mo|d)s?/i);if(!numberMatch){setTimeframeError('Please include a number (e.g., \"8 weeks\", \"3 months\")');return false;}if(!unitMatch){setTimeframeError('Please specify a time unit: days, weeks, or months (e.g., \"8 weeks\", \"3 months\", \"60 days\")');return false;}const number=parseInt(numberMatch[1]);const unit=unitMatch[1].toLowerCase();// Check for reasonable ranges\nif(unit.includes('day')||unit==='d'){if(number<7||number>365){setTimeframeError('Please enter between 7 and 365 days');return false;}}else if(unit.includes('week')||unit==='wk'){if(number<1||number>52){setTimeframeError('Please enter between 1 and 52 weeks');return false;}}else if(unit.includes('month')||unit==='mo'){if(number<1||number>12){setTimeframeError('Please enter between 1 and 12 months');return false;}}setTimeframeError('');return true;},[]);// AI-powered nutrition plan calculation\nconst calculateNutritionPlan=async()=>{try{var _profileData$timeline;// Parse timeline input using AI-like logic\nconst timeline=((_profileData$timeline=profileData.timeline)===null||_profileData$timeline===void 0?void 0:_profileData$timeline.toLowerCase())||'';let days=0;// Extract number and unit from timeline\nconst numberMatch=timeline.match(/(\\d+)/);const unitMatch=timeline.match(/(week|month|day|wk|mo|d)s?/i);if(numberMatch&&unitMatch){const number=parseInt(numberMatch[1]);const unit=unitMatch[1].toLowerCase();switch(unit){case'week':case'wk':days=number*7;break;case'month':case'mo':days=number*30;break;case'day':case'd':days=number;break;default:days=number*7;// Default to weeks\n}}else{// Fallback: assume weeks if format unclear\ndays=56;// 8 weeks default\n}// Calculate weight difference\nconst weightDifference=profileData.target_weight-profileData.weight;const isWeightLoss=weightDifference<0;// Calculate daily calorie adjustment\n// 1 pound = 3500 calories\nconst totalCalorieAdjustment=Math.abs(weightDifference)*3500;const dailyCalorieAdjustment=Math.round(totalCalorieAdjustment/days);// Calculate maintenance calories using Harris-Benedict equation\nlet bmr=0;if(profileData.gender==='male'){bmr=88.362+13.397*profileData.weight*0.453592+4.799*profileData.height*2.54-5.677*profileData.age;}else{bmr=447.593+9.247*profileData.weight*0.453592+3.098*profileData.height*2.54-4.330*profileData.age;}// Apply activity multiplier\nconst activityMultipliers={sedentary:1.2,light:1.375,moderate:1.55,active:1.725,very_active:1.9};const maintenanceCalories=Math.round(bmr*activityMultipliers[profileData.activity_level]);// Calculate target calories\nlet targetCalories=maintenanceCalories;if(isWeightLoss){targetCalories=maintenanceCalories-dailyCalorieAdjustment;}else{targetCalories=maintenanceCalories+dailyCalorieAdjustment;}// AI recommendation for extreme deficits\nlet aiRecommendation='';if(isWeightLoss&&dailyCalorieAdjustment>1000){aiRecommendation=\"\\u26A0\\uFE0F Warning: A \".concat(dailyCalorieAdjustment,\" calorie daily deficit is quite aggressive and may not be sustainable. Consider extending your timeline to \").concat(Math.ceil(days*1.5),\" days for a healthier \").concat(Math.round(dailyCalorieAdjustment*0.67),\" calorie daily deficit.\");}// Calculate protein needs (1.6-2.2g per kg for weight loss, 1.6-2.4g per kg for weight gain)\nconst weightInKg=profileData.weight*0.453592;let proteinMultiplier=1.8;// Default\nif(isWeightLoss){proteinMultiplier=2.0;// Higher protein for weight loss\n}else if(!isWeightLoss){proteinMultiplier=2.2;// Higher protein for muscle gain\n}const targetProtein=Math.round(weightInKg*proteinMultiplier);// Update profile data with calculations\nsetProfileData(prev=>_objectSpread(_objectSpread({},prev),{},{daily_calories:targetCalories,daily_protein:targetProtein,calculated_deficit:isWeightLoss?-dailyCalorieAdjustment:dailyCalorieAdjustment,ai_recommendation:aiRecommendation}));}catch(error){console.error('Error calculating nutrition plan:',error);// Fallback to basic calculation\nsetProfileData(prev=>_objectSpread(_objectSpread({},prev),{},{daily_calories:2000,daily_protein:150,calculated_deficit:0,ai_recommendation:'Unable to calculate personalized plan. Using default values.'}));}};const steps=[{title:\"Welcome to NutriTrack!\",subtitle:\"Let's set up your profile in just 2 minutes\",icon:Target,content:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center space-y-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-20 h-20 bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center mx-auto shadow-lg\",children:/*#__PURE__*/_jsx(Target,{className:\"w-10 h-10 text-white\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-lg\",children:\"We'll ask you a few quick questions to personalize your nutrition experience.\"})]})},{title:\"What's your goal?\",subtitle:\"This helps us calculate your daily targets\",icon:Target,content:/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 gap-3\",children:[{value:'lose',label:'Lose Weight',description:'Create a calorie deficit'},{value:'maintain',label:'Maintain Weight',description:'Stay at current weight'},{value:'gain',label:'Gain Weight',description:'Build muscle and weight'}].map(goal=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setProfileData(prev=>_objectSpread(_objectSpread({},prev),{},{goal:goal.value})),className:\"p-4 border-2 rounded-xl text-left transition-all duration-200 \".concat(profileData.goal===goal.value?'border-orange-500 bg-orange-50 shadow-md':'border-gray-200 hover:border-orange-300 hover:bg-orange-50/30'),children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:goal.label}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:goal.description})]},goal.value))})})},{title:\"Current Weight\",subtitle:\"Enter your current weight in pounds\",icon:Scale,content:/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:profileData.weight||'',onChange:e=>setProfileData(prev=>_objectSpread(_objectSpread({},prev),{},{weight:parseFloat(e.target.value)||0})),className:\"text-4xl font-bold text-center w-32 border-none outline-none bg-transparent\",placeholder:\"150\",min:\"66\",max:\"660\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 text-lg\",children:\"pounds\"})]})})},{title:\"Target Weight\",subtitle:\"What's your goal weight?\",icon:Target,content:/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:profileData.target_weight||'',onChange:e=>setProfileData(prev=>_objectSpread(_objectSpread({},prev),{},{target_weight:parseFloat(e.target.value)||0})),className:\"text-4xl font-bold text-center w-32 border-none outline-none bg-transparent\",placeholder:\"140\",min:\"66\",max:\"660\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 text-lg\",children:\"pounds\"})]})})},{title:\"Timeline\",subtitle:\"How quickly do you want to reach your goal?\",icon:Calendar,content:/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:profileData.timeline||'',onChange:e=>{const value=e.target.value;setProfileData(prev=>_objectSpread(_objectSpread({},prev),{},{timeline:value}));// Clear error when user starts typing\nif(timeframeError){setTimeframeError('');}},className:\"text-2xl font-medium text-center w-48 border-2 rounded-lg px-4 py-2 focus:outline-none transition-all duration-200 \".concat(timeframeError?'border-red-500 focus:border-red-500':'border-gray-300 focus:border-orange-500 hover:border-orange-300'),placeholder:\"e.g., 8 weeks, 3 months, 60 days\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm mt-2\",children:timeframeError?/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:timeframeError}):/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500\",children:\"Enter any format: weeks, months, days\"})})]})})},{title:\"Height\",subtitle:\"How tall are you?\",icon:Ruler,content:/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:profileData.height||'',onChange:e=>setProfileData(prev=>_objectSpread(_objectSpread({},prev),{},{height:parseFloat(e.target.value)||0})),className:\"text-4xl font-bold text-center w-32 border-none outline-none bg-transparent\",placeholder:\"69\",min:\"48\",max:\"96\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 text-lg\",children:\"inches\"})]})})},{title:\"Age\",subtitle:\"Your age helps calculate your metabolism\",icon:Calendar,content:/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:profileData.age||'',onChange:e=>setProfileData(prev=>_objectSpread(_objectSpread({},prev),{},{age:parseInt(e.target.value)||0})),className:\"text-4xl font-bold text-center w-32 border-none outline-none bg-transparent\",placeholder:\"30\",min:\"16\",max:\"100\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 text-lg\",children:\"years old\"})]})})},{title:\"Activity Level\",subtitle:\"How active are you on a typical week?\",icon:Activity,content:/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:[{value:'sedentary',label:'Sedentary',description:'Little or no exercise'},{value:'light',label:'Lightly Active',description:'Light exercise 1-3 days/week'},{value:'moderate',label:'Moderately Active',description:'Moderate exercise 3-5 days/week'},{value:'active',label:'Very Active',description:'Hard exercise 6-7 days/week'},{value:'very_active',label:'Extremely Active',description:'Very hard exercise, physical job'}].map(level=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setProfileData(prev=>_objectSpread(_objectSpread({},prev),{},{activity_level:level.value})),className:\"w-full p-4 border-2 rounded-xl text-left transition-all duration-200 \".concat(profileData.activity_level===level.value?'border-orange-500 bg-orange-50 shadow-md':'border-gray-200 hover:border-orange-300 hover:bg-orange-50/30'),children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:level.label}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:level.description})]},level.value))})},{title:\"Gender\",subtitle:\"This helps with accurate calorie calculations\",icon:User,content:/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:[{value:'male',label:'Male'},{value:'female',label:'Female'}].map(gender=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setProfileData(prev=>_objectSpread(_objectSpread({},prev),{},{gender:gender.value})),className:\"w-full p-6 border-2 rounded-xl text-center transition-all duration-200 \".concat(profileData.gender===gender.value?'border-orange-500 bg-orange-50 shadow-md':'border-gray-200 hover:border-orange-300 hover:bg-orange-50/30'),children:/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-medium text-gray-900\",children:gender.label})},gender.value))})},{title:\"AI Calculation\",subtitle:\"Calculating your personalized nutrition plan\",icon:Target,content:/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:profileData.calculated_deficit!==undefined?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 rounded-lg p-4 border border-blue-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-blue-900 mb-2\",children:\"Your Personalized Plan\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Current Weight:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[profileData.weight,\" lbs\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Target Weight:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[profileData.target_weight,\" lbs\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Timeline:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:profileData.timeline})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Daily Calorie Adjustment:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium \".concat(profileData.calculated_deficit>0?'text-red-600':'text-green-600'),children:[profileData.calculated_deficit>0?'+':'',profileData.calculated_deficit,\" cal\"]})]})]})]}),profileData.ai_recommendation&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-orange-50 rounded-lg p-4 border border-orange-200\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-orange-900 mb-2\",children:\"\\u26A0\\uFE0F AI Recommendation\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-orange-800\",children:profileData.ai_recommendation})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-900 mb-2\",children:\"Daily Targets\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Daily Calories:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold\",children:[profileData.daily_calories,\" cal\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Daily Protein:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold\",children:[profileData.daily_protein,\"g\"]})]})]})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center space-y-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Click the button below to calculate your personalized nutrition plan\"}),/*#__PURE__*/_jsx(\"button\",{onClick:calculateNutritionPlan,className:\"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors\",children:\"Calculate Plan\"})]})})})},{title:\"All Set!\",subtitle:\"Your profile is ready to go\",icon:CheckCircle,content:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center space-y-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-20 h-20 bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center mx-auto shadow-lg\",children:/*#__PURE__*/_jsx(CheckCircle,{className:\"w-10 h-10 text-white\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-lg\",children:\"We've calculated your daily targets based on your profile. You can always adjust these later!\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-xl p-4 space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Daily Calories:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold\",children:[profileData.daily_calories,\" cal\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Daily Protein:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold\",children:[profileData.daily_protein,\"g\"]})]}),profileData.calculated_deficit!==undefined&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Daily Adjustment:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold \".concat(profileData.calculated_deficit>0?'text-red-600':'text-green-600'),children:[profileData.calculated_deficit>0?'+':'',profileData.calculated_deficit,\" cal\"]})]})]})]})}];// SMART PROTECTION: Only prevent users who have COMPLETED onboarding from returning\nuseEffect(()=>{const checkExistingProfile=async()=>{try{const response=await profileAPI.get();if(response.data.profile){// User already has a completed profile - they shouldn't be here\nconsole.log('User has completed profile, redirecting to dashboard');// Mark them as having accessed the app to prevent future redirects\nlocalStorage.setItem('hasAccessedApp','true');navigate('/dashboard',{replace:true});return;}// No profile exists - new user can continue with onboarding\nconsole.log('New user with no profile, allowing onboarding');setLoading(false);}catch(error){var _error$response;console.log('Profile check error in onboarding:',error);if((error===null||error===void 0?void 0:(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===404){// Confirmed no profile exists - new user can continue\nconsole.log('Confirmed no profile exists (404), continuing with onboarding');setLoading(false);}else{// For other errors, check if they've completed onboarding before\nconst hasAccessedApp=localStorage.getItem('hasAccessedApp');if(hasAccessedApp==='true'){// User has accessed app before - they shouldn't be in onboarding\nconsole.log('Existing user trying to access onboarding, redirecting to dashboard');navigate('/dashboard',{replace:true});}else{// Could be a new user with network issues - let them try onboarding\nconsole.log('Network error for potentially new user, allowing onboarding attempt');setLoading(false);}}}};checkExistingProfile();},[navigate]);useEffect(()=>{if(timeRemaining>0&&currentStep<steps.length-1){const timer=setTimeout(()=>setTimeRemaining(timeRemaining-1),1000);return()=>clearTimeout(timer);}},[timeRemaining,currentStep,steps.length]);const progress=(currentStep+1)/steps.length*100;const currentStepData=steps[currentStep];const handleNext=async()=>{if(currentStep<steps.length-1){// Special validation for timeline step (step 4)\nif(currentStep===4){var _profileData$timeline2;const timeline=(_profileData$timeline2=profileData.timeline)===null||_profileData$timeline2===void 0?void 0:_profileData$timeline2.trim();if(!timeline){setTimeframeError('Please enter a timeframe');return;}if(!validateTimeframe(timeline)){return;// Don't proceed if validation fails\n}}setCurrentStep(currentStep+1);setTimeframeError('');// Clear any validation errors when moving to next step\n}else{try{// Update profile with collected data\nawait profileAPI.update(profileData);// Mark user as having completed onboarding and accessed the app\nlocalStorage.setItem('hasAccessedApp','true');localStorage.setItem('onboardingCompleted',new Date().toISOString());console.log('Onboarding completed successfully');// Redirect to dashboard\nnavigate('/dashboard');}catch(error){console.error('Failed to update profile:',error);// Even if profile update fails, mark as completed to prevent redirect loops\nlocalStorage.setItem('hasAccessedApp','true');localStorage.setItem('onboardingCompleted',new Date().toISOString());// Still redirect to dashboard\nnavigate('/dashboard');}}};const handleBack=()=>{if(currentStep>0){setCurrentStep(currentStep-1);}};const canProceed=()=>{const result=(()=>{switch(currentStep){case 0:return true;// Welcome step - always allow proceeding\ncase 1:return profileData.goal;case 2:return profileData.weight>0;case 3:return profileData.target_weight>0;case 4:return profileData.timeline&&profileData.timeline.trim().length>0;case 5:return profileData.height>0;case 6:return profileData.age>0;case 7:return profileData.activity_level;case 8:return profileData.gender;case 9:return profileData.calculated_deficit!==undefined;// AI calculation step\ncase 10:return true;// Final step - always allow proceeding\ndefault:return false;// Can't proceed on unknown steps\n}})();console.log(\"Step \".concat(currentStep,\": canProceed = \").concat(result));console.log('Profile data:',profileData);if(currentStep===9){console.log('Step 9 - calculated_deficit:',profileData.calculated_deficit);}return result;};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-orange-50 via-white to-red-50 flex items-center justify-center p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Checking your profile...\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-br from-orange-50 via-white to-red-50 relative overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"absolute inset-0 opacity-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-10 left-10 w-32 h-32 bg-orange-500 rounded-full\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-32 right-20 w-20 h-20 bg-red-500 rounded-full\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-20 left-1/4 w-24 h-24 bg-orange-400 rounded-full\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-1/3 right-1/3 w-16 h-16 bg-red-400 rounded-full\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"relative flex items-center justify-center min-h-screen p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-2xl w-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center space-x-3 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-gradient-to-r from-orange-500 to-red-500 rounded-xl flex items-center justify-center shadow-lg\",children:/*#__PURE__*/_jsx(Target,{className:\"w-8 h-8 text-white\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute -top-1 -right-1 w-6 h-6 bg-yellow-400 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(Zap,{className:\"w-3 h-3 text-yellow-800\"})})]}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900\",children:\"NutriTrack\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-3 mb-6 shadow-inner\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-orange-500 to-red-500 h-3 rounded-full transition-all duration-500 shadow-sm\",style:{width:\"\".concat(progress,\"%\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-sm text-gray-600 mb-4\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Step \",currentStep+1,\" of \",steps.length]}),/*#__PURE__*/_jsxs(\"span\",{children:[Math.round(progress),\"% Complete\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[\"\\u23F1\\uFE0F \",timeRemaining>=60?\"\".concat(Math.floor(timeRemaining/60),\"m \").concat(timeRemaining%60,\"s\"):\"\".concat(timeRemaining,\"s\"),\" remaining\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-3xl shadow-2xl p-8 mb-8 border border-white/20\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative mx-auto mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-20 h-20 bg-gradient-to-r from-orange-100 to-red-100 rounded-full flex items-center justify-center mx-auto shadow-lg\",children:/*#__PURE__*/_jsx(currentStepData.icon,{className:\"w-10 h-10 text-orange-600\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute -top-1 -right-1 w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-bold text-yellow-800\",children:currentStep+1})})]}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-gray-900 mb-2\",children:currentStepData.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:currentStepData.subtitle})]}),/*#__PURE__*/_jsx(\"div\",{className:\"min-h-[200px] flex items-center justify-center\",children:currentStepData.content})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleBack,disabled:currentStep===0,className:\"flex items-center space-x-2 px-6 py-3 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed\",children:[/*#__PURE__*/_jsx(ArrowLeft,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Back\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleNext,disabled:!canProceed(),className:\"flex items-center space-x-2 px-8 py-4 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-xl hover:from-orange-600 hover:to-red-600 transform hover:-translate-y-1 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-lg hover:shadow-xl\",children:[/*#__PURE__*/_jsx(\"span\",{children:currentStep===10?'Get Started':'Next'}),/*#__PURE__*/_jsx(ArrowRight,{className:\"w-5 h-5\"})]})]})]})})]});};export default Onboarding;","map":{"version":3,"names":["React","useState","useEffect","useCallback","ArrowRight","ArrowLeft","Target","User","Activity","Scale","Ruler","Calendar","CheckCircle","Zap","useNavigate","profileAPI","useUserSession","jsx","_jsx","jsxs","_jsxs","Onboarding","navigate","hasAccessedAppBefore","currentStep","setCurrentStep","profileData","setProfileData","daily_calories","daily_protein","weight","target_weight","height","age","activity_level","gender","timeRemaining","setTimeRemaining","loading","setLoading","timeframeError","setTimeframeError","validateTimeframe","timeline","trim","timelineText","toLowerCase","numberMatch","match","unitMatch","number","parseInt","unit","includes","calculateNutritionPlan","_profileData$timeline","days","weightDifference","isWeightLoss","totalCalorieAdjustment","Math","abs","dailyCalorieAdjustment","round","bmr","activityMultipliers","sedentary","light","moderate","active","very_active","maintenanceCalories","targetCalories","aiRecommendation","concat","ceil","weightInKg","proteinMultiplier","targetProtein","prev","_objectSpread","calculated_deficit","ai_recommendation","error","console","steps","title","subtitle","icon","content","className","children","value","label","description","map","goal","onClick","type","onChange","e","parseFloat","target","placeholder","min","max","level","undefined","checkExistingProfile","response","get","data","profile","log","localStorage","setItem","replace","_error$response","status","hasAccessedApp","getItem","length","timer","setTimeout","clearTimeout","progress","currentStepData","handleNext","_profileData$timeline2","update","Date","toISOString","handleBack","canProceed","result","style","width","floor","disabled"],"sources":["C:/Users/arian/OneDrive/Desktop/Nutrition/client/src/components/Onboarding.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { ArrowRight, ArrowLeft, Target, User, Activity, Scale, Ruler, Calendar, CheckCircle, Zap } from 'lucide-react';\nimport { useNavigate } from 'react-router-dom';\nimport { profileAPI } from '../services/api';\nimport { useUserSession } from '../hooks/useUserSession';\n\ninterface ProfileData {\n  daily_calories: number;\n  daily_protein: number;\n  weight: number;\n  target_weight: number;\n  height: number;\n  age: number;\n  activity_level: string;\n  gender: string;\n  goal?: string;\n  timeline?: string;\n  calculated_deficit?: number;\n  ai_recommendation?: string;\n}\n\nconst Onboarding: React.FC = () => {\n  const navigate = useNavigate();\n  const { hasAccessedAppBefore } = useUserSession();\n  const [currentStep, setCurrentStep] = useState(0);\n  const [profileData, setProfileData] = useState<ProfileData>({\n    daily_calories: 2000,\n    daily_protein: 150,\n    weight: 0,\n    target_weight: 0,\n    height: 0,\n    age: 0,\n    activity_level: 'moderate',\n    gender: 'male'\n  });\n  const [timeRemaining, setTimeRemaining] = useState(120);\n  const [loading, setLoading] = useState(true);\n  const [timeframeError, setTimeframeError] = useState('');\n\n  // Validate timeframe input\n  const validateTimeframe = useCallback((timeline: string): boolean => {\n    if (!timeline || !timeline.trim()) {\n      setTimeframeError('Please enter a timeframe');\n      return false;\n    }\n\n    const timelineText = timeline.toLowerCase().trim();\n    const numberMatch = timelineText.match(/(\\d+)/);\n    const unitMatch = timelineText.match(/(week|month|day|wk|mo|d)s?/i);\n\n    if (!numberMatch) {\n      setTimeframeError('Please include a number (e.g., \"8 weeks\", \"3 months\")');\n      return false;\n    }\n\n    if (!unitMatch) {\n      setTimeframeError('Please specify a time unit: days, weeks, or months (e.g., \"8 weeks\", \"3 months\", \"60 days\")');\n      return false;\n    }\n\n    const number = parseInt(numberMatch[1]);\n    const unit = unitMatch[1].toLowerCase();\n\n    // Check for reasonable ranges\n    if (unit.includes('day') || unit === 'd') {\n      if (number < 7 || number > 365) {\n        setTimeframeError('Please enter between 7 and 365 days');\n        return false;\n      }\n    } else if (unit.includes('week') || unit === 'wk') {\n      if (number < 1 || number > 52) {\n        setTimeframeError('Please enter between 1 and 52 weeks');\n        return false;\n      }\n    } else if (unit.includes('month') || unit === 'mo') {\n      if (number < 1 || number > 12) {\n        setTimeframeError('Please enter between 1 and 12 months');\n        return false;\n      }\n    }\n\n    setTimeframeError('');\n    return true;\n  }, []);\n\n  // AI-powered nutrition plan calculation\n  const calculateNutritionPlan = async () => {\n    try {\n      // Parse timeline input using AI-like logic\n      const timeline = profileData.timeline?.toLowerCase() || '';\n      let days = 0;\n      \n      // Extract number and unit from timeline\n      const numberMatch = timeline.match(/(\\d+)/);\n      const unitMatch = timeline.match(/(week|month|day|wk|mo|d)s?/i);\n      \n      if (numberMatch && unitMatch) {\n        const number = parseInt(numberMatch[1]);\n        const unit = unitMatch[1].toLowerCase();\n        \n        switch (unit) {\n          case 'week':\n          case 'wk':\n            days = number * 7;\n            break;\n          case 'month':\n          case 'mo':\n            days = number * 30;\n            break;\n          case 'day':\n          case 'd':\n            days = number;\n            break;\n          default:\n            days = number * 7; // Default to weeks\n        }\n      } else {\n        // Fallback: assume weeks if format unclear\n        days = 56; // 8 weeks default\n      }\n      \n      // Calculate weight difference\n      const weightDifference = profileData.target_weight - profileData.weight;\n      const isWeightLoss = weightDifference < 0;\n      \n      // Calculate daily calorie adjustment\n      // 1 pound = 3500 calories\n      const totalCalorieAdjustment = Math.abs(weightDifference) * 3500;\n      const dailyCalorieAdjustment = Math.round(totalCalorieAdjustment / days);\n      \n      // Calculate maintenance calories using Harris-Benedict equation\n      let bmr = 0;\n      if (profileData.gender === 'male') {\n        bmr = 88.362 + (13.397 * profileData.weight * 0.453592) + (4.799 * profileData.height * 2.54) - (5.677 * profileData.age);\n      } else {\n        bmr = 447.593 + (9.247 * profileData.weight * 0.453592) + (3.098 * profileData.height * 2.54) - (4.330 * profileData.age);\n      }\n      \n      // Apply activity multiplier\n      const activityMultipliers = {\n        sedentary: 1.2,\n        light: 1.375,\n        moderate: 1.55,\n        active: 1.725,\n        very_active: 1.9\n      };\n      \n      const maintenanceCalories = Math.round(bmr * activityMultipliers[profileData.activity_level as keyof typeof activityMultipliers]);\n      \n      // Calculate target calories\n      let targetCalories = maintenanceCalories;\n      if (isWeightLoss) {\n        targetCalories = maintenanceCalories - dailyCalorieAdjustment;\n      } else {\n        targetCalories = maintenanceCalories + dailyCalorieAdjustment;\n      }\n      \n      // AI recommendation for extreme deficits\n      let aiRecommendation = '';\n      if (isWeightLoss && dailyCalorieAdjustment > 1000) {\n        aiRecommendation = `⚠️ Warning: A ${dailyCalorieAdjustment} calorie daily deficit is quite aggressive and may not be sustainable. Consider extending your timeline to ${Math.ceil(days * 1.5)} days for a healthier ${Math.round(dailyCalorieAdjustment * 0.67)} calorie daily deficit.`;\n      }\n      \n      // Calculate protein needs (1.6-2.2g per kg for weight loss, 1.6-2.4g per kg for weight gain)\n      const weightInKg = profileData.weight * 0.453592;\n      let proteinMultiplier = 1.8; // Default\n      if (isWeightLoss) {\n        proteinMultiplier = 2.0; // Higher protein for weight loss\n      } else if (!isWeightLoss) {\n        proteinMultiplier = 2.2; // Higher protein for muscle gain\n      }\n      const targetProtein = Math.round(weightInKg * proteinMultiplier);\n      \n      // Update profile data with calculations\n      setProfileData(prev => ({\n        ...prev,\n        daily_calories: targetCalories,\n        daily_protein: targetProtein,\n        calculated_deficit: isWeightLoss ? -dailyCalorieAdjustment : dailyCalorieAdjustment,\n        ai_recommendation: aiRecommendation\n      }));\n      \n    } catch (error) {\n      console.error('Error calculating nutrition plan:', error);\n      // Fallback to basic calculation\n      setProfileData(prev => ({\n        ...prev,\n        daily_calories: 2000,\n        daily_protein: 150,\n        calculated_deficit: 0,\n        ai_recommendation: 'Unable to calculate personalized plan. Using default values.'\n      }));\n    }\n  };\n\n  const steps = [\n    {\n      title: \"Welcome to NutriTrack!\",\n      subtitle: \"Let's set up your profile in just 2 minutes\",\n      icon: Target,\n      content: (\n        <div className=\"text-center space-y-4\">\n          <div className=\"w-20 h-20 bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center mx-auto shadow-lg\">\n            <Target className=\"w-10 h-10 text-white\" />\n          </div>\n          <p className=\"text-gray-600 text-lg\">\n            We'll ask you a few quick questions to personalize your nutrition experience.\n          </p>\n        </div>\n      )\n    },\n    {\n      title: \"What's your goal?\",\n      subtitle: \"This helps us calculate your daily targets\",\n      icon: Target,\n      content: (\n        <div className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 gap-3\">\n            {[\n              { value: 'lose', label: 'Lose Weight', description: 'Create a calorie deficit' },\n              { value: 'maintain', label: 'Maintain Weight', description: 'Stay at current weight' },\n              { value: 'gain', label: 'Gain Weight', description: 'Build muscle and weight' }\n            ].map((goal) => (\n              <button\n                key={goal.value}\n                onClick={() => setProfileData(prev => ({ ...prev, goal: goal.value }))}\n                className={`p-4 border-2 rounded-xl text-left transition-all duration-200 ${\n                  profileData.goal === goal.value\n                    ? 'border-orange-500 bg-orange-50 shadow-md'\n                    : 'border-gray-200 hover:border-orange-300 hover:bg-orange-50/30'\n                }`}\n              >\n                <div className=\"font-medium text-gray-900\">{goal.label}</div>\n                <div className=\"text-sm text-gray-600\">{goal.description}</div>\n              </button>\n            ))}\n          </div>\n        </div>\n      )\n    },\n    {\n      title: \"Current Weight\",\n      subtitle: \"Enter your current weight in pounds\",\n      icon: Scale,\n      content: (\n        <div className=\"space-y-4\">\n          <div className=\"text-center\">\n            <input\n              type=\"number\"\n              value={profileData.weight || ''}\n              onChange={(e) => setProfileData(prev => ({ ...prev, weight: parseFloat(e.target.value) || 0 }))}\n              className=\"text-4xl font-bold text-center w-32 border-none outline-none bg-transparent\"\n              placeholder=\"150\"\n              min=\"66\"\n              max=\"660\"\n            />\n            <div className=\"text-gray-500 text-lg\">pounds</div>\n          </div>\n        </div>\n      )\n    },\n    {\n      title: \"Target Weight\",\n      subtitle: \"What's your goal weight?\",\n      icon: Target,\n      content: (\n        <div className=\"space-y-4\">\n          <div className=\"text-center\">\n            <input\n              type=\"number\"\n              value={profileData.target_weight || ''}\n              onChange={(e) => setProfileData(prev => ({ ...prev, target_weight: parseFloat(e.target.value) || 0 }))}\n              className=\"text-4xl font-bold text-center w-32 border-none outline-none bg-transparent\"\n              placeholder=\"140\"\n              min=\"66\"\n              max=\"660\"\n            />\n            <div className=\"text-gray-500 text-lg\">pounds</div>\n          </div>\n        </div>\n      )\n    },\n    {\n      title: \"Timeline\",\n      subtitle: \"How quickly do you want to reach your goal?\",\n      icon: Calendar,\n      content: (\n        <div className=\"space-y-4\">\n          <div className=\"text-center\">\n            <input\n              type=\"text\"\n              value={profileData.timeline || ''}\n              onChange={(e) => {\n                const value = e.target.value;\n                setProfileData(prev => ({ ...prev, timeline: value }));\n                // Clear error when user starts typing\n                if (timeframeError) {\n                  setTimeframeError('');\n                }\n              }}\n              className={`text-2xl font-medium text-center w-48 border-2 rounded-lg px-4 py-2 focus:outline-none transition-all duration-200 ${\n                timeframeError \n                  ? 'border-red-500 focus:border-red-500' \n                  : 'border-gray-300 focus:border-orange-500 hover:border-orange-300'\n              }`}\n              placeholder=\"e.g., 8 weeks, 3 months, 60 days\"\n            />\n            <div className=\"text-sm mt-2\">\n              {timeframeError ? (\n                <div className=\"text-red-500\">{timeframeError}</div>\n              ) : (\n                <div className=\"text-gray-500\">Enter any format: weeks, months, days</div>\n              )}\n            </div>\n          </div>\n        </div>\n      )\n    },\n    {\n      title: \"Height\",\n      subtitle: \"How tall are you?\",\n      icon: Ruler,\n      content: (\n        <div className=\"space-y-4\">\n          <div className=\"text-center\">\n            <input\n              type=\"number\"\n              value={profileData.height || ''}\n              onChange={(e) => setProfileData(prev => ({ ...prev, height: parseFloat(e.target.value) || 0 }))}\n              className=\"text-4xl font-bold text-center w-32 border-none outline-none bg-transparent\"\n              placeholder=\"69\"\n              min=\"48\"\n              max=\"96\"\n            />\n            <div className=\"text-gray-500 text-lg\">inches</div>\n          </div>\n        </div>\n      )\n    },\n    {\n      title: \"Age\",\n      subtitle: \"Your age helps calculate your metabolism\",\n      icon: Calendar,\n      content: (\n        <div className=\"space-y-4\">\n          <div className=\"text-center\">\n            <input\n              type=\"number\"\n              value={profileData.age || ''}\n              onChange={(e) => setProfileData(prev => ({ ...prev, age: parseInt(e.target.value) || 0 }))}\n              className=\"text-4xl font-bold text-center w-32 border-none outline-none bg-transparent\"\n              placeholder=\"30\"\n              min=\"16\"\n              max=\"100\"\n            />\n            <div className=\"text-gray-500 text-lg\">years old</div>\n          </div>\n        </div>\n      )\n    },\n    {\n      title: \"Activity Level\",\n      subtitle: \"How active are you on a typical week?\",\n      icon: Activity,\n      content: (\n        <div className=\"space-y-3\">\n          {[\n            { value: 'sedentary', label: 'Sedentary', description: 'Little or no exercise' },\n            { value: 'light', label: 'Lightly Active', description: 'Light exercise 1-3 days/week' },\n            { value: 'moderate', label: 'Moderately Active', description: 'Moderate exercise 3-5 days/week' },\n            { value: 'active', label: 'Very Active', description: 'Hard exercise 6-7 days/week' },\n            { value: 'very_active', label: 'Extremely Active', description: 'Very hard exercise, physical job' }\n          ].map((level) => (\n            <button\n              key={level.value}\n              onClick={() => setProfileData(prev => ({ ...prev, activity_level: level.value }))}\n              className={`w-full p-4 border-2 rounded-xl text-left transition-all duration-200 ${\n                profileData.activity_level === level.value\n                  ? 'border-orange-500 bg-orange-50 shadow-md'\n                  : 'border-gray-200 hover:border-orange-300 hover:bg-orange-50/30'\n              }`}\n            >\n              <div className=\"font-medium text-gray-900\">{level.label}</div>\n              <div className=\"text-sm text-gray-600\">{level.description}</div>\n            </button>\n          ))}\n        </div>\n      )\n    },\n    {\n      title: \"Gender\",\n      subtitle: \"This helps with accurate calorie calculations\",\n      icon: User,\n      content: (\n        <div className=\"space-y-3\">\n          {[\n            { value: 'male', label: 'Male' },\n            { value: 'female', label: 'Female' }\n          ].map((gender) => (\n            <button\n              key={gender.value}\n              onClick={() => setProfileData(prev => ({ ...prev, gender: gender.value }))}\n              className={`w-full p-6 border-2 rounded-xl text-center transition-all duration-200 ${\n                profileData.gender === gender.value\n                  ? 'border-orange-500 bg-orange-50 shadow-md'\n                  : 'border-gray-200 hover:border-orange-300 hover:bg-orange-50/30'\n              }`}\n            >\n              <div className=\"text-xl font-medium text-gray-900\">{gender.label}</div>\n            </button>\n          ))}\n        </div>\n      )\n    },\n    {\n      title: \"AI Calculation\",\n      subtitle: \"Calculating your personalized nutrition plan\",\n      icon: Target,\n      content: (\n        <div className=\"space-y-4\">\n          <div className=\"text-center\">\n            {profileData.calculated_deficit !== undefined ? (\n              <div className=\"space-y-4\">\n                <div className=\"bg-blue-50 rounded-lg p-4 border border-blue-200\">\n                  <h3 className=\"font-semibold text-blue-900 mb-2\">Your Personalized Plan</h3>\n                  <div className=\"space-y-2 text-sm\">\n                    <div className=\"flex justify-between\">\n                      <span>Current Weight:</span>\n                      <span className=\"font-medium\">{profileData.weight} lbs</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span>Target Weight:</span>\n                      <span className=\"font-medium\">{profileData.target_weight} lbs</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span>Timeline:</span>\n                      <span className=\"font-medium\">{profileData.timeline}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span>Daily Calorie Adjustment:</span>\n                      <span className={`font-medium ${profileData.calculated_deficit > 0 ? 'text-red-600' : 'text-green-600'}`}>\n                        {profileData.calculated_deficit > 0 ? '+' : ''}{profileData.calculated_deficit} cal\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                \n                {profileData.ai_recommendation && (\n                  <div className=\"bg-orange-50 rounded-lg p-4 border border-orange-200\">\n                    <h4 className=\"font-semibold text-orange-900 mb-2\">⚠️ AI Recommendation</h4>\n                    <p className=\"text-sm text-orange-800\">{profileData.ai_recommendation}</p>\n                  </div>\n                )}\n                \n                <div className=\"bg-gray-50 rounded-lg p-4\">\n                  <h4 className=\"font-semibold text-gray-900 mb-2\">Daily Targets</h4>\n                  <div className=\"space-y-2 text-sm\">\n                    <div className=\"flex justify-between\">\n                      <span>Daily Calories:</span>\n                      <span className=\"font-semibold\">{profileData.daily_calories} cal</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span>Daily Protein:</span>\n                      <span className=\"font-semibold\">{profileData.daily_protein}g</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ) : (\n              <div className=\"text-center space-y-4\">\n                <p className=\"text-gray-600\">Click the button below to calculate your personalized nutrition plan</p>\n                <button\n                  onClick={calculateNutritionPlan}\n                  className=\"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\n                >\n                  Calculate Plan\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n      )\n    },\n    {\n      title: \"All Set!\",\n      subtitle: \"Your profile is ready to go\",\n      icon: CheckCircle,\n      content: (\n        <div className=\"text-center space-y-4\">\n          <div className=\"w-20 h-20 bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center mx-auto shadow-lg\">\n            <CheckCircle className=\"w-10 h-10 text-white\" />\n          </div>\n          <p className=\"text-gray-600 text-lg\">\n            We've calculated your daily targets based on your profile. You can always adjust these later!\n          </p>\n          <div className=\"bg-gray-50 rounded-xl p-4 space-y-2\">\n            <div className=\"flex justify-between\">\n              <span>Daily Calories:</span>\n              <span className=\"font-semibold\">{profileData.daily_calories} cal</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span>Daily Protein:</span>\n              <span className=\"font-semibold\">{profileData.daily_protein}g</span>\n            </div>\n            {profileData.calculated_deficit !== undefined && (\n              <div className=\"flex justify-between\">\n                <span>Daily Adjustment:</span>\n                <span className={`font-semibold ${profileData.calculated_deficit > 0 ? 'text-red-600' : 'text-green-600'}`}>\n                  {profileData.calculated_deficit > 0 ? '+' : ''}{profileData.calculated_deficit} cal\n                </span>\n              </div>\n            )}\n          </div>\n        </div>\n      )\n    }\n  ];\n\n  // SMART PROTECTION: Only prevent users who have COMPLETED onboarding from returning\n  useEffect(() => {\n    const checkExistingProfile = async () => {\n      try {\n        const response = await profileAPI.get();\n        if (response.data.profile) {\n          // User already has a completed profile - they shouldn't be here\n          console.log('User has completed profile, redirecting to dashboard');\n          // Mark them as having accessed the app to prevent future redirects\n          localStorage.setItem('hasAccessedApp', 'true');\n          navigate('/dashboard', { replace: true });\n          return;\n        }\n        // No profile exists - new user can continue with onboarding\n        console.log('New user with no profile, allowing onboarding');\n        setLoading(false);\n      } catch (error: any) {\n        console.log('Profile check error in onboarding:', error);\n        \n        if (error?.response?.status === 404) {\n          // Confirmed no profile exists - new user can continue\n          console.log('Confirmed no profile exists (404), continuing with onboarding');\n          setLoading(false);\n        } else {\n          // For other errors, check if they've completed onboarding before\n          const hasAccessedApp = localStorage.getItem('hasAccessedApp');\n          if (hasAccessedApp === 'true') {\n            // User has accessed app before - they shouldn't be in onboarding\n            console.log('Existing user trying to access onboarding, redirecting to dashboard');\n            navigate('/dashboard', { replace: true });\n          } else {\n            // Could be a new user with network issues - let them try onboarding\n            console.log('Network error for potentially new user, allowing onboarding attempt');\n            setLoading(false);\n          }\n        }\n      }\n    };\n    \n    checkExistingProfile();\n  }, [navigate]);\n\n  useEffect(() => {\n    if (timeRemaining > 0 && currentStep < steps.length - 1) {\n      const timer = setTimeout(() => setTimeRemaining(timeRemaining - 1), 1000);\n      return () => clearTimeout(timer);\n    }\n  }, [timeRemaining, currentStep, steps.length]);\n\n  const progress = ((currentStep + 1) / steps.length) * 100;\n  const currentStepData = steps[currentStep];\n\n  const handleNext = async () => {\n    if (currentStep < steps.length - 1) {\n      // Special validation for timeline step (step 4)\n      if (currentStep === 4) {\n        const timeline = profileData.timeline?.trim();\n        if (!timeline) {\n          setTimeframeError('Please enter a timeframe');\n          return;\n        }\n        \n        if (!validateTimeframe(timeline)) {\n          return; // Don't proceed if validation fails\n        }\n      }\n      \n      setCurrentStep(currentStep + 1);\n      setTimeframeError(''); // Clear any validation errors when moving to next step\n    } else {\n      try {\n        // Update profile with collected data\n        await profileAPI.update(profileData);\n        \n        // Mark user as having completed onboarding and accessed the app\n        localStorage.setItem('hasAccessedApp', 'true');\n        localStorage.setItem('onboardingCompleted', new Date().toISOString());\n        console.log('Onboarding completed successfully');\n        \n        // Redirect to dashboard\n        navigate('/dashboard');\n      } catch (error) {\n        console.error('Failed to update profile:', error);\n        \n        // Even if profile update fails, mark as completed to prevent redirect loops\n        localStorage.setItem('hasAccessedApp', 'true');\n        localStorage.setItem('onboardingCompleted', new Date().toISOString());\n        \n        // Still redirect to dashboard\n        navigate('/dashboard');\n      }\n    }\n  };\n\n  const handleBack = () => {\n    if (currentStep > 0) {\n      setCurrentStep(currentStep - 1);\n    }\n  };\n\n  const canProceed = () => {\n    const result = (() => {\n      switch (currentStep) {\n        case 0: return true; // Welcome step - always allow proceeding\n        case 1: return profileData.goal;\n        case 2: return profileData.weight > 0;\n        case 3: return profileData.target_weight > 0;\n        case 4: return profileData.timeline && profileData.timeline.trim().length > 0;\n        case 5: return profileData.height > 0;\n        case 6: return profileData.age > 0;\n        case 7: return profileData.activity_level;\n        case 8: return profileData.gender;\n        case 9: return profileData.calculated_deficit !== undefined; // AI calculation step\n        case 10: return true; // Final step - always allow proceeding\n        default: return false; // Can't proceed on unknown steps\n      }\n    })();\n    \n    console.log(`Step ${currentStep}: canProceed = ${result}`);\n    console.log('Profile data:', profileData);\n    if (currentStep === 9) {\n      console.log('Step 9 - calculated_deficit:', profileData.calculated_deficit);\n    }\n    return result;\n  };\n\n\n  if (loading) {\n      return (\n    <div className=\"min-h-screen bg-gradient-to-br from-orange-50 via-white to-red-50 flex items-center justify-center p-4\">\n      <div className=\"text-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600 mx-auto mb-4\"></div>\n        <p className=\"text-gray-600\">Checking your profile...</p>\n      </div>\n    </div>\n  );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-orange-50 via-white to-red-50 relative overflow-hidden\">\n      {/* Background Pattern */}\n      <div className=\"absolute inset-0 opacity-5\">\n        <div className=\"absolute top-10 left-10 w-32 h-32 bg-orange-500 rounded-full\"></div>\n        <div className=\"absolute top-32 right-20 w-20 h-20 bg-red-500 rounded-full\"></div>\n        <div className=\"absolute bottom-20 left-1/4 w-24 h-24 bg-orange-400 rounded-full\"></div>\n        <div className=\"absolute top-1/3 right-1/3 w-16 h-16 bg-red-400 rounded-full\"></div>\n      </div>\n\n      <div className=\"relative flex items-center justify-center min-h-screen p-4\">\n        <div className=\"max-w-2xl w-full\">\n          {/* Header */}\n          <div className=\"text-center mb-8\">\n            <div className=\"flex items-center justify-center space-x-3 mb-6\">\n              <div className=\"relative\">\n                <div className=\"w-16 h-16 bg-gradient-to-r from-orange-500 to-red-500 rounded-xl flex items-center justify-center shadow-lg\">\n                  <Target className=\"w-8 h-8 text-white\" />\n                </div>\n                <div className=\"absolute -top-1 -right-1 w-6 h-6 bg-yellow-400 rounded-full flex items-center justify-center\">\n                  <Zap className=\"w-3 h-3 text-yellow-800\" />\n                </div>\n              </div>\n              <h1 className=\"text-3xl font-bold text-gray-900\">\n                NutriTrack\n              </h1>\n            </div>\n            \n            {/* Progress Bar */}\n            <div className=\"w-full bg-gray-200 rounded-full h-3 mb-6 shadow-inner\">\n              <div \n                className=\"bg-gradient-to-r from-orange-500 to-red-500 h-3 rounded-full transition-all duration-500 shadow-sm\"\n                style={{ width: `${progress}%` }}\n              ></div>\n            </div>\n          \n          {/* Progress Info */}\n          <div className=\"flex items-center justify-between text-sm text-gray-600 mb-4\">\n            <span>Step {currentStep + 1} of {steps.length}</span>\n            <span>{Math.round(progress)}% Complete</span>\n          </div>\n          \n          {/* Time Remaining */}\n          <div className=\"text-sm text-gray-500\">\n            ⏱️ {timeRemaining >= 60 ? `${Math.floor(timeRemaining / 60)}m ${timeRemaining % 60}s` : `${timeRemaining}s`} remaining\n          </div>\n        </div>\n\n          {/* Step Content */}\n          <div className=\"bg-white rounded-3xl shadow-2xl p-8 mb-8 border border-white/20\">\n            <div className=\"text-center mb-8\">\n              <div className=\"relative mx-auto mb-6\">\n                <div className=\"w-20 h-20 bg-gradient-to-r from-orange-100 to-red-100 rounded-full flex items-center justify-center mx-auto shadow-lg\">\n                  <currentStepData.icon className=\"w-10 h-10 text-orange-600\" />\n                </div>\n                <div className=\"absolute -top-1 -right-1 w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center\">\n                  <span className=\"text-xs font-bold text-yellow-800\">{currentStep + 1}</span>\n                </div>\n              </div>\n              <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">{currentStepData.title}</h2>\n              <p className=\"text-gray-600\">{currentStepData.subtitle}</p>\n            </div>\n          \n          <div className=\"min-h-[200px] flex items-center justify-center\">\n            {currentStepData.content}\n          </div>\n        </div>\n\n        {/* Navigation */}\n        <div className=\"flex items-center justify-between\">\n          <button\n            onClick={handleBack}\n            disabled={currentStep === 0}\n            className=\"flex items-center space-x-2 px-6 py-3 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            <ArrowLeft className=\"w-5 h-5\" />\n            <span>Back</span>\n          </button>\n          \n\n          \n          <button\n            onClick={handleNext}\n            disabled={!canProceed()}\n            className=\"flex items-center space-x-2 px-8 py-4 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-xl hover:from-orange-600 hover:to-red-600 transform hover:-translate-y-1 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-lg hover:shadow-xl\"\n          >\n            <span>{currentStep === 10 ? 'Get Started' : 'Next'}</span>\n            <ArrowRight className=\"w-5 h-5\" />\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n  );\n};\n\nexport default Onboarding;\n"],"mappings":"qIAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAC/D,OAASC,UAAU,CAAEC,SAAS,CAAEC,MAAM,CAAEC,IAAI,CAAEC,QAAQ,CAAEC,KAAK,CAAEC,KAAK,CAAEC,QAAQ,CAAEC,WAAW,CAAEC,GAAG,KAAQ,cAAc,CACtH,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,UAAU,KAAQ,iBAAiB,CAC5C,OAASC,cAAc,KAAQ,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAiBzD,KAAM,CAAAC,UAAoB,CAAGA,CAAA,GAAM,CACjC,KAAM,CAAAC,QAAQ,CAAGR,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAES,oBAAqB,CAAC,CAAGP,cAAc,CAAC,CAAC,CACjD,KAAM,CAACQ,WAAW,CAAEC,cAAc,CAAC,CAAGxB,QAAQ,CAAC,CAAC,CAAC,CACjD,KAAM,CAACyB,WAAW,CAAEC,cAAc,CAAC,CAAG1B,QAAQ,CAAc,CAC1D2B,cAAc,CAAE,IAAI,CACpBC,aAAa,CAAE,GAAG,CAClBC,MAAM,CAAE,CAAC,CACTC,aAAa,CAAE,CAAC,CAChBC,MAAM,CAAE,CAAC,CACTC,GAAG,CAAE,CAAC,CACNC,cAAc,CAAE,UAAU,CAC1BC,MAAM,CAAE,MACV,CAAC,CAAC,CACF,KAAM,CAACC,aAAa,CAAEC,gBAAgB,CAAC,CAAGpC,QAAQ,CAAC,GAAG,CAAC,CACvD,KAAM,CAACqC,OAAO,CAAEC,UAAU,CAAC,CAAGtC,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACuC,cAAc,CAAEC,iBAAiB,CAAC,CAAGxC,QAAQ,CAAC,EAAE,CAAC,CAExD;AACA,KAAM,CAAAyC,iBAAiB,CAAGvC,WAAW,CAAEwC,QAAgB,EAAc,CACnE,GAAI,CAACA,QAAQ,EAAI,CAACA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAE,CACjCH,iBAAiB,CAAC,0BAA0B,CAAC,CAC7C,MAAO,MAAK,CACd,CAEA,KAAM,CAAAI,YAAY,CAAGF,QAAQ,CAACG,WAAW,CAAC,CAAC,CAACF,IAAI,CAAC,CAAC,CAClD,KAAM,CAAAG,WAAW,CAAGF,YAAY,CAACG,KAAK,CAAC,OAAO,CAAC,CAC/C,KAAM,CAAAC,SAAS,CAAGJ,YAAY,CAACG,KAAK,CAAC,6BAA6B,CAAC,CAEnE,GAAI,CAACD,WAAW,CAAE,CAChBN,iBAAiB,CAAC,uDAAuD,CAAC,CAC1E,MAAO,MAAK,CACd,CAEA,GAAI,CAACQ,SAAS,CAAE,CACdR,iBAAiB,CAAC,6FAA6F,CAAC,CAChH,MAAO,MAAK,CACd,CAEA,KAAM,CAAAS,MAAM,CAAGC,QAAQ,CAACJ,WAAW,CAAC,CAAC,CAAC,CAAC,CACvC,KAAM,CAAAK,IAAI,CAAGH,SAAS,CAAC,CAAC,CAAC,CAACH,WAAW,CAAC,CAAC,CAEvC;AACA,GAAIM,IAAI,CAACC,QAAQ,CAAC,KAAK,CAAC,EAAID,IAAI,GAAK,GAAG,CAAE,CACxC,GAAIF,MAAM,CAAG,CAAC,EAAIA,MAAM,CAAG,GAAG,CAAE,CAC9BT,iBAAiB,CAAC,qCAAqC,CAAC,CACxD,MAAO,MAAK,CACd,CACF,CAAC,IAAM,IAAIW,IAAI,CAACC,QAAQ,CAAC,MAAM,CAAC,EAAID,IAAI,GAAK,IAAI,CAAE,CACjD,GAAIF,MAAM,CAAG,CAAC,EAAIA,MAAM,CAAG,EAAE,CAAE,CAC7BT,iBAAiB,CAAC,qCAAqC,CAAC,CACxD,MAAO,MAAK,CACd,CACF,CAAC,IAAM,IAAIW,IAAI,CAACC,QAAQ,CAAC,OAAO,CAAC,EAAID,IAAI,GAAK,IAAI,CAAE,CAClD,GAAIF,MAAM,CAAG,CAAC,EAAIA,MAAM,CAAG,EAAE,CAAE,CAC7BT,iBAAiB,CAAC,sCAAsC,CAAC,CACzD,MAAO,MAAK,CACd,CACF,CAEAA,iBAAiB,CAAC,EAAE,CAAC,CACrB,MAAO,KAAI,CACb,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAa,sBAAsB,CAAG,KAAAA,CAAA,GAAY,CACzC,GAAI,KAAAC,qBAAA,CACF;AACA,KAAM,CAAAZ,QAAQ,CAAG,EAAAY,qBAAA,CAAA7B,WAAW,CAACiB,QAAQ,UAAAY,qBAAA,iBAApBA,qBAAA,CAAsBT,WAAW,CAAC,CAAC,GAAI,EAAE,CAC1D,GAAI,CAAAU,IAAI,CAAG,CAAC,CAEZ;AACA,KAAM,CAAAT,WAAW,CAAGJ,QAAQ,CAACK,KAAK,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAC,SAAS,CAAGN,QAAQ,CAACK,KAAK,CAAC,6BAA6B,CAAC,CAE/D,GAAID,WAAW,EAAIE,SAAS,CAAE,CAC5B,KAAM,CAAAC,MAAM,CAAGC,QAAQ,CAACJ,WAAW,CAAC,CAAC,CAAC,CAAC,CACvC,KAAM,CAAAK,IAAI,CAAGH,SAAS,CAAC,CAAC,CAAC,CAACH,WAAW,CAAC,CAAC,CAEvC,OAAQM,IAAI,EACV,IAAK,MAAM,CACX,IAAK,IAAI,CACPI,IAAI,CAAGN,MAAM,CAAG,CAAC,CACjB,MACF,IAAK,OAAO,CACZ,IAAK,IAAI,CACPM,IAAI,CAAGN,MAAM,CAAG,EAAE,CAClB,MACF,IAAK,KAAK,CACV,IAAK,GAAG,CACNM,IAAI,CAAGN,MAAM,CACb,MACF,QACEM,IAAI,CAAGN,MAAM,CAAG,CAAC,CAAE;AACvB,CACF,CAAC,IAAM,CACL;AACAM,IAAI,CAAG,EAAE,CAAE;AACb,CAEA;AACA,KAAM,CAAAC,gBAAgB,CAAG/B,WAAW,CAACK,aAAa,CAAGL,WAAW,CAACI,MAAM,CACvE,KAAM,CAAA4B,YAAY,CAAGD,gBAAgB,CAAG,CAAC,CAEzC;AACA;AACA,KAAM,CAAAE,sBAAsB,CAAGC,IAAI,CAACC,GAAG,CAACJ,gBAAgB,CAAC,CAAG,IAAI,CAChE,KAAM,CAAAK,sBAAsB,CAAGF,IAAI,CAACG,KAAK,CAACJ,sBAAsB,CAAGH,IAAI,CAAC,CAExE;AACA,GAAI,CAAAQ,GAAG,CAAG,CAAC,CACX,GAAItC,WAAW,CAACS,MAAM,GAAK,MAAM,CAAE,CACjC6B,GAAG,CAAG,MAAM,CAAI,MAAM,CAAGtC,WAAW,CAACI,MAAM,CAAG,QAAS,CAAI,KAAK,CAAGJ,WAAW,CAACM,MAAM,CAAG,IAAK,CAAI,KAAK,CAAGN,WAAW,CAACO,GAAI,CAC3H,CAAC,IAAM,CACL+B,GAAG,CAAG,OAAO,CAAI,KAAK,CAAGtC,WAAW,CAACI,MAAM,CAAG,QAAS,CAAI,KAAK,CAAGJ,WAAW,CAACM,MAAM,CAAG,IAAK,CAAI,KAAK,CAAGN,WAAW,CAACO,GAAI,CAC3H,CAEA;AACA,KAAM,CAAAgC,mBAAmB,CAAG,CAC1BC,SAAS,CAAE,GAAG,CACdC,KAAK,CAAE,KAAK,CACZC,QAAQ,CAAE,IAAI,CACdC,MAAM,CAAE,KAAK,CACbC,WAAW,CAAE,GACf,CAAC,CAED,KAAM,CAAAC,mBAAmB,CAAGX,IAAI,CAACG,KAAK,CAACC,GAAG,CAAGC,mBAAmB,CAACvC,WAAW,CAACQ,cAAc,CAAqC,CAAC,CAEjI;AACA,GAAI,CAAAsC,cAAc,CAAGD,mBAAmB,CACxC,GAAIb,YAAY,CAAE,CAChBc,cAAc,CAAGD,mBAAmB,CAAGT,sBAAsB,CAC/D,CAAC,IAAM,CACLU,cAAc,CAAGD,mBAAmB,CAAGT,sBAAsB,CAC/D,CAEA;AACA,GAAI,CAAAW,gBAAgB,CAAG,EAAE,CACzB,GAAIf,YAAY,EAAII,sBAAsB,CAAG,IAAI,CAAE,CACjDW,gBAAgB,4BAAAC,MAAA,CAAoBZ,sBAAsB,gHAAAY,MAAA,CAA8Gd,IAAI,CAACe,IAAI,CAACnB,IAAI,CAAG,GAAG,CAAC,2BAAAkB,MAAA,CAAyBd,IAAI,CAACG,KAAK,CAACD,sBAAsB,CAAG,IAAI,CAAC,2BAAyB,CAC1R,CAEA;AACA,KAAM,CAAAc,UAAU,CAAGlD,WAAW,CAACI,MAAM,CAAG,QAAQ,CAChD,GAAI,CAAA+C,iBAAiB,CAAG,GAAG,CAAE;AAC7B,GAAInB,YAAY,CAAE,CAChBmB,iBAAiB,CAAG,GAAG,CAAE;AAC3B,CAAC,IAAM,IAAI,CAACnB,YAAY,CAAE,CACxBmB,iBAAiB,CAAG,GAAG,CAAE;AAC3B,CACA,KAAM,CAAAC,aAAa,CAAGlB,IAAI,CAACG,KAAK,CAACa,UAAU,CAAGC,iBAAiB,CAAC,CAEhE;AACAlD,cAAc,CAACoD,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACdD,IAAI,MACPnD,cAAc,CAAE4C,cAAc,CAC9B3C,aAAa,CAAEiD,aAAa,CAC5BG,kBAAkB,CAAEvB,YAAY,CAAG,CAACI,sBAAsB,CAAGA,sBAAsB,CACnFoB,iBAAiB,CAAET,gBAAgB,EACnC,CAAC,CAEL,CAAE,MAAOU,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,mCAAmC,CAAEA,KAAK,CAAC,CACzD;AACAxD,cAAc,CAACoD,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACdD,IAAI,MACPnD,cAAc,CAAE,IAAI,CACpBC,aAAa,CAAE,GAAG,CAClBoD,kBAAkB,CAAE,CAAC,CACrBC,iBAAiB,CAAE,8DAA8D,EACjF,CAAC,CACL,CACF,CAAC,CAED,KAAM,CAAAG,KAAK,CAAG,CACZ,CACEC,KAAK,CAAE,wBAAwB,CAC/BC,QAAQ,CAAE,6CAA6C,CACvDC,IAAI,CAAElF,MAAM,CACZmF,OAAO,cACLrE,KAAA,QAAKsE,SAAS,CAAC,uBAAuB,CAAAC,QAAA,eACpCzE,IAAA,QAAKwE,SAAS,CAAC,uHAAuH,CAAAC,QAAA,cACpIzE,IAAA,CAACZ,MAAM,EAACoF,SAAS,CAAC,sBAAsB,CAAE,CAAC,CACxC,CAAC,cACNxE,IAAA,MAAGwE,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,+EAErC,CAAG,CAAC,EACD,CAET,CAAC,CACD,CACEL,KAAK,CAAE,mBAAmB,CAC1BC,QAAQ,CAAE,4CAA4C,CACtDC,IAAI,CAAElF,MAAM,CACZmF,OAAO,cACLvE,IAAA,QAAKwE,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxBzE,IAAA,QAAKwE,SAAS,CAAC,wBAAwB,CAAAC,QAAA,CACpC,CACC,CAAEC,KAAK,CAAE,MAAM,CAAEC,KAAK,CAAE,aAAa,CAAEC,WAAW,CAAE,0BAA2B,CAAC,CAChF,CAAEF,KAAK,CAAE,UAAU,CAAEC,KAAK,CAAE,iBAAiB,CAAEC,WAAW,CAAE,wBAAyB,CAAC,CACtF,CAAEF,KAAK,CAAE,MAAM,CAAEC,KAAK,CAAE,aAAa,CAAEC,WAAW,CAAE,yBAA0B,CAAC,CAChF,CAACC,GAAG,CAAEC,IAAI,eACT5E,KAAA,WAEE6E,OAAO,CAAEA,CAAA,GAAMtE,cAAc,CAACoD,IAAI,EAAAC,aAAA,CAAAA,aAAA,IAAUD,IAAI,MAAEiB,IAAI,CAAEA,IAAI,CAACJ,KAAK,EAAG,CAAE,CACvEF,SAAS,kEAAAhB,MAAA,CACPhD,WAAW,CAACsE,IAAI,GAAKA,IAAI,CAACJ,KAAK,CAC3B,0CAA0C,CAC1C,+DAA+D,CAClE,CAAAD,QAAA,eAEHzE,IAAA,QAAKwE,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAEK,IAAI,CAACH,KAAK,CAAM,CAAC,cAC7D3E,IAAA,QAAKwE,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAEK,IAAI,CAACF,WAAW,CAAM,CAAC,GAT1DE,IAAI,CAACJ,KAUJ,CACT,CAAC,CACC,CAAC,CACH,CAET,CAAC,CACD,CACEN,KAAK,CAAE,gBAAgB,CACvBC,QAAQ,CAAE,qCAAqC,CAC/CC,IAAI,CAAE/E,KAAK,CACXgF,OAAO,cACLvE,IAAA,QAAKwE,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxBvE,KAAA,QAAKsE,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BzE,IAAA,UACEgF,IAAI,CAAC,QAAQ,CACbN,KAAK,CAAElE,WAAW,CAACI,MAAM,EAAI,EAAG,CAChCqE,QAAQ,CAAGC,CAAC,EAAKzE,cAAc,CAACoD,IAAI,EAAAC,aAAA,CAAAA,aAAA,IAAUD,IAAI,MAAEjD,MAAM,CAAEuE,UAAU,CAACD,CAAC,CAACE,MAAM,CAACV,KAAK,CAAC,EAAI,CAAC,EAAG,CAAE,CAChGF,SAAS,CAAC,6EAA6E,CACvFa,WAAW,CAAC,KAAK,CACjBC,GAAG,CAAC,IAAI,CACRC,GAAG,CAAC,KAAK,CACV,CAAC,cACFvF,IAAA,QAAKwE,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,QAAM,CAAK,CAAC,EAChD,CAAC,CACH,CAET,CAAC,CACD,CACEL,KAAK,CAAE,eAAe,CACtBC,QAAQ,CAAE,0BAA0B,CACpCC,IAAI,CAAElF,MAAM,CACZmF,OAAO,cACLvE,IAAA,QAAKwE,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxBvE,KAAA,QAAKsE,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BzE,IAAA,UACEgF,IAAI,CAAC,QAAQ,CACbN,KAAK,CAAElE,WAAW,CAACK,aAAa,EAAI,EAAG,CACvCoE,QAAQ,CAAGC,CAAC,EAAKzE,cAAc,CAACoD,IAAI,EAAAC,aAAA,CAAAA,aAAA,IAAUD,IAAI,MAAEhD,aAAa,CAAEsE,UAAU,CAACD,CAAC,CAACE,MAAM,CAACV,KAAK,CAAC,EAAI,CAAC,EAAG,CAAE,CACvGF,SAAS,CAAC,6EAA6E,CACvFa,WAAW,CAAC,KAAK,CACjBC,GAAG,CAAC,IAAI,CACRC,GAAG,CAAC,KAAK,CACV,CAAC,cACFvF,IAAA,QAAKwE,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,QAAM,CAAK,CAAC,EAChD,CAAC,CACH,CAET,CAAC,CACD,CACEL,KAAK,CAAE,UAAU,CACjBC,QAAQ,CAAE,6CAA6C,CACvDC,IAAI,CAAE7E,QAAQ,CACd8E,OAAO,cACLvE,IAAA,QAAKwE,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxBvE,KAAA,QAAKsE,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BzE,IAAA,UACEgF,IAAI,CAAC,MAAM,CACXN,KAAK,CAAElE,WAAW,CAACiB,QAAQ,EAAI,EAAG,CAClCwD,QAAQ,CAAGC,CAAC,EAAK,CACf,KAAM,CAAAR,KAAK,CAAGQ,CAAC,CAACE,MAAM,CAACV,KAAK,CAC5BjE,cAAc,CAACoD,IAAI,EAAAC,aAAA,CAAAA,aAAA,IAAUD,IAAI,MAAEpC,QAAQ,CAAEiD,KAAK,EAAG,CAAC,CACtD;AACA,GAAIpD,cAAc,CAAE,CAClBC,iBAAiB,CAAC,EAAE,CAAC,CACvB,CACF,CAAE,CACFiD,SAAS,uHAAAhB,MAAA,CACPlC,cAAc,CACV,qCAAqC,CACrC,iEAAiE,CACpE,CACH+D,WAAW,CAAC,kCAAkC,CAC/C,CAAC,cACFrF,IAAA,QAAKwE,SAAS,CAAC,cAAc,CAAAC,QAAA,CAC1BnD,cAAc,cACbtB,IAAA,QAAKwE,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAEnD,cAAc,CAAM,CAAC,cAEpDtB,IAAA,QAAKwE,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,uCAAqC,CAAK,CAC1E,CACE,CAAC,EACH,CAAC,CACH,CAET,CAAC,CACD,CACEL,KAAK,CAAE,QAAQ,CACfC,QAAQ,CAAE,mBAAmB,CAC7BC,IAAI,CAAE9E,KAAK,CACX+E,OAAO,cACLvE,IAAA,QAAKwE,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxBvE,KAAA,QAAKsE,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BzE,IAAA,UACEgF,IAAI,CAAC,QAAQ,CACbN,KAAK,CAAElE,WAAW,CAACM,MAAM,EAAI,EAAG,CAChCmE,QAAQ,CAAGC,CAAC,EAAKzE,cAAc,CAACoD,IAAI,EAAAC,aAAA,CAAAA,aAAA,IAAUD,IAAI,MAAE/C,MAAM,CAAEqE,UAAU,CAACD,CAAC,CAACE,MAAM,CAACV,KAAK,CAAC,EAAI,CAAC,EAAG,CAAE,CAChGF,SAAS,CAAC,6EAA6E,CACvFa,WAAW,CAAC,IAAI,CAChBC,GAAG,CAAC,IAAI,CACRC,GAAG,CAAC,IAAI,CACT,CAAC,cACFvF,IAAA,QAAKwE,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,QAAM,CAAK,CAAC,EAChD,CAAC,CACH,CAET,CAAC,CACD,CACEL,KAAK,CAAE,KAAK,CACZC,QAAQ,CAAE,0CAA0C,CACpDC,IAAI,CAAE7E,QAAQ,CACd8E,OAAO,cACLvE,IAAA,QAAKwE,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxBvE,KAAA,QAAKsE,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BzE,IAAA,UACEgF,IAAI,CAAC,QAAQ,CACbN,KAAK,CAAElE,WAAW,CAACO,GAAG,EAAI,EAAG,CAC7BkE,QAAQ,CAAGC,CAAC,EAAKzE,cAAc,CAACoD,IAAI,EAAAC,aAAA,CAAAA,aAAA,IAAUD,IAAI,MAAE9C,GAAG,CAAEkB,QAAQ,CAACiD,CAAC,CAACE,MAAM,CAACV,KAAK,CAAC,EAAI,CAAC,EAAG,CAAE,CAC3FF,SAAS,CAAC,6EAA6E,CACvFa,WAAW,CAAC,IAAI,CAChBC,GAAG,CAAC,IAAI,CACRC,GAAG,CAAC,KAAK,CACV,CAAC,cACFvF,IAAA,QAAKwE,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,WAAS,CAAK,CAAC,EACnD,CAAC,CACH,CAET,CAAC,CACD,CACEL,KAAK,CAAE,gBAAgB,CACvBC,QAAQ,CAAE,uCAAuC,CACjDC,IAAI,CAAEhF,QAAQ,CACdiF,OAAO,cACLvE,IAAA,QAAKwE,SAAS,CAAC,WAAW,CAAAC,QAAA,CACvB,CACC,CAAEC,KAAK,CAAE,WAAW,CAAEC,KAAK,CAAE,WAAW,CAAEC,WAAW,CAAE,uBAAwB,CAAC,CAChF,CAAEF,KAAK,CAAE,OAAO,CAAEC,KAAK,CAAE,gBAAgB,CAAEC,WAAW,CAAE,8BAA+B,CAAC,CACxF,CAAEF,KAAK,CAAE,UAAU,CAAEC,KAAK,CAAE,mBAAmB,CAAEC,WAAW,CAAE,iCAAkC,CAAC,CACjG,CAAEF,KAAK,CAAE,QAAQ,CAAEC,KAAK,CAAE,aAAa,CAAEC,WAAW,CAAE,6BAA8B,CAAC,CACrF,CAAEF,KAAK,CAAE,aAAa,CAAEC,KAAK,CAAE,kBAAkB,CAAEC,WAAW,CAAE,kCAAmC,CAAC,CACrG,CAACC,GAAG,CAAEW,KAAK,eACVtF,KAAA,WAEE6E,OAAO,CAAEA,CAAA,GAAMtE,cAAc,CAACoD,IAAI,EAAAC,aAAA,CAAAA,aAAA,IAAUD,IAAI,MAAE7C,cAAc,CAAEwE,KAAK,CAACd,KAAK,EAAG,CAAE,CAClFF,SAAS,yEAAAhB,MAAA,CACPhD,WAAW,CAACQ,cAAc,GAAKwE,KAAK,CAACd,KAAK,CACtC,0CAA0C,CAC1C,+DAA+D,CAClE,CAAAD,QAAA,eAEHzE,IAAA,QAAKwE,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAEe,KAAK,CAACb,KAAK,CAAM,CAAC,cAC9D3E,IAAA,QAAKwE,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAEe,KAAK,CAACZ,WAAW,CAAM,CAAC,GAT3DY,KAAK,CAACd,KAUL,CACT,CAAC,CACC,CAET,CAAC,CACD,CACEN,KAAK,CAAE,QAAQ,CACfC,QAAQ,CAAE,+CAA+C,CACzDC,IAAI,CAAEjF,IAAI,CACVkF,OAAO,cACLvE,IAAA,QAAKwE,SAAS,CAAC,WAAW,CAAAC,QAAA,CACvB,CACC,CAAEC,KAAK,CAAE,MAAM,CAAEC,KAAK,CAAE,MAAO,CAAC,CAChC,CAAED,KAAK,CAAE,QAAQ,CAAEC,KAAK,CAAE,QAAS,CAAC,CACrC,CAACE,GAAG,CAAE5D,MAAM,eACXjB,IAAA,WAEE+E,OAAO,CAAEA,CAAA,GAAMtE,cAAc,CAACoD,IAAI,EAAAC,aAAA,CAAAA,aAAA,IAAUD,IAAI,MAAE5C,MAAM,CAAEA,MAAM,CAACyD,KAAK,EAAG,CAAE,CAC3EF,SAAS,2EAAAhB,MAAA,CACPhD,WAAW,CAACS,MAAM,GAAKA,MAAM,CAACyD,KAAK,CAC/B,0CAA0C,CAC1C,+DAA+D,CAClE,CAAAD,QAAA,cAEHzE,IAAA,QAAKwE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAExD,MAAM,CAAC0D,KAAK,CAAM,CAAC,EARlE1D,MAAM,CAACyD,KASN,CACT,CAAC,CACC,CAET,CAAC,CACD,CACEN,KAAK,CAAE,gBAAgB,CACvBC,QAAQ,CAAE,8CAA8C,CACxDC,IAAI,CAAElF,MAAM,CACZmF,OAAO,cACLvE,IAAA,QAAKwE,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxBzE,IAAA,QAAKwE,SAAS,CAAC,aAAa,CAAAC,QAAA,CACzBjE,WAAW,CAACuD,kBAAkB,GAAK0B,SAAS,cAC3CvF,KAAA,QAAKsE,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBvE,KAAA,QAAKsE,SAAS,CAAC,kDAAkD,CAAAC,QAAA,eAC/DzE,IAAA,OAAIwE,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,wBAAsB,CAAI,CAAC,cAC5EvE,KAAA,QAAKsE,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCvE,KAAA,QAAKsE,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACnCzE,IAAA,SAAAyE,QAAA,CAAM,iBAAe,CAAM,CAAC,cAC5BvE,KAAA,SAAMsE,SAAS,CAAC,aAAa,CAAAC,QAAA,EAAEjE,WAAW,CAACI,MAAM,CAAC,MAAI,EAAM,CAAC,EAC1D,CAAC,cACNV,KAAA,QAAKsE,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACnCzE,IAAA,SAAAyE,QAAA,CAAM,gBAAc,CAAM,CAAC,cAC3BvE,KAAA,SAAMsE,SAAS,CAAC,aAAa,CAAAC,QAAA,EAAEjE,WAAW,CAACK,aAAa,CAAC,MAAI,EAAM,CAAC,EACjE,CAAC,cACNX,KAAA,QAAKsE,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACnCzE,IAAA,SAAAyE,QAAA,CAAM,WAAS,CAAM,CAAC,cACtBzE,IAAA,SAAMwE,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAEjE,WAAW,CAACiB,QAAQ,CAAO,CAAC,EACxD,CAAC,cACNvB,KAAA,QAAKsE,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACnCzE,IAAA,SAAAyE,QAAA,CAAM,2BAAyB,CAAM,CAAC,cACtCvE,KAAA,SAAMsE,SAAS,gBAAAhB,MAAA,CAAiBhD,WAAW,CAACuD,kBAAkB,CAAG,CAAC,CAAG,cAAc,CAAG,gBAAgB,CAAG,CAAAU,QAAA,EACtGjE,WAAW,CAACuD,kBAAkB,CAAG,CAAC,CAAG,GAAG,CAAG,EAAE,CAAEvD,WAAW,CAACuD,kBAAkB,CAAC,MACjF,EAAM,CAAC,EACJ,CAAC,EACH,CAAC,EACH,CAAC,CAELvD,WAAW,CAACwD,iBAAiB,eAC5B9D,KAAA,QAAKsE,SAAS,CAAC,sDAAsD,CAAAC,QAAA,eACnEzE,IAAA,OAAIwE,SAAS,CAAC,oCAAoC,CAAAC,QAAA,CAAC,gCAAoB,CAAI,CAAC,cAC5EzE,IAAA,MAAGwE,SAAS,CAAC,yBAAyB,CAAAC,QAAA,CAAEjE,WAAW,CAACwD,iBAAiB,CAAI,CAAC,EACvE,CACN,cAED9D,KAAA,QAAKsE,SAAS,CAAC,2BAA2B,CAAAC,QAAA,eACxCzE,IAAA,OAAIwE,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,eAAa,CAAI,CAAC,cACnEvE,KAAA,QAAKsE,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCvE,KAAA,QAAKsE,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACnCzE,IAAA,SAAAyE,QAAA,CAAM,iBAAe,CAAM,CAAC,cAC5BvE,KAAA,SAAMsE,SAAS,CAAC,eAAe,CAAAC,QAAA,EAAEjE,WAAW,CAACE,cAAc,CAAC,MAAI,EAAM,CAAC,EACpE,CAAC,cACNR,KAAA,QAAKsE,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACnCzE,IAAA,SAAAyE,QAAA,CAAM,gBAAc,CAAM,CAAC,cAC3BvE,KAAA,SAAMsE,SAAS,CAAC,eAAe,CAAAC,QAAA,EAAEjE,WAAW,CAACG,aAAa,CAAC,GAAC,EAAM,CAAC,EAChE,CAAC,EACH,CAAC,EACH,CAAC,EACH,CAAC,cAENT,KAAA,QAAKsE,SAAS,CAAC,uBAAuB,CAAAC,QAAA,eACpCzE,IAAA,MAAGwE,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,sEAAoE,CAAG,CAAC,cACrGzE,IAAA,WACE+E,OAAO,CAAE3C,sBAAuB,CAChCoC,SAAS,CAAC,iFAAiF,CAAAC,QAAA,CAC5F,gBAED,CAAQ,CAAC,EACN,CACN,CACE,CAAC,CACH,CAET,CAAC,CACD,CACEL,KAAK,CAAE,UAAU,CACjBC,QAAQ,CAAE,6BAA6B,CACvCC,IAAI,CAAE5E,WAAW,CACjB6E,OAAO,cACLrE,KAAA,QAAKsE,SAAS,CAAC,uBAAuB,CAAAC,QAAA,eACpCzE,IAAA,QAAKwE,SAAS,CAAC,uHAAuH,CAAAC,QAAA,cACpIzE,IAAA,CAACN,WAAW,EAAC8E,SAAS,CAAC,sBAAsB,CAAE,CAAC,CAC7C,CAAC,cACNxE,IAAA,MAAGwE,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,+FAErC,CAAG,CAAC,cACJvE,KAAA,QAAKsE,SAAS,CAAC,qCAAqC,CAAAC,QAAA,eAClDvE,KAAA,QAAKsE,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACnCzE,IAAA,SAAAyE,QAAA,CAAM,iBAAe,CAAM,CAAC,cAC5BvE,KAAA,SAAMsE,SAAS,CAAC,eAAe,CAAAC,QAAA,EAAEjE,WAAW,CAACE,cAAc,CAAC,MAAI,EAAM,CAAC,EACpE,CAAC,cACNR,KAAA,QAAKsE,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACnCzE,IAAA,SAAAyE,QAAA,CAAM,gBAAc,CAAM,CAAC,cAC3BvE,KAAA,SAAMsE,SAAS,CAAC,eAAe,CAAAC,QAAA,EAAEjE,WAAW,CAACG,aAAa,CAAC,GAAC,EAAM,CAAC,EAChE,CAAC,CACLH,WAAW,CAACuD,kBAAkB,GAAK0B,SAAS,eAC3CvF,KAAA,QAAKsE,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACnCzE,IAAA,SAAAyE,QAAA,CAAM,mBAAiB,CAAM,CAAC,cAC9BvE,KAAA,SAAMsE,SAAS,kBAAAhB,MAAA,CAAmBhD,WAAW,CAACuD,kBAAkB,CAAG,CAAC,CAAG,cAAc,CAAG,gBAAgB,CAAG,CAAAU,QAAA,EACxGjE,WAAW,CAACuD,kBAAkB,CAAG,CAAC,CAAG,GAAG,CAAG,EAAE,CAAEvD,WAAW,CAACuD,kBAAkB,CAAC,MACjF,EAAM,CAAC,EACJ,CACN,EACE,CAAC,EACH,CAET,CAAC,CACF,CAED;AACA/E,SAAS,CAAC,IAAM,CACd,KAAM,CAAA0G,oBAAoB,CAAG,KAAAA,CAAA,GAAY,CACvC,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAA9F,UAAU,CAAC+F,GAAG,CAAC,CAAC,CACvC,GAAID,QAAQ,CAACE,IAAI,CAACC,OAAO,CAAE,CACzB;AACA5B,OAAO,CAAC6B,GAAG,CAAC,sDAAsD,CAAC,CACnE;AACAC,YAAY,CAACC,OAAO,CAAC,gBAAgB,CAAE,MAAM,CAAC,CAC9C7F,QAAQ,CAAC,YAAY,CAAE,CAAE8F,OAAO,CAAE,IAAK,CAAC,CAAC,CACzC,OACF,CACA;AACAhC,OAAO,CAAC6B,GAAG,CAAC,+CAA+C,CAAC,CAC5D1E,UAAU,CAAC,KAAK,CAAC,CACnB,CAAE,MAAO4C,KAAU,CAAE,KAAAkC,eAAA,CACnBjC,OAAO,CAAC6B,GAAG,CAAC,oCAAoC,CAAE9B,KAAK,CAAC,CAExD,GAAI,CAAAA,KAAK,SAALA,KAAK,kBAAAkC,eAAA,CAALlC,KAAK,CAAE0B,QAAQ,UAAAQ,eAAA,iBAAfA,eAAA,CAAiBC,MAAM,IAAK,GAAG,CAAE,CACnC;AACAlC,OAAO,CAAC6B,GAAG,CAAC,+DAA+D,CAAC,CAC5E1E,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,IAAM,CACL;AACA,KAAM,CAAAgF,cAAc,CAAGL,YAAY,CAACM,OAAO,CAAC,gBAAgB,CAAC,CAC7D,GAAID,cAAc,GAAK,MAAM,CAAE,CAC7B;AACAnC,OAAO,CAAC6B,GAAG,CAAC,qEAAqE,CAAC,CAClF3F,QAAQ,CAAC,YAAY,CAAE,CAAE8F,OAAO,CAAE,IAAK,CAAC,CAAC,CAC3C,CAAC,IAAM,CACL;AACAhC,OAAO,CAAC6B,GAAG,CAAC,qEAAqE,CAAC,CAClF1E,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CACF,CACF,CAAC,CAEDqE,oBAAoB,CAAC,CAAC,CACxB,CAAC,CAAE,CAACtF,QAAQ,CAAC,CAAC,CAEdpB,SAAS,CAAC,IAAM,CACd,GAAIkC,aAAa,CAAG,CAAC,EAAIZ,WAAW,CAAG6D,KAAK,CAACoC,MAAM,CAAG,CAAC,CAAE,CACvD,KAAM,CAAAC,KAAK,CAAGC,UAAU,CAAC,IAAMtF,gBAAgB,CAACD,aAAa,CAAG,CAAC,CAAC,CAAE,IAAI,CAAC,CACzE,MAAO,IAAMwF,YAAY,CAACF,KAAK,CAAC,CAClC,CACF,CAAC,CAAE,CAACtF,aAAa,CAAEZ,WAAW,CAAE6D,KAAK,CAACoC,MAAM,CAAC,CAAC,CAE9C,KAAM,CAAAI,QAAQ,CAAI,CAACrG,WAAW,CAAG,CAAC,EAAI6D,KAAK,CAACoC,MAAM,CAAI,GAAG,CACzD,KAAM,CAAAK,eAAe,CAAGzC,KAAK,CAAC7D,WAAW,CAAC,CAE1C,KAAM,CAAAuG,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAIvG,WAAW,CAAG6D,KAAK,CAACoC,MAAM,CAAG,CAAC,CAAE,CAClC;AACA,GAAIjG,WAAW,GAAK,CAAC,CAAE,KAAAwG,sBAAA,CACrB,KAAM,CAAArF,QAAQ,EAAAqF,sBAAA,CAAGtG,WAAW,CAACiB,QAAQ,UAAAqF,sBAAA,iBAApBA,sBAAA,CAAsBpF,IAAI,CAAC,CAAC,CAC7C,GAAI,CAACD,QAAQ,CAAE,CACbF,iBAAiB,CAAC,0BAA0B,CAAC,CAC7C,OACF,CAEA,GAAI,CAACC,iBAAiB,CAACC,QAAQ,CAAC,CAAE,CAChC,OAAQ;AACV,CACF,CAEAlB,cAAc,CAACD,WAAW,CAAG,CAAC,CAAC,CAC/BiB,iBAAiB,CAAC,EAAE,CAAC,CAAE;AACzB,CAAC,IAAM,CACL,GAAI,CACF;AACA,KAAM,CAAA1B,UAAU,CAACkH,MAAM,CAACvG,WAAW,CAAC,CAEpC;AACAwF,YAAY,CAACC,OAAO,CAAC,gBAAgB,CAAE,MAAM,CAAC,CAC9CD,YAAY,CAACC,OAAO,CAAC,qBAAqB,CAAE,GAAI,CAAAe,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAAC,CACrE/C,OAAO,CAAC6B,GAAG,CAAC,mCAAmC,CAAC,CAEhD;AACA3F,QAAQ,CAAC,YAAY,CAAC,CACxB,CAAE,MAAO6D,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,CAAEA,KAAK,CAAC,CAEjD;AACA+B,YAAY,CAACC,OAAO,CAAC,gBAAgB,CAAE,MAAM,CAAC,CAC9CD,YAAY,CAACC,OAAO,CAAC,qBAAqB,CAAE,GAAI,CAAAe,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAAC,CAErE;AACA7G,QAAQ,CAAC,YAAY,CAAC,CACxB,CACF,CACF,CAAC,CAED,KAAM,CAAA8G,UAAU,CAAGA,CAAA,GAAM,CACvB,GAAI5G,WAAW,CAAG,CAAC,CAAE,CACnBC,cAAc,CAACD,WAAW,CAAG,CAAC,CAAC,CACjC,CACF,CAAC,CAED,KAAM,CAAA6G,UAAU,CAAGA,CAAA,GAAM,CACvB,KAAM,CAAAC,MAAM,CAAG,CAAC,IAAM,CACpB,OAAQ9G,WAAW,EACjB,IAAK,EAAC,CAAE,MAAO,KAAI,CAAE;AACrB,IAAK,EAAC,CAAE,MAAO,CAAAE,WAAW,CAACsE,IAAI,CAC/B,IAAK,EAAC,CAAE,MAAO,CAAAtE,WAAW,CAACI,MAAM,CAAG,CAAC,CACrC,IAAK,EAAC,CAAE,MAAO,CAAAJ,WAAW,CAACK,aAAa,CAAG,CAAC,CAC5C,IAAK,EAAC,CAAE,MAAO,CAAAL,WAAW,CAACiB,QAAQ,EAAIjB,WAAW,CAACiB,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC6E,MAAM,CAAG,CAAC,CAC7E,IAAK,EAAC,CAAE,MAAO,CAAA/F,WAAW,CAACM,MAAM,CAAG,CAAC,CACrC,IAAK,EAAC,CAAE,MAAO,CAAAN,WAAW,CAACO,GAAG,CAAG,CAAC,CAClC,IAAK,EAAC,CAAE,MAAO,CAAAP,WAAW,CAACQ,cAAc,CACzC,IAAK,EAAC,CAAE,MAAO,CAAAR,WAAW,CAACS,MAAM,CACjC,IAAK,EAAC,CAAE,MAAO,CAAAT,WAAW,CAACuD,kBAAkB,GAAK0B,SAAS,CAAE;AAC7D,IAAK,GAAE,CAAE,MAAO,KAAI,CAAE;AACtB,QAAS,MAAO,MAAK,CAAE;AACzB,CACF,CAAC,EAAE,CAAC,CAEJvB,OAAO,CAAC6B,GAAG,SAAAvC,MAAA,CAASlD,WAAW,oBAAAkD,MAAA,CAAkB4D,MAAM,CAAE,CAAC,CAC1DlD,OAAO,CAAC6B,GAAG,CAAC,eAAe,CAAEvF,WAAW,CAAC,CACzC,GAAIF,WAAW,GAAK,CAAC,CAAE,CACrB4D,OAAO,CAAC6B,GAAG,CAAC,8BAA8B,CAAEvF,WAAW,CAACuD,kBAAkB,CAAC,CAC7E,CACA,MAAO,CAAAqD,MAAM,CACf,CAAC,CAGD,GAAIhG,OAAO,CAAE,CACT,mBACFpB,IAAA,QAAKwE,SAAS,CAAC,wGAAwG,CAAAC,QAAA,cACrHvE,KAAA,QAAKsE,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BzE,IAAA,QAAKwE,SAAS,CAAC,+EAA+E,CAAM,CAAC,cACrGxE,IAAA,MAAGwE,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,0BAAwB,CAAG,CAAC,EACtD,CAAC,CACH,CAAC,CAER,CAEA,mBACEvE,KAAA,QAAKsE,SAAS,CAAC,4FAA4F,CAAAC,QAAA,eAEzGvE,KAAA,QAAKsE,SAAS,CAAC,4BAA4B,CAAAC,QAAA,eACzCzE,IAAA,QAAKwE,SAAS,CAAC,8DAA8D,CAAM,CAAC,cACpFxE,IAAA,QAAKwE,SAAS,CAAC,4DAA4D,CAAM,CAAC,cAClFxE,IAAA,QAAKwE,SAAS,CAAC,kEAAkE,CAAM,CAAC,cACxFxE,IAAA,QAAKwE,SAAS,CAAC,8DAA8D,CAAM,CAAC,EACjF,CAAC,cAENxE,IAAA,QAAKwE,SAAS,CAAC,4DAA4D,CAAAC,QAAA,cACzEvE,KAAA,QAAKsE,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAE/BvE,KAAA,QAAKsE,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BvE,KAAA,QAAKsE,SAAS,CAAC,iDAAiD,CAAAC,QAAA,eAC9DvE,KAAA,QAAKsE,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvBzE,IAAA,QAAKwE,SAAS,CAAC,6GAA6G,CAAAC,QAAA,cAC1HzE,IAAA,CAACZ,MAAM,EAACoF,SAAS,CAAC,oBAAoB,CAAE,CAAC,CACtC,CAAC,cACNxE,IAAA,QAAKwE,SAAS,CAAC,8FAA8F,CAAAC,QAAA,cAC3GzE,IAAA,CAACL,GAAG,EAAC6E,SAAS,CAAC,yBAAyB,CAAE,CAAC,CACxC,CAAC,EACH,CAAC,cACNxE,IAAA,OAAIwE,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,YAEjD,CAAI,CAAC,EACF,CAAC,cAGNzE,IAAA,QAAKwE,SAAS,CAAC,uDAAuD,CAAAC,QAAA,cACpEzE,IAAA,QACEwE,SAAS,CAAC,oGAAoG,CAC9G6C,KAAK,CAAE,CAAEC,KAAK,IAAA9D,MAAA,CAAKmD,QAAQ,KAAI,CAAE,CAC7B,CAAC,CACJ,CAAC,cAGRzG,KAAA,QAAKsE,SAAS,CAAC,8DAA8D,CAAAC,QAAA,eAC3EvE,KAAA,SAAAuE,QAAA,EAAM,OAAK,CAACnE,WAAW,CAAG,CAAC,CAAC,MAAI,CAAC6D,KAAK,CAACoC,MAAM,EAAO,CAAC,cACrDrG,KAAA,SAAAuE,QAAA,EAAO/B,IAAI,CAACG,KAAK,CAAC8D,QAAQ,CAAC,CAAC,YAAU,EAAM,CAAC,EAC1C,CAAC,cAGNzG,KAAA,QAAKsE,SAAS,CAAC,uBAAuB,CAAAC,QAAA,EAAC,eAClC,CAACvD,aAAa,EAAI,EAAE,IAAAsC,MAAA,CAAMd,IAAI,CAAC6E,KAAK,CAACrG,aAAa,CAAG,EAAE,CAAC,OAAAsC,MAAA,CAAKtC,aAAa,CAAG,EAAE,SAAAsC,MAAA,CAAStC,aAAa,KAAG,CAAC,YAC9G,EAAK,CAAC,EACH,CAAC,cAGJhB,KAAA,QAAKsE,SAAS,CAAC,iEAAiE,CAAAC,QAAA,eAC9EvE,KAAA,QAAKsE,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BvE,KAAA,QAAKsE,SAAS,CAAC,uBAAuB,CAAAC,QAAA,eACpCzE,IAAA,QAAKwE,SAAS,CAAC,uHAAuH,CAAAC,QAAA,cACpIzE,IAAA,CAAC4G,eAAe,CAACtC,IAAI,EAACE,SAAS,CAAC,2BAA2B,CAAE,CAAC,CAC3D,CAAC,cACNxE,IAAA,QAAKwE,SAAS,CAAC,8FAA8F,CAAAC,QAAA,cAC3GzE,IAAA,SAAMwE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAEnE,WAAW,CAAG,CAAC,CAAO,CAAC,CACzE,CAAC,EACH,CAAC,cACNN,IAAA,OAAIwE,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAEmC,eAAe,CAACxC,KAAK,CAAK,CAAC,cAClFpE,IAAA,MAAGwE,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEmC,eAAe,CAACvC,QAAQ,CAAI,CAAC,EACxD,CAAC,cAERrE,IAAA,QAAKwE,SAAS,CAAC,gDAAgD,CAAAC,QAAA,CAC5DmC,eAAe,CAACrC,OAAO,CACrB,CAAC,EACH,CAAC,cAGNrE,KAAA,QAAKsE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChDvE,KAAA,WACE6E,OAAO,CAAEmC,UAAW,CACpBM,QAAQ,CAAElH,WAAW,GAAK,CAAE,CAC5BkE,SAAS,CAAC,uLAAuL,CAAAC,QAAA,eAEjMzE,IAAA,CAACb,SAAS,EAACqF,SAAS,CAAC,SAAS,CAAE,CAAC,cACjCxE,IAAA,SAAAyE,QAAA,CAAM,MAAI,CAAM,CAAC,EACX,CAAC,cAITvE,KAAA,WACE6E,OAAO,CAAE8B,UAAW,CACpBW,QAAQ,CAAE,CAACL,UAAU,CAAC,CAAE,CACxB3C,SAAS,CAAC,6SAA6S,CAAAC,QAAA,eAEvTzE,IAAA,SAAAyE,QAAA,CAAOnE,WAAW,GAAK,EAAE,CAAG,aAAa,CAAG,MAAM,CAAO,CAAC,cAC1DN,IAAA,CAACd,UAAU,EAACsF,SAAS,CAAC,SAAS,CAAE,CAAC,EAC5B,CAAC,EACN,CAAC,EACH,CAAC,CACH,CAAC,EACH,CAAC,CAER,CAAC,CAED,cAAe,CAAArE,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}