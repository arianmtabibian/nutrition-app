{"ast":null,"code":"import _objectSpread from\"C:/Users/arian/OneDrive/Desktop/Nutrition/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{useAuth}from'../contexts/AuthContext';import{Heart,MessageCircle,Share,MoreHorizontal,Bookmark,Image,X,Plus,ChevronLeft,ChevronRight}from'lucide-react';import{formatDistanceToNow,format,startOfMonth,endOfMonth,eachDayOfInterval,isToday,addMonths,subMonths}from'date-fns';import{useNavigate}from'react-router-dom';import{diaryAPI}from'../services/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Feed=()=>{var _user$first_name,_user$username,_user$first_name2,_user$username2,_user$first_name4,_user$username4;const{user}=useAuth();const navigate=useNavigate();const[posts,setPosts]=useState([]);const[loading,setLoading]=useState(true);const[showCreatePost,setShowCreatePost]=useState(false);const[newPost,setNewPost]=useState({content:'',imageFile:null,mealData:null,allowComments:true,hideLikeCount:false});const[expandedComments,setExpandedComments]=useState(new Set());const[comments,setComments]=useState({});const[newComments,setNewComments]=useState({});const[loadingComments,setLoadingComments]=useState(new Set());// Sidebar data states\nconst[profileData,setProfileData]=useState(null);const[todayNutrition,setTodayNutrition]=useState(null);const[currentDate,setCurrentDate]=useState(new Date());const[monthData,setMonthData]=useState(null);const[sidebarLoading,setSidebarLoading]=useState(true);// Follow people search states\nconst[showFollowSearch,setShowFollowSearch]=useState(false);const[searchQuery,setSearchQuery]=useState('');const[searchResults,setSearchResults]=useState([]);const[searchLoading,setSearchLoading]=useState(false);const formatPostDate=dateString=>{const postDate=new Date(dateString);const today=new Date();const isToday=postDate.toDateString()===today.toDateString();if(isToday){return\"Today at \".concat(postDate.toLocaleTimeString('en-US',{hour:'numeric',minute:'2-digit',hour12:true}));}else{return formatDistanceToNow(postDate,{addSuffix:true});}};const loadMonthData=useCallback(async()=>{try{var _response$data$days,_response$data$days$f;const year=currentDate.getFullYear();const month=currentDate.getMonth()+1;console.log('ðŸ“… Feed Calendar: Loading month data for:',{year,month});// Use the EXACT same API call as Diary component\nconst response=await diaryAPI.getMonth(year,month);console.log('ðŸ“… Feed Calendar: Response received:',response.data);console.log('ðŸ“… Feed Calendar: Days with data:',((_response$data$days=response.data.days)===null||_response$data$days===void 0?void 0:(_response$data$days$f=_response$data$days.filter(d=>d.has_data))===null||_response$data$days$f===void 0?void 0:_response$data$days$f.length)||0);setMonthData(response.data);}catch(error){console.error('ðŸ“… Feed Calendar: Error loading month data:',error);setMonthData({days:[]});}},[currentDate]);const loadSidebarData=useCallback(async()=>{if(!user)return;setSidebarLoading(true);try{// Load profile data\nconst profileResponse=await fetch('/api/profile/me',{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('nutritrack_auth_data'))}});if(profileResponse.ok){const profileData=await profileResponse.json();setProfileData(profileData);}// Load today's nutrition\nconst today=new Date().toISOString().split('T')[0];const nutritionResponse=await fetch(\"/api/meals/date/\".concat(today),{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('nutritrack_auth_data'))}});if(nutritionResponse.ok){const nutritionData=await nutritionResponse.json();setTodayNutrition(nutritionData);}// Load month data for calendar\nawait loadMonthData();}catch(error){console.error('Error loading sidebar data:',error);}finally{setSidebarLoading(false);}},[user,loadMonthData]);const loadPosts=async()=>{try{const response=await fetch('/api/social/feed',{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('nutritrack_auth_data'))}});if(response.ok){const data=await response.json();setPosts(data);}}catch(error){console.error('Error loading posts:',error);}finally{setLoading(false);}};const handleLike=async postId=>{try{const response=await fetch(\"/api/social/posts/\".concat(postId,\"/like\"),{method:'POST',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('nutritrack_auth_data'))}});if(response.ok){const data=await response.json();setPosts(posts.map(post=>post.id===postId?_objectSpread(_objectSpread({},post),{},{is_liked:data.is_liked,likes_count:data.likes_count}):post));}}catch(error){console.error('Error liking post:',error);}};const handleBookmark=async postId=>{try{const response=await fetch(\"/api/social/posts/\".concat(postId,\"/bookmark\"),{method:'POST',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('nutritrack_auth_data'))}});if(response.ok){const data=await response.json();setPosts(posts.map(post=>post.id===postId?_objectSpread(_objectSpread({},post),{},{is_bookmarked:data.is_bookmarked}):post));}}catch(error){console.error('Error bookmarking post:',error);}};const toggleComments=async postId=>{if(expandedComments.has(postId)){setExpandedComments(prev=>{const newSet=new Set(prev);newSet.delete(postId);return newSet;});}else{setExpandedComments(prev=>{const newSet=new Set(prev);newSet.add(postId);return newSet;});if(!comments[postId]){setLoadingComments(prev=>{const newSet=new Set(prev);newSet.add(postId);return newSet;});try{const response=await fetch(\"/api/social/posts/\".concat(postId,\"/comments\"),{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('nutritrack_auth_data'))}});if(response.ok){const data=await response.json();setComments(prev=>_objectSpread(_objectSpread({},prev),{},{[postId]:data}));}}catch(error){console.error('Error loading comments:',error);}finally{setLoadingComments(prev=>{const newSet=new Set(prev);newSet.delete(postId);return newSet;});}}}};const handleAddComment=async postId=>{var _newComments$postId;const content=(_newComments$postId=newComments[postId])===null||_newComments$postId===void 0?void 0:_newComments$postId.trim();if(!content)return;try{const response=await fetch(\"/api/social/posts/\".concat(postId,\"/comments\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem('nutritrack_auth_data'))},body:JSON.stringify({content})});if(response.ok){const newComment=await response.json();setComments(prev=>_objectSpread(_objectSpread({},prev),{},{[postId]:[...(prev[postId]||[]),newComment]}));setNewComments(prev=>_objectSpread(_objectSpread({},prev),{},{[postId]:''}));setPosts(posts.map(post=>post.id===postId?_objectSpread(_objectSpread({},post),{},{comments_count:post.comments_count+1}):post));}}catch(error){console.error('Error adding comment:',error);}};const handleCreatePost=async()=>{if(!newPost.content.trim()&&!newPost.imageFile)return;const formData=new FormData();formData.append('content',newPost.content);if(newPost.imageFile){formData.append('image',newPost.imageFile);}if(newPost.mealData){formData.append('meal_data',JSON.stringify(newPost.mealData));}formData.append('allow_comments',newPost.allowComments.toString());formData.append('hide_like_count',newPost.hideLikeCount.toString());try{const response=await fetch('/api/social/posts',{method:'POST',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('nutritrack_auth_data'))},body:formData});if(response.ok){const newPostData=await response.json();setPosts([newPostData,...posts]);setNewPost({content:'',imageFile:null,mealData:null,allowComments:true,hideLikeCount:false});setShowCreatePost(false);}}catch(error){console.error('Error creating post:',error);}};const handleImageUpload=event=>{var _event$target$files;const file=(_event$target$files=event.target.files)===null||_event$target$files===void 0?void 0:_event$target$files[0];if(file){setNewPost(prev=>_objectSpread(_objectSpread({},prev),{},{imageFile:file}));}};const searchUsers=async query=>{if(!query.trim()){setSearchResults([]);return;}setSearchLoading(true);try{const response=await fetch(\"/api/social/users/search?q=\".concat(encodeURIComponent(query)),{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('nutritrack_auth_data'))}});if(response.ok){const data=await response.json();setSearchResults(data);}}catch(error){console.error('Error searching users:',error);}finally{setSearchLoading(false);}};const handleFollow=async userId=>{try{const response=await fetch(\"/api/social/users/\".concat(userId,\"/follow\"),{method:'POST',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('nutritrack_auth_data'))}});if(response.ok){setSearchResults(searchResults.map(user=>user.id===userId?_objectSpread(_objectSpread({},user),{},{is_following:!user.is_following}):user));}}catch(error){console.error('Error following user:',error);}};useEffect(()=>{if(user){loadPosts();loadSidebarData();}},[user,loadSidebarData]);useEffect(()=>{loadMonthData();},[loadMonthData]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"})});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-6 max-w-7xl mx-auto p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-80 flex-shrink-0 sticky top-6 self-start space-y-6 max-h-[calc(100vh-3rem)] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 relative overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-0 right-0 w-16 h-16 bg-blue-50 rounded-full -translate-y-8 translate-x-8\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-0 left-0 w-12 h-12 bg-purple-50 rounded-full translate-y-6 -translate-x-6\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative text-center\",children:[user!==null&&user!==void 0&&user.profile_picture?/*#__PURE__*/_jsxs(\"div\",{className:\"relative inline-block\",children:[/*#__PURE__*/_jsx(\"img\",{src:user.profile_picture,alt:\"Profile\",className:\"w-20 h-20 rounded-full mx-auto mb-4 object-cover ring-3 ring-blue-100 shadow-md\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-3 border-white\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"relative inline-block\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-20 h-20 rounded-full bg-blue-500 flex items-center justify-center text-white text-xl font-semibold mx-auto mb-4 ring-3 ring-blue-100 shadow-md\",children:(user===null||user===void 0?void 0:(_user$first_name=user.first_name)===null||_user$first_name===void 0?void 0:_user$first_name.charAt(0))||(user===null||user===void 0?void 0:(_user$username=user.username)===null||_user$username===void 0?void 0:_user$username.charAt(0))||'U'}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-3 border-white\"})]}),/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-1\",children:[user===null||user===void 0?void 0:user.first_name,\" \",user===null||user===void 0?void 0:user.last_name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-500 mb-4\",children:[\"@\",user===null||user===void 0?void 0:user.username]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-bold text-blue-600\",children:\"12\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"Posts\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-bold text-green-600\",children:\"48\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"Following\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-bold text-purple-600\",children:\"124\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"Followers\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowFollowSearch(true),className:\"w-full bg-blue-600 text-white py-2.5 px-4 rounded-xl hover:bg-blue-700 transition-colors font-medium shadow-md\",children:\"Find People\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 relative overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-0 right-0 w-14 h-14 bg-green-50 rounded-full -translate-y-7 translate-x-7\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4 relative\",children:\"Today's Nutrition\"}),todayNutrition?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4 relative\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Calories\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold text-gray-900\",children:[todayNutrition.totalCalories||0,\" / \",todayNutrition.calorieGoal||2000]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-100 rounded-full h-2.5 shadow-inner\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-500 h-2.5 rounded-full transition-all duration-300\",style:{width:\"\".concat(Math.min(100,(todayNutrition.totalCalories||0)/(todayNutrition.calorieGoal||2000)*100),\"%\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center bg-green-50 rounded-xl p-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-green-600 font-semibold text-base\",children:[todayNutrition.totalProtein||0,\"g\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 text-xs\",children:\"Protein\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center bg-yellow-50 rounded-xl p-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-yellow-600 font-semibold text-base\",children:[todayNutrition.totalCarbs||0,\"g\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 text-xs\",children:\"Carbs\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center bg-red-50 rounded-xl p-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-red-600 font-semibold text-base\",children:[todayNutrition.totalFat||0,\"g\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 text-xs\",children:\"Fat\"})]})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-center py-6 relative\",children:\"No nutrition data for today\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 relative overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-0 left-0 w-16 h-16 bg-purple-50 rounded-full translate-y-8 -translate-x-8\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4 relative\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Calendar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentDate(subMonths(currentDate,1)),className:\"p-2 hover:bg-gray-100 rounded-lg transition-colors\",children:/*#__PURE__*/_jsx(ChevronLeft,{className:\"w-4 h-4 text-gray-500\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentDate(addMonths(currentDate,1)),className:\"p-2 hover:bg-gray-100 rounded-lg transition-colors\",children:/*#__PURE__*/_jsx(ChevronRight,{className:\"w-4 h-4 text-gray-500\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mb-3 relative\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900 bg-gray-50 rounded-lg py-2 px-3\",children:format(currentDate,'MMMM yyyy')})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-7 gap-1 text-xs relative\",children:[['S','M','T','W','T','F','S'].map(day=>/*#__PURE__*/_jsx(\"div\",{className:\"text-center p-2 text-gray-500 font-medium\",children:day},day)),eachDayOfInterval({start:startOfMonth(currentDate),end:endOfMonth(currentDate)}).map(day=>{var _monthData$days;const dayData=monthData===null||monthData===void 0?void 0:(_monthData$days=monthData.days)===null||_monthData$days===void 0?void 0:_monthData$days.find(d=>new Date(d.date).getDate()===day.getDate());const hasData=dayData===null||dayData===void 0?void 0:dayData.has_data;const isCurrentDay=isToday(day);return/*#__PURE__*/_jsx(\"div\",{className:\"\\n                        text-center p-2 rounded-lg text-sm font-medium transition-all duration-200\\n                        \".concat(isCurrentDay?'bg-blue-500 text-white shadow-md':'',\"\\n                        \").concat(hasData&&!isCurrentDay?'bg-green-100 text-green-700':'',\"\\n                        \").concat(!hasData&&!isCurrentDay?'text-gray-400 hover:bg-gray-50':'',\"\\n                      \"),children:day.getDate()},day.toISOString());})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 space-y-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCreatePost(true),className:\"w-full bg-blue-600 text-white py-4 px-6 rounded-xl hover:bg-blue-700 transition-colors shadow-lg group\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center text-white font-semibold\",children:(user===null||user===void 0?void 0:(_user$first_name2=user.first_name)===null||_user$first_name2===void 0?void 0:_user$first_name2.charAt(0))||(user===null||user===void 0?void 0:(_user$username2=user.username)===null||_user$username2===void 0?void 0:_user$username2.charAt(0))||'U'}),/*#__PURE__*/_jsx(\"span\",{className:\"text-base font-medium\",children:\"What's on your plate today?\"}),/*#__PURE__*/_jsx(Plus,{className:\"w-5 h-5 ml-auto group-hover:rotate-90 transition-transform\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:posts.map(post=>{var _post$user$first_name,_post$user$username,_user$first_name3,_user$username3,_newComments$post$id,_comments$post$id;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-shadow duration-300\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-semibold shadow-md\",children:((_post$user$first_name=post.user.first_name)===null||_post$user$first_name===void 0?void 0:_post$user$first_name.charAt(0))||((_post$user$username=post.user.username)===null||_post$user$username===void 0?void 0:_post$user$username.charAt(0))}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-semibold text-gray-900\",children:[post.user.first_name,\" \",post.user.last_name]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:formatPostDate(post.created_at)})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"text-gray-400 hover:text-gray-600 p-2 hover:bg-gray-100 rounded-full transition-colors\",children:/*#__PURE__*/_jsx(MoreHorizontal,{className:\"w-5 h-5\"})})]}),post.content&&/*#__PURE__*/_jsx(\"div\",{className:\"px-6 pb-4\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-900 leading-relaxed\",children:post.content})}),post.image_url&&/*#__PURE__*/_jsx(\"div\",{className:\"relative overflow-hidden\",children:/*#__PURE__*/_jsx(\"img\",{src:post.image_url,alt:\"Post\",className:\"w-full object-cover max-h-80\"})}),post.meal_data&&/*#__PURE__*/_jsxs(\"div\",{className:\"mx-6 my-4 bg-gray-50 rounded-xl p-4 border border-gray-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-semibold text-gray-900 mb-3 flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-blue-500 rounded-full mr-2\"}),\"Meal Information\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-4 gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center bg-white rounded-lg p-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold text-blue-600 text-base\",children:post.meal_data.calories||0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 text-xs\",children:\"Calories\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center bg-white rounded-lg p-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-semibold text-green-600 text-base\",children:[post.meal_data.protein||0,\"g\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 text-xs\",children:\"Protein\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center bg-white rounded-lg p-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-semibold text-yellow-600 text-base\",children:[post.meal_data.carbs||0,\"g\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 text-xs\",children:\"Carbs\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center bg-white rounded-lg p-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-semibold text-red-600 text-base\",children:[post.meal_data.fat||0,\"g\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 text-xs\",children:\"Fat\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-t border-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-6\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleLike(post.id),className:\"flex items-center space-x-2 transition-colors \".concat(post.is_liked?'text-red-500':'text-gray-500 hover:text-red-500'),children:[/*#__PURE__*/_jsx(Heart,{className:\"w-5 h-5 \".concat(post.is_liked?'fill-current':'')}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:post.likes_count})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>toggleComments(post.id),className:\"flex items-center space-x-2 text-gray-500 hover:text-blue-500 transition-colors\",children:[/*#__PURE__*/_jsx(MessageCircle,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:post.comments_count})]}),/*#__PURE__*/_jsx(\"button\",{className:\"text-gray-500 hover:text-green-500 transition-colors\",children:/*#__PURE__*/_jsx(Share,{className:\"w-5 h-5\"})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleBookmark(post.id),className:\"transition-colors \".concat(post.is_bookmarked?'text-blue-500':'text-gray-500 hover:text-blue-500'),children:/*#__PURE__*/_jsx(Bookmark,{className:\"w-5 h-5 \".concat(post.is_bookmarked?'fill-current':'')})})]})}),expandedComments.has(post.id)&&/*#__PURE__*/_jsxs(\"div\",{className:\"px-6 py-4 border-t border-gray-50 bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white text-sm font-semibold\",children:(user===null||user===void 0?void 0:(_user$first_name3=user.first_name)===null||_user$first_name3===void 0?void 0:_user$first_name3.charAt(0))||(user===null||user===void 0?void 0:(_user$username3=user.username)===null||_user$username3===void 0?void 0:_user$username3.charAt(0))||'U'}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Add a comment...\",value:newComments[post.id]||'',onChange:e=>setNewComments(prev=>_objectSpread(_objectSpread({},prev),{},{[post.id]:e.target.value})),className:\"flex-1 px-4 py-2 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white\",onKeyPress:e=>e.key==='Enter'&&handleAddComment(post.id)}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAddComment(post.id),disabled:!((_newComments$post$id=newComments[post.id])!==null&&_newComments$post$id!==void 0&&_newComments$post$id.trim()),className:\"px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium\",children:\"Post\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:(_comments$post$id=comments[post.id])===null||_comments$post$id===void 0?void 0:_comments$post$id.map(comment=>{var _comment$user$first_n,_comment$user$usernam;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white text-sm font-semibold\",children:((_comment$user$first_n=comment.user.first_name)===null||_comment$user$first_n===void 0?void 0:_comment$user$first_n.charAt(0))||((_comment$user$usernam=comment.user.username)===null||_comment$user$usernam===void 0?void 0:_comment$user$usernam.charAt(0))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl p-3 shadow-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-semibold text-sm text-gray-900 mb-1\",children:[comment.user.first_name,\" \",comment.user.last_name]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-700\",children:comment.content})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 mt-2 ml-3\",children:formatDistanceToNow(new Date(comment.created_at),{addSuffix:true})})]})]},comment.id);})})]})]},post.id);})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-80 flex-shrink-0 sticky top-6 self-start space-y-6 max-h-[calc(100vh-3rem)] overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 relative overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-0 right-0 w-14 h-14 bg-indigo-50 rounded-full -translate-y-7 translate-x-7\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6 relative\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Groups\"}),/*#__PURE__*/_jsx(\"button\",{className:\"text-blue-600 hover:text-blue-700 text-sm font-medium bg-blue-50 hover:bg-blue-100 px-3 py-1 rounded-full transition-colors\",children:\"See All\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 relative\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-50 cursor-pointer transition-colors group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-green-500 flex items-center justify-center shadow-sm\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-semibold text-sm\",children:\"VG\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900 group-hover:text-green-600 transition-colors\",children:\"Vegan Recipes\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"1.2k members\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-50 cursor-pointer transition-colors group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-blue-500 flex items-center justify-center shadow-sm\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-semibold text-sm\",children:\"FT\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900 group-hover:text-blue-600 transition-colors\",children:\"Fitness Goals\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"856 members\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-50 cursor-pointer transition-colors group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-purple-500 flex items-center justify-center shadow-sm\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-semibold text-sm\",children:\"WL\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900 group-hover:text-purple-600 transition-colors\",children:\"Weight Loss\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"2.1k members\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-50 cursor-pointer transition-colors group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-orange-500 flex items-center justify-center shadow-sm\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-semibold text-sm\",children:\"KT\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900 group-hover:text-orange-600 transition-colors\",children:\"Keto Diet\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"643 members\"})]})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"w-full mt-6 bg-indigo-600 text-white py-2.5 px-4 rounded-xl hover:bg-indigo-700 transition-colors font-medium shadow-md\",children:\"Create Group\"})]})})]})}),showCreatePost&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-6 border-b border-gray-100\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900\",children:\"Create Post\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCreatePost(false),className:\"text-gray-400 hover:text-gray-600 p-2 hover:bg-gray-100 rounded-full transition-colors\",children:/*#__PURE__*/_jsx(X,{className:\"w-5 h-5\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-semibold\",children:(user===null||user===void 0?void 0:(_user$first_name4=user.first_name)===null||_user$first_name4===void 0?void 0:_user$first_name4.charAt(0))||(user===null||user===void 0?void 0:(_user$username4=user.username)===null||_user$username4===void 0?void 0:_user$username4.charAt(0))||'U'}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"What's on your mind?\",value:newPost.content,onChange:e=>setNewPost(prev=>_objectSpread(_objectSpread({},prev),{},{content:e.target.value})),className:\"w-full p-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\",rows:4})})]}),newPost.imageFile&&/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:URL.createObjectURL(newPost.imageFile),alt:\"Preview\",className:\"w-full h-64 object-cover rounded-xl\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setNewPost(prev=>_objectSpread(_objectSpread({},prev),{},{imageFile:null})),className:\"absolute top-2 right-2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-colors\",children:/*#__PURE__*/_jsx(X,{className:\"w-4 h-4\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between pt-4 border-t border-gray-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-4\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center space-x-2 text-gray-600 hover:text-blue-600 cursor-pointer transition-colors\",children:[/*#__PURE__*/_jsx(Image,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:\"Photo\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleImageUpload,className:\"hidden\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCreatePost(false),className:\"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors font-medium\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCreatePost,disabled:!newPost.content.trim()&&!newPost.imageFile,className:\"px-6 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium\",children:\"Post\"})]})]})]})]})}),showFollowSearch&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-6 border-b border-gray-100\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900\",children:\"Find People\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowFollowSearch(false),className:\"text-gray-400 hover:text-gray-600 p-2 hover:bg-gray-100 rounded-full transition-colors\",children:/*#__PURE__*/_jsx(X,{className:\"w-5 h-5\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search for people...\",value:searchQuery,onChange:e=>{setSearchQuery(e.target.value);searchUsers(e.target.value);},className:\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"})}),searchLoading?/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center py-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:searchResults.map(user=>{var _user$first_name5,_user$username5;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-4 hover:bg-gray-50 rounded-xl transition-colors\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-semibold\",children:((_user$first_name5=user.first_name)===null||_user$first_name5===void 0?void 0:_user$first_name5.charAt(0))||((_user$username5=user.username)===null||_user$username5===void 0?void 0:_user$username5.charAt(0))}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-medium text-gray-900\",children:[user.first_name,\" \",user.last_name]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[\"@\",user.username]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleFollow(user.id),className:\"px-4 py-2 rounded-xl font-medium transition-colors \".concat(user.is_following?'bg-gray-200 text-gray-700 hover:bg-gray-300':'bg-blue-600 text-white hover:bg-blue-700'),children:user.is_following?'Following':'Follow'})]},user.id);})})]})]})})]});};export default Feed;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useAuth","Heart","MessageCircle","Share","MoreHorizontal","Bookmark","Image","X","Plus","ChevronLeft","ChevronRight","formatDistanceToNow","format","startOfMonth","endOfMonth","eachDayOfInterval","isToday","addMonths","subMonths","useNavigate","diaryAPI","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Feed","_user$first_name","_user$username","_user$first_name2","_user$username2","_user$first_name4","_user$username4","user","navigate","posts","setPosts","loading","setLoading","showCreatePost","setShowCreatePost","newPost","setNewPost","content","imageFile","mealData","allowComments","hideLikeCount","expandedComments","setExpandedComments","Set","comments","setComments","newComments","setNewComments","loadingComments","setLoadingComments","profileData","setProfileData","todayNutrition","setTodayNutrition","currentDate","setCurrentDate","Date","monthData","setMonthData","sidebarLoading","setSidebarLoading","showFollowSearch","setShowFollowSearch","searchQuery","setSearchQuery","searchResults","setSearchResults","searchLoading","setSearchLoading","formatPostDate","dateString","postDate","today","toDateString","concat","toLocaleTimeString","hour","minute","hour12","addSuffix","loadMonthData","_response$data$days","_response$data$days$f","year","getFullYear","month","getMonth","console","log","response","data","days","filter","d","has_data","length","error","loadSidebarData","profileResponse","fetch","headers","localStorage","getItem","ok","json","toISOString","split","nutritionResponse","nutritionData","loadPosts","handleLike","postId","method","map","post","id","_objectSpread","is_liked","likes_count","handleBookmark","is_bookmarked","toggleComments","has","prev","newSet","delete","add","handleAddComment","_newComments$postId","trim","body","JSON","stringify","newComment","comments_count","handleCreatePost","formData","FormData","append","toString","newPostData","handleImageUpload","event","_event$target$files","file","target","files","searchUsers","query","encodeURIComponent","handleFollow","userId","is_following","className","children","profile_picture","src","alt","first_name","charAt","username","last_name","onClick","totalCalories","calorieGoal","style","width","Math","min","totalProtein","totalCarbs","totalFat","day","start","end","_monthData$days","dayData","find","date","getDate","hasData","isCurrentDay","_post$user$first_name","_post$user$username","_user$first_name3","_user$username3","_newComments$post$id","_comments$post$id","created_at","image_url","meal_data","calories","protein","carbs","fat","type","placeholder","value","onChange","e","onKeyPress","key","disabled","comment","_comment$user$first_n","_comment$user$usernam","rows","URL","createObjectURL","accept","_user$first_name5","_user$username5"],"sources":["C:/Users/arian/OneDrive/Desktop/Nutrition/client/src/components/Feed.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { Heart, MessageCircle, Share, MoreHorizontal, PenTool, Bookmark, Image, X, Plus, UserCircle, Calendar, TrendingUp, TrendingDown, BarChart3, ChevronLeft, ChevronRight } from 'lucide-react';\r\nimport { formatDistanceToNow, format, startOfMonth, endOfMonth, eachDayOfInterval, isSameMonth, isToday, addMonths, subMonths } from 'date-fns';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { diaryAPI } from '../services/api';\r\n\r\ninterface Post {\r\n  id: number;\r\n  content: string;\r\n  image_url: string | null;\r\n  meal_data: any;\r\n  likes_count: number;\r\n  comments_count: number;\r\n  is_liked: boolean;\r\n  is_bookmarked: boolean;\r\n  allow_comments?: boolean;\r\n  hide_like_count?: boolean;\r\n  created_at: string;\r\n  user: {\r\n    id: number;\r\n    username: string;\r\n    first_name: string;\r\n    last_name: string;\r\n    profile_picture?: string;\r\n  };\r\n}\r\n\r\ninterface Comment {\r\n  id: number;\r\n  content: string;\r\n  created_at: string;\r\n  user: {\r\n    id: number;\r\n    username: string;\r\n    first_name: string;\r\n    last_name: string;\r\n    profile_picture?: string;\r\n  };\r\n}\r\n\r\nconst Feed: React.FC = () => {\r\n  const { user } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [posts, setPosts] = useState<Post[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showCreatePost, setShowCreatePost] = useState(false);\r\n  const [newPost, setNewPost] = useState({ \r\n    content: '', \r\n    imageFile: null as File | null, \r\n    mealData: null,\r\n    allowComments: true,\r\n    hideLikeCount: false\r\n  });\r\n  const [expandedComments, setExpandedComments] = useState<Set<number>>(new Set());\r\n  const [comments, setComments] = useState<{ [postId: number]: Comment[] }>({});\r\n  const [newComments, setNewComments] = useState<{ [postId: number]: string }>({});\r\n  const [loadingComments, setLoadingComments] = useState<Set<number>>(new Set());\r\n  \r\n  // Sidebar data states\r\n  const [profileData, setProfileData] = useState<any>(null);\r\n  const [todayNutrition, setTodayNutrition] = useState<any>(null);\r\n  const [currentDate, setCurrentDate] = useState(new Date());\r\n  const [monthData, setMonthData] = useState<any>(null);\r\n  const [sidebarLoading, setSidebarLoading] = useState(true);\r\n  \r\n  // Follow people search states\r\n  const [showFollowSearch, setShowFollowSearch] = useState(false);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [searchResults, setSearchResults] = useState<any[]>([]);\r\n  const [searchLoading, setSearchLoading] = useState(false);\r\n\r\n  const formatPostDate = (dateString: string) => {\r\n    const postDate = new Date(dateString);\r\n    const today = new Date();\r\n    const isToday = postDate.toDateString() === today.toDateString();\r\n    \r\n    if (isToday) {\r\n      return `Today at ${postDate.toLocaleTimeString('en-US', { \r\n        hour: 'numeric', \r\n        minute: '2-digit', \r\n        hour12: true \r\n      })}`;\r\n    } else {\r\n      return formatDistanceToNow(postDate, { addSuffix: true });\r\n    }\r\n  };\r\n\r\n  const loadMonthData = useCallback(async () => {\r\n    try {\r\n      const year = currentDate.getFullYear();\r\n      const month = currentDate.getMonth() + 1;\r\n      \r\n      console.log('ðŸ“… Feed Calendar: Loading month data for:', { year, month });\r\n      \r\n      // Use the EXACT same API call as Diary component\r\n      const response = await diaryAPI.getMonth(year, month);\r\n      \r\n      console.log('ðŸ“… Feed Calendar: Response received:', response.data);\r\n      console.log('ðŸ“… Feed Calendar: Days with data:', response.data.days?.filter((d: any) => d.has_data)?.length || 0);\r\n      \r\n      setMonthData(response.data);\r\n    } catch (error) {\r\n      console.error('ðŸ“… Feed Calendar: Error loading month data:', error);\r\n      setMonthData({ days: [] });\r\n    }\r\n  }, [currentDate]);\r\n\r\n  const loadSidebarData = useCallback(async () => {\r\n    if (!user) return;\r\n    \r\n    setSidebarLoading(true);\r\n    try {\r\n      // Load profile data\r\n      const profileResponse = await fetch('/api/profile/me', {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('nutritrack_auth_data')}`\r\n        }\r\n      });\r\n      \r\n      if (profileResponse.ok) {\r\n        const profileData = await profileResponse.json();\r\n        setProfileData(profileData);\r\n      }\r\n\r\n      // Load today's nutrition\r\n      const today = new Date().toISOString().split('T')[0];\r\n      const nutritionResponse = await fetch(`/api/meals/date/${today}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('nutritrack_auth_data')}`\r\n        }\r\n      });\r\n      \r\n      if (nutritionResponse.ok) {\r\n        const nutritionData = await nutritionResponse.json();\r\n        setTodayNutrition(nutritionData);\r\n      }\r\n\r\n      // Load month data for calendar\r\n      await loadMonthData();\r\n      \r\n    } catch (error) {\r\n      console.error('Error loading sidebar data:', error);\r\n    } finally {\r\n      setSidebarLoading(false);\r\n    }\r\n  }, [user, loadMonthData]);\r\n\r\n  const loadPosts = async () => {\r\n    try {\r\n      const response = await fetch('/api/social/feed', {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('nutritrack_auth_data')}`\r\n        }\r\n      });\r\n      \r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setPosts(data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading posts:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleLike = async (postId: number) => {\r\n    try {\r\n      const response = await fetch(`/api/social/posts/${postId}/like`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('nutritrack_auth_data')}`\r\n        }\r\n      });\r\n      \r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setPosts(posts.map(post => \r\n          post.id === postId \r\n            ? { ...post, is_liked: data.is_liked, likes_count: data.likes_count }\r\n            : post\r\n        ));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error liking post:', error);\r\n    }\r\n  };\r\n\r\n  const handleBookmark = async (postId: number) => {\r\n    try {\r\n      const response = await fetch(`/api/social/posts/${postId}/bookmark`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('nutritrack_auth_data')}`\r\n        }\r\n      });\r\n      \r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setPosts(posts.map(post => \r\n          post.id === postId \r\n            ? { ...post, is_bookmarked: data.is_bookmarked }\r\n            : post\r\n        ));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error bookmarking post:', error);\r\n    }\r\n  };\r\n\r\n  const toggleComments = async (postId: number) => {\r\n    if (expandedComments.has(postId)) {\r\n      setExpandedComments(prev => {\r\n        const newSet = new Set(prev);\r\n        newSet.delete(postId);\r\n        return newSet;\r\n      });\r\n    } else {\r\n      setExpandedComments(prev => {\r\n        const newSet = new Set(prev);\r\n        newSet.add(postId);\r\n        return newSet;\r\n      });\r\n      \r\n      if (!comments[postId]) {\r\n        setLoadingComments(prev => {\r\n          const newSet = new Set(prev);\r\n          newSet.add(postId);\r\n          return newSet;\r\n        });\r\n        \r\n        try {\r\n          const response = await fetch(`/api/social/posts/${postId}/comments`, {\r\n            headers: {\r\n              'Authorization': `Bearer ${localStorage.getItem('nutritrack_auth_data')}`\r\n            }\r\n          });\r\n          \r\n          if (response.ok) {\r\n            const data = await response.json();\r\n            setComments(prev => ({ ...prev, [postId]: data }));\r\n          }\r\n        } catch (error) {\r\n          console.error('Error loading comments:', error);\r\n        } finally {\r\n          setLoadingComments(prev => {\r\n            const newSet = new Set(prev);\r\n            newSet.delete(postId);\r\n            return newSet;\r\n          });\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleAddComment = async (postId: number) => {\r\n    const content = newComments[postId]?.trim();\r\n    if (!content) return;\r\n\r\n    try {\r\n      const response = await fetch(`/api/social/posts/${postId}/comments`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.getItem('nutritrack_auth_data')}`\r\n        },\r\n        body: JSON.stringify({ content })\r\n      });\r\n\r\n      if (response.ok) {\r\n        const newComment = await response.json();\r\n        setComments(prev => ({\r\n          ...prev,\r\n          [postId]: [...(prev[postId] || []), newComment]\r\n        }));\r\n        setNewComments(prev => ({ ...prev, [postId]: '' }));\r\n        \r\n        setPosts(posts.map(post => \r\n          post.id === postId \r\n            ? { ...post, comments_count: post.comments_count + 1 }\r\n            : post\r\n        ));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error adding comment:', error);\r\n    }\r\n  };\r\n\r\n  const handleCreatePost = async () => {\r\n    if (!newPost.content.trim() && !newPost.imageFile) return;\r\n\r\n    const formData = new FormData();\r\n    formData.append('content', newPost.content);\r\n    if (newPost.imageFile) {\r\n      formData.append('image', newPost.imageFile);\r\n    }\r\n    if (newPost.mealData) {\r\n      formData.append('meal_data', JSON.stringify(newPost.mealData));\r\n    }\r\n    formData.append('allow_comments', newPost.allowComments.toString());\r\n    formData.append('hide_like_count', newPost.hideLikeCount.toString());\r\n\r\n    try {\r\n      const response = await fetch('/api/social/posts', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('nutritrack_auth_data')}`\r\n        },\r\n        body: formData\r\n      });\r\n\r\n      if (response.ok) {\r\n        const newPostData = await response.json();\r\n        setPosts([newPostData, ...posts]);\r\n        setNewPost({\r\n          content: '',\r\n          imageFile: null,\r\n          mealData: null,\r\n          allowComments: true,\r\n          hideLikeCount: false\r\n        });\r\n        setShowCreatePost(false);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error creating post:', error);\r\n    }\r\n  };\r\n\r\n  const handleImageUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (file) {\r\n      setNewPost(prev => ({ ...prev, imageFile: file }));\r\n    }\r\n  };\r\n\r\n  const searchUsers = async (query: string) => {\r\n    if (!query.trim()) {\r\n      setSearchResults([]);\r\n      return;\r\n    }\r\n\r\n    setSearchLoading(true);\r\n    try {\r\n      const response = await fetch(`/api/social/users/search?q=${encodeURIComponent(query)}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('nutritrack_auth_data')}`\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setSearchResults(data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error searching users:', error);\r\n    } finally {\r\n      setSearchLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleFollow = async (userId: number) => {\r\n    try {\r\n      const response = await fetch(`/api/social/users/${userId}/follow`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('nutritrack_auth_data')}`\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        setSearchResults(searchResults.map(user =>\r\n          user.id === userId\r\n            ? { ...user, is_following: !user.is_following }\r\n            : user\r\n        ));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error following user:', error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      loadPosts();\r\n      loadSidebarData();\r\n    }\r\n  }, [user, loadSidebarData]);\r\n\r\n  useEffect(() => {\r\n    loadMonthData();\r\n  }, [loadMonthData]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-64\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"min-h-screen bg-white\">\r\n        \r\n        {/* Three Column Layout */}\r\n        <div className=\"flex gap-6 max-w-7xl mx-auto p-6\">\r\n          \r\n          {/* Left Sidebar - Profile & Calendar */}\r\n          <div className=\"w-80 flex-shrink-0 sticky top-6 self-start space-y-6 max-h-[calc(100vh-3rem)] overflow-y-auto\">\r\n            \r\n            {/* Profile Card */}\r\n            <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 relative overflow-hidden\">\r\n              {/* Subtle decorative elements */}\r\n              <div className=\"absolute top-0 right-0 w-16 h-16 bg-blue-50 rounded-full -translate-y-8 translate-x-8\"></div>\r\n              <div className=\"absolute bottom-0 left-0 w-12 h-12 bg-purple-50 rounded-full translate-y-6 -translate-x-6\"></div>\r\n              \r\n              <div className=\"relative text-center\">\r\n                {user?.profile_picture ? (\r\n                  <div className=\"relative inline-block\">\r\n                    <img \r\n                      src={user.profile_picture} \r\n                      alt=\"Profile\" \r\n                      className=\"w-20 h-20 rounded-full mx-auto mb-4 object-cover ring-3 ring-blue-100 shadow-md\"\r\n                    />\r\n                    <div className=\"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-3 border-white\"></div>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"relative inline-block\">\r\n                    <div className=\"w-20 h-20 rounded-full bg-blue-500 flex items-center justify-center text-white text-xl font-semibold mx-auto mb-4 ring-3 ring-blue-100 shadow-md\">\r\n                      {user?.first_name?.charAt(0) || user?.username?.charAt(0) || 'U'}\r\n                    </div>\r\n                    <div className=\"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-3 border-white\"></div>\r\n                  </div>\r\n                )}\r\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-1\">\r\n                  {user?.first_name} {user?.last_name}\r\n                </h3>\r\n                <p className=\"text-gray-500 mb-4\">@{user?.username}</p>\r\n                \r\n                {/* Stats */}\r\n                <div className=\"grid grid-cols-3 gap-4 mb-6\">\r\n                  <div className=\"text-center\">\r\n                    <div className=\"text-xl font-bold text-blue-600\">12</div>\r\n                    <div className=\"text-xs text-gray-500\">Posts</div>\r\n                  </div>\r\n                  <div className=\"text-center\">\r\n                    <div className=\"text-xl font-bold text-green-600\">48</div>\r\n                    <div className=\"text-xs text-gray-500\">Following</div>\r\n                  </div>\r\n                  <div className=\"text-center\">\r\n                    <div className=\"text-xl font-bold text-purple-600\">124</div>\r\n                    <div className=\"text-xs text-gray-500\">Followers</div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <button \r\n                  onClick={() => setShowFollowSearch(true)}\r\n                  className=\"w-full bg-blue-600 text-white py-2.5 px-4 rounded-xl hover:bg-blue-700 transition-colors font-medium shadow-md\"\r\n                >\r\n                  Find People\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Today's Nutrition Card */}\r\n            <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 relative overflow-hidden\">\r\n              <div className=\"absolute top-0 right-0 w-14 h-14 bg-green-50 rounded-full -translate-y-7 translate-x-7\"></div>\r\n              \r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4 relative\">Today's Nutrition</h3>\r\n              {todayNutrition ? (\r\n                <div className=\"space-y-4 relative\">\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <span className=\"text-gray-600\">Calories</span>\r\n                    <span className=\"font-semibold text-gray-900\">\r\n                      {todayNutrition.totalCalories || 0} / {todayNutrition.calorieGoal || 2000}\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"w-full bg-gray-100 rounded-full h-2.5 shadow-inner\">\r\n                    <div \r\n                      className=\"bg-blue-500 h-2.5 rounded-full transition-all duration-300\" \r\n                      style={{ \r\n                        width: `${Math.min(100, ((todayNutrition.totalCalories || 0) / (todayNutrition.calorieGoal || 2000)) * 100)}%` \r\n                      }}\r\n                    ></div>\r\n                  </div>\r\n                  \r\n                  {/* Macros */}\r\n                  <div className=\"grid grid-cols-3 gap-3\">\r\n                    <div className=\"text-center bg-green-50 rounded-xl p-3\">\r\n                      <div className=\"text-green-600 font-semibold text-base\">{todayNutrition.totalProtein || 0}g</div>\r\n                      <div className=\"text-gray-500 text-xs\">Protein</div>\r\n                    </div>\r\n                    <div className=\"text-center bg-yellow-50 rounded-xl p-3\">\r\n                      <div className=\"text-yellow-600 font-semibold text-base\">{todayNutrition.totalCarbs || 0}g</div>\r\n                      <div className=\"text-gray-500 text-xs\">Carbs</div>\r\n                    </div>\r\n                    <div className=\"text-center bg-red-50 rounded-xl p-3\">\r\n                      <div className=\"text-red-600 font-semibold text-base\">{todayNutrition.totalFat || 0}g</div>\r\n                      <div className=\"text-gray-500 text-xs\">Fat</div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-gray-400 text-center py-6 relative\">No nutrition data for today</div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Calendar Streak Card */}\r\n            <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 relative overflow-hidden\">\r\n              <div className=\"absolute bottom-0 left-0 w-16 h-16 bg-purple-50 rounded-full translate-y-8 -translate-x-8\"></div>\r\n              \r\n              <div className=\"flex items-center justify-between mb-4 relative\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900\">Calendar</h3>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <button \r\n                    onClick={() => setCurrentDate(subMonths(currentDate, 1))}\r\n                    className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\r\n                  >\r\n                    <ChevronLeft className=\"w-4 h-4 text-gray-500\" />\r\n                  </button>\r\n                  <button \r\n                    onClick={() => setCurrentDate(addMonths(currentDate, 1))}\r\n                    className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\r\n                  >\r\n                    <ChevronRight className=\"w-4 h-4 text-gray-500\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"text-center mb-3 relative\">\r\n                <div className=\"text-sm font-medium text-gray-900 bg-gray-50 rounded-lg py-2 px-3\">\r\n                  {format(currentDate, 'MMMM yyyy')}\r\n                </div>\r\n              </div>\r\n              \r\n              {/* Calendar Grid */}\r\n              <div className=\"grid grid-cols-7 gap-1 text-xs relative\">\r\n                {['S', 'M', 'T', 'W', 'T', 'F', 'S'].map(day => (\r\n                  <div key={day} className=\"text-center p-2 text-gray-500 font-medium\">\r\n                    {day}\r\n                  </div>\r\n                ))}\r\n                {eachDayOfInterval({\r\n                  start: startOfMonth(currentDate),\r\n                  end: endOfMonth(currentDate)\r\n                }).map(day => {\r\n                  const dayData = monthData?.days?.find((d: any) => \r\n                    new Date(d.date).getDate() === day.getDate()\r\n                  );\r\n                  const hasData = dayData?.has_data;\r\n                  const isCurrentDay = isToday(day);\r\n                  \r\n                  return (\r\n                    <div\r\n                      key={day.toISOString()}\r\n                      className={`\r\n                        text-center p-2 rounded-lg text-sm font-medium transition-all duration-200\r\n                        ${isCurrentDay ? 'bg-blue-500 text-white shadow-md' : ''}\r\n                        ${hasData && !isCurrentDay ? 'bg-green-100 text-green-700' : ''}\r\n                        ${!hasData && !isCurrentDay ? 'text-gray-400 hover:bg-gray-50' : ''}\r\n                      `}\r\n                    >\r\n                      {day.getDate()}\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Main Feed Content */}\r\n          <div className=\"flex-1 space-y-6\">\r\n            {/* Create Post Button */}\r\n            <button\r\n              onClick={() => setShowCreatePost(true)}\r\n              className=\"w-full bg-blue-600 text-white py-4 px-6 rounded-xl hover:bg-blue-700 transition-colors shadow-lg group\"\r\n            >\r\n              <div className=\"flex items-center space-x-4\">\r\n                <div className=\"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center text-white font-semibold\">\r\n                  {user?.first_name?.charAt(0) || user?.username?.charAt(0) || 'U'}\r\n                </div>\r\n                <span className=\"text-base font-medium\">What's on your plate today?</span>\r\n                <Plus className=\"w-5 h-5 ml-auto group-hover:rotate-90 transition-transform\" />\r\n              </div>\r\n            </button>\r\n\r\n            {/* Posts */}\r\n            <div className=\"space-y-6\">\r\n              {posts.map(post => (\r\n                <div key={post.id} className=\"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-shadow duration-300\">\r\n                  {/* Post Header */}\r\n                  <div className=\"flex items-center justify-between p-6\">\r\n                    <div className=\"flex items-center space-x-3\">\r\n                      <div className=\"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-semibold shadow-md\">\r\n                        {post.user.first_name?.charAt(0) || post.user.username?.charAt(0)}\r\n                      </div>\r\n                      <div>\r\n                        <div className=\"font-semibold text-gray-900\">{post.user.first_name} {post.user.last_name}</div>\r\n                        <div className=\"text-sm text-gray-500\">{formatPostDate(post.created_at)}</div>\r\n                      </div>\r\n                    </div>\r\n                    <button className=\"text-gray-400 hover:text-gray-600 p-2 hover:bg-gray-100 rounded-full transition-colors\">\r\n                      <MoreHorizontal className=\"w-5 h-5\" />\r\n                    </button>\r\n                  </div>\r\n\r\n                  {/* Post Content */}\r\n                  {post.content && (\r\n                    <div className=\"px-6 pb-4\">\r\n                      <p className=\"text-gray-900 leading-relaxed\">{post.content}</p>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Post Image */}\r\n                  {post.image_url && (\r\n                    <div className=\"relative overflow-hidden\">\r\n                      <img \r\n                        src={post.image_url} \r\n                        alt=\"Post\" \r\n                        className=\"w-full object-cover max-h-80\"\r\n                      />\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Meal Data */}\r\n                  {post.meal_data && (\r\n                    <div className=\"mx-6 my-4 bg-gray-50 rounded-xl p-4 border border-gray-100\">\r\n                      <div className=\"text-sm font-semibold text-gray-900 mb-3 flex items-center\">\r\n                        <div className=\"w-2 h-2 bg-blue-500 rounded-full mr-2\"></div>\r\n                        Meal Information\r\n                      </div>\r\n                      <div className=\"grid grid-cols-4 gap-3\">\r\n                        <div className=\"text-center bg-white rounded-lg p-3\">\r\n                          <div className=\"font-semibold text-blue-600 text-base\">{post.meal_data.calories || 0}</div>\r\n                          <div className=\"text-gray-500 text-xs\">Calories</div>\r\n                        </div>\r\n                        <div className=\"text-center bg-white rounded-lg p-3\">\r\n                          <div className=\"font-semibold text-green-600 text-base\">{post.meal_data.protein || 0}g</div>\r\n                          <div className=\"text-gray-500 text-xs\">Protein</div>\r\n                        </div>\r\n                        <div className=\"text-center bg-white rounded-lg p-3\">\r\n                          <div className=\"font-semibold text-yellow-600 text-base\">{post.meal_data.carbs || 0}g</div>\r\n                          <div className=\"text-gray-500 text-xs\">Carbs</div>\r\n                        </div>\r\n                        <div className=\"text-center bg-white rounded-lg p-3\">\r\n                          <div className=\"font-semibold text-red-600 text-base\">{post.meal_data.fat || 0}g</div>\r\n                          <div className=\"text-gray-500 text-xs\">Fat</div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Post Actions */}\r\n                  <div className=\"px-6 py-4 border-t border-gray-50\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div className=\"flex items-center space-x-6\">\r\n                        <button\r\n                          onClick={() => handleLike(post.id)}\r\n                          className={`flex items-center space-x-2 transition-colors ${\r\n                            post.is_liked \r\n                              ? 'text-red-500' \r\n                              : 'text-gray-500 hover:text-red-500'\r\n                          }`}\r\n                        >\r\n                          <Heart className={`w-5 h-5 ${post.is_liked ? 'fill-current' : ''}`} />\r\n                          <span className=\"text-sm font-medium\">{post.likes_count}</span>\r\n                        </button>\r\n                        <button\r\n                          onClick={() => toggleComments(post.id)}\r\n                          className=\"flex items-center space-x-2 text-gray-500 hover:text-blue-500 transition-colors\"\r\n                        >\r\n                          <MessageCircle className=\"w-5 h-5\" />\r\n                          <span className=\"text-sm font-medium\">{post.comments_count}</span>\r\n                        </button>\r\n                        <button className=\"text-gray-500 hover:text-green-500 transition-colors\">\r\n                          <Share className=\"w-5 h-5\" />\r\n                        </button>\r\n                      </div>\r\n                      <button\r\n                        onClick={() => handleBookmark(post.id)}\r\n                        className={`transition-colors ${\r\n                          post.is_bookmarked \r\n                            ? 'text-blue-500' \r\n                            : 'text-gray-500 hover:text-blue-500'\r\n                        }`}\r\n                      >\r\n                        <Bookmark className={`w-5 h-5 ${post.is_bookmarked ? 'fill-current' : ''}`} />\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Comments Section */}\r\n                  {expandedComments.has(post.id) && (\r\n                    <div className=\"px-6 py-4 border-t border-gray-50 bg-gray-50\">\r\n                      {/* Add Comment */}\r\n                      <div className=\"flex items-center space-x-3 mb-4\">\r\n                        <div className=\"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white text-sm font-semibold\">\r\n                          {user?.first_name?.charAt(0) || user?.username?.charAt(0) || 'U'}\r\n                        </div>\r\n                        <div className=\"flex-1 flex items-center space-x-3\">\r\n                          <input\r\n                            type=\"text\"\r\n                            placeholder=\"Add a comment...\"\r\n                            value={newComments[post.id] || ''}\r\n                            onChange={(e) => setNewComments(prev => ({...prev, [post.id]: e.target.value}))}\r\n                            className=\"flex-1 px-4 py-2 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white\"\r\n                            onKeyPress={(e) => e.key === 'Enter' && handleAddComment(post.id)}\r\n                          />\r\n                          <button\r\n                            onClick={() => handleAddComment(post.id)}\r\n                            disabled={!newComments[post.id]?.trim()}\r\n                            className=\"px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium\"\r\n                          >\r\n                            Post\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Comments List */}\r\n                      <div className=\"space-y-3\">\r\n                        {comments[post.id]?.map(comment => (\r\n                          <div key={comment.id} className=\"flex items-start space-x-3\">\r\n                            <div className=\"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white text-sm font-semibold\">\r\n                              {comment.user.first_name?.charAt(0) || comment.user.username?.charAt(0)}\r\n                            </div>\r\n                            <div className=\"flex-1\">\r\n                              <div className=\"bg-white rounded-xl p-3 shadow-sm\">\r\n                                <div className=\"font-semibold text-sm text-gray-900 mb-1\">{comment.user.first_name} {comment.user.last_name}</div>\r\n                                <div className=\"text-gray-700\">{comment.content}</div>\r\n                              </div>\r\n                              <div className=\"text-xs text-gray-500 mt-2 ml-3\">{formatDistanceToNow(new Date(comment.created_at), { addSuffix: true })}</div>\r\n                            </div>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Right Sidebar - Groups */}\r\n          <div className=\"w-80 flex-shrink-0 sticky top-6 self-start space-y-6 max-h-[calc(100vh-3rem)] overflow-y-auto\">\r\n            \r\n            {/* Groups Card */}\r\n            <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 relative overflow-hidden\">\r\n              <div className=\"absolute top-0 right-0 w-14 h-14 bg-indigo-50 rounded-full -translate-y-7 translate-x-7\"></div>\r\n              \r\n              <div className=\"flex items-center justify-between mb-6 relative\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900\">Groups</h3>\r\n                <button className=\"text-blue-600 hover:text-blue-700 text-sm font-medium bg-blue-50 hover:bg-blue-100 px-3 py-1 rounded-full transition-colors\">\r\n                  See All\r\n                </button>\r\n              </div>\r\n              \r\n              <div className=\"space-y-3 relative\">\r\n                {/* Mock Group Items */}\r\n                <div className=\"flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-50 cursor-pointer transition-colors group\">\r\n                  <div className=\"w-10 h-10 rounded-xl bg-green-500 flex items-center justify-center shadow-sm\">\r\n                    <span className=\"text-white font-semibold text-sm\">VG</span>\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"font-medium text-gray-900 group-hover:text-green-600 transition-colors\">Vegan Recipes</div>\r\n                    <div className=\"text-sm text-gray-500\">1.2k members</div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-50 cursor-pointer transition-colors group\">\r\n                  <div className=\"w-10 h-10 rounded-xl bg-blue-500 flex items-center justify-center shadow-sm\">\r\n                    <span className=\"text-white font-semibold text-sm\">FT</span>\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"font-medium text-gray-900 group-hover:text-blue-600 transition-colors\">Fitness Goals</div>\r\n                    <div className=\"text-sm text-gray-500\">856 members</div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-50 cursor-pointer transition-colors group\">\r\n                  <div className=\"w-10 h-10 rounded-xl bg-purple-500 flex items-center justify-center shadow-sm\">\r\n                    <span className=\"text-white font-semibold text-sm\">WL</span>\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"font-medium text-gray-900 group-hover:text-purple-600 transition-colors\">Weight Loss</div>\r\n                    <div className=\"text-sm text-gray-500\">2.1k members</div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-50 cursor-pointer transition-colors group\">\r\n                  <div className=\"w-10 h-10 rounded-xl bg-orange-500 flex items-center justify-center shadow-sm\">\r\n                    <span className=\"text-white font-semibold text-sm\">KT</span>\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"font-medium text-gray-900 group-hover:text-orange-600 transition-colors\">Keto Diet</div>\r\n                    <div className=\"text-sm text-gray-500\">643 members</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              \r\n              <button className=\"w-full mt-6 bg-indigo-600 text-white py-2.5 px-4 rounded-xl hover:bg-indigo-700 transition-colors font-medium shadow-md\">\r\n                Create Group\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Create Post Modal */}\r\n      {showCreatePost && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n          <div className=\"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\r\n            <div className=\"flex items-center justify-between p-6 border-b border-gray-100\">\r\n              <h2 className=\"text-xl font-semibold text-gray-900\">Create Post</h2>\r\n              <button\r\n                onClick={() => setShowCreatePost(false)}\r\n                className=\"text-gray-400 hover:text-gray-600 p-2 hover:bg-gray-100 rounded-full transition-colors\"\r\n              >\r\n                <X className=\"w-5 h-5\" />\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"p-6 space-y-4\">\r\n              <div className=\"flex items-start space-x-3\">\r\n                <div className=\"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-semibold\">\r\n                  {user?.first_name?.charAt(0) || user?.username?.charAt(0) || 'U'}\r\n                </div>\r\n                <div className=\"flex-1\">\r\n                  <textarea\r\n                    placeholder=\"What's on your mind?\"\r\n                    value={newPost.content}\r\n                    onChange={(e) => setNewPost(prev => ({ ...prev, content: e.target.value }))}\r\n                    className=\"w-full p-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\"\r\n                    rows={4}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {newPost.imageFile && (\r\n                <div className=\"relative\">\r\n                  <img\r\n                    src={URL.createObjectURL(newPost.imageFile)}\r\n                    alt=\"Preview\"\r\n                    className=\"w-full h-64 object-cover rounded-xl\"\r\n                  />\r\n                  <button\r\n                    onClick={() => setNewPost(prev => ({ ...prev, imageFile: null }))}\r\n                    className=\"absolute top-2 right-2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-colors\"\r\n                  >\r\n                    <X className=\"w-4 h-4\" />\r\n                  </button>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"flex items-center justify-between pt-4 border-t border-gray-100\">\r\n                <div className=\"flex items-center space-x-4\">\r\n                  <label className=\"flex items-center space-x-2 text-gray-600 hover:text-blue-600 cursor-pointer transition-colors\">\r\n                    <Image className=\"w-5 h-5\" />\r\n                    <span className=\"text-sm font-medium\">Photo</span>\r\n                    <input\r\n                      type=\"file\"\r\n                      accept=\"image/*\"\r\n                      onChange={handleImageUpload}\r\n                      className=\"hidden\"\r\n                    />\r\n                  </label>\r\n                </div>\r\n                \r\n                <div className=\"flex items-center space-x-3\">\r\n                  <button\r\n                    onClick={() => setShowCreatePost(false)}\r\n                    className=\"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors font-medium\"\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                  <button\r\n                    onClick={handleCreatePost}\r\n                    disabled={!newPost.content.trim() && !newPost.imageFile}\r\n                    className=\"px-6 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium\"\r\n                  >\r\n                    Post\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Follow People Search Modal */}\r\n      {showFollowSearch && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n          <div className=\"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\r\n            <div className=\"flex items-center justify-between p-6 border-b border-gray-100\">\r\n              <h2 className=\"text-xl font-semibold text-gray-900\">Find People</h2>\r\n              <button\r\n                onClick={() => setShowFollowSearch(false)}\r\n                className=\"text-gray-400 hover:text-gray-600 p-2 hover:bg-gray-100 rounded-full transition-colors\"\r\n              >\r\n                <X className=\"w-5 h-5\" />\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"p-6\">\r\n              <div className=\"mb-6\">\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Search for people...\"\r\n                  value={searchQuery}\r\n                  onChange={(e) => {\r\n                    setSearchQuery(e.target.value);\r\n                    searchUsers(e.target.value);\r\n                  }}\r\n                  className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              {searchLoading ? (\r\n                <div className=\"flex items-center justify-center py-8\">\r\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"space-y-3\">\r\n                  {searchResults.map(user => (\r\n                    <div key={user.id} className=\"flex items-center justify-between p-4 hover:bg-gray-50 rounded-xl transition-colors\">\r\n                      <div className=\"flex items-center space-x-3\">\r\n                        <div className=\"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-semibold\">\r\n                          {user.first_name?.charAt(0) || user.username?.charAt(0)}\r\n                        </div>\r\n                        <div>\r\n                          <div className=\"font-medium text-gray-900\">{user.first_name} {user.last_name}</div>\r\n                          <div className=\"text-sm text-gray-500\">@{user.username}</div>\r\n                        </div>\r\n                      </div>\r\n                      <button\r\n                        onClick={() => handleFollow(user.id)}\r\n                        className={`px-4 py-2 rounded-xl font-medium transition-colors ${\r\n                          user.is_following\r\n                            ? 'bg-gray-200 text-gray-700 hover:bg-gray-300'\r\n                            : 'bg-blue-600 text-white hover:bg-blue-700'\r\n                        }`}\r\n                      >\r\n                        {user.is_following ? 'Following' : 'Follow'}\r\n                      </button>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Feed;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}