{"ast":null,"code":"import _objectSpread from\"C:/Users/arian/OneDrive/Desktop/Nutrition/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useContext,useState,useEffect}from'react';import{api}from'../services/api';import{storeAuthData,getAuthData,clearAuthData}from'../utils/authPersistence';import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext(undefined);export const useAuth=()=>{const context=useContext(AuthContext);if(context===undefined){throw new Error('useAuth must be used within an AuthProvider');}return context;};export const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);// Unused state variables removed\nuseEffect(()=>{const checkAuth=()=>{console.log('üõ°Ô∏è BULLETPROOF AUTH - NEVER CLEAR DATA');const authData=getAuthData();if(authData&&authData.user){console.log('‚úÖ Using cached user data - NO SERVER VERIFICATION');setUser(authData.user);api.defaults.headers.common['Authorization']=\"Bearer \".concat(authData.token);}else{console.log('‚ùå No cached data');setUser(null);}setLoading(false);};checkAuth();// Listen for logout events from API interceptor\nconst handleLogoutEvent=()=>{console.log('üîê Logout event received from API interceptor');// Clear user state immediately\nsetUser(null);setLoading(false);// The ProtectedRoute component will automatically redirect to /login\n// when user becomes null, using React Router properly\n};window.addEventListener('auth-logout',handleLogoutEvent);return()=>{window.removeEventListener('auth-logout',handleLogoutEvent);};},[]);// No dependencies needed for simple auth check\nconst login=async(email,password)=>{try{console.log('üîê Starting login process...');console.log('üîê API Base URL:',api.defaults.baseURL);console.log('üîê Network status:',navigator.onLine?'Online':'Offline');// Skip health check if we've had recent timeouts to speed up login\nconst recentTimeouts=localStorage.getItem('auth_timeout_count');const timeoutCount=recentTimeouts?parseInt(recentTimeouts):0;if(timeoutCount<2){// Try to wake up the server first with a quick health check\ntry{console.log('üîê Checking server status...');await api.get('/api/health',{timeout:3000});console.log('üîê Server is responsive');}catch(healthError){console.warn('üîê Server health check failed, but continuing with login:',healthError);}}else{console.log('üîê Skipping health check due to recent timeouts');}const startTime=Date.now();let response;try{// Primary attempt with axios - adjust timeout based on recent performance\nconst loginTimeout=timeoutCount>=2?10000:20000;// Shorter timeout if issues persist\nconsole.log(\"\\uD83D\\uDD10 Using \".concat(loginTimeout,\"ms timeout for login (timeout count: \").concat(timeoutCount,\")\"));response=await api.post('/api/auth/login',{email,password},{timeout:loginTimeout});}catch(axiosError){var _axiosError$message;console.warn('üîê Axios login failed:',axiosError);// Check if it's a CORS error\nif((_axiosError$message=axiosError.message)!==null&&_axiosError$message!==void 0&&_axiosError$message.includes('CORS')||axiosError.code==='ERR_NETWORK'){throw new Error('CORS_ERROR: Unable to connect to server. Please check your internet connection and try again.');}// Fallback with direct fetch for other errors\ntry{console.log('üîê Trying direct fetch as fallback...');const fetchResponse=await fetch(\"\".concat(api.defaults.baseURL,\"/api/auth/login\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password}),signal:AbortSignal.timeout(25000)});if(!fetchResponse.ok){throw new Error(\"HTTP \".concat(fetchResponse.status,\": \").concat(fetchResponse.statusText));}const data=await fetchResponse.json();response={data};}catch(fetchError){var _fetchError$message;if((_fetchError$message=fetchError.message)!==null&&_fetchError$message!==void 0&&_fetchError$message.includes('CORS')){throw new Error('CORS_ERROR: Server is not accepting requests from this domain. Please contact support.');}throw fetchError;}}const endTime=Date.now();console.log(\"\\uD83D\\uDD10 Login request completed in \".concat(endTime-startTime,\"ms\"));// Reset timeout counter on successful login\nlocalStorage.removeItem('auth_timeout_count');const{token,user:userData}=response.data;// Store authentication data using the new persistence system\nstoreAuthData(token,userData);api.defaults.headers.common['Authorization']=\"Bearer \".concat(token);setUser({id:userData.id,email:userData.email,first_name:userData.first_name,last_name:userData.last_name,username:userData.username,profile_picture:userData.profile_picture});}catch(error){var _error$response,_error$response2,_error$config,_error$message,_error$response3,_error$response4,_error$response5,_error$message2;console.error('üîê Login error:',error);console.error('üîê Error details:',{message:error.message,code:error.code,status:(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status,data:(_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.data,timeout:error.timeout,config:(_error$config=error.config)===null||_error$config===void 0?void 0:_error$config.timeout});if(error.code==='ECONNABORTED'||(_error$message=error.message)!==null&&_error$message!==void 0&&_error$message.includes('timeout')){var _error$config2;// Try to provide more specific timeout information\nconst timeoutMsg=(_error$config2=error.config)!==null&&_error$config2!==void 0&&_error$config2.timeout?\"Login timed out after \".concat(error.config.timeout,\"ms. \"):'Login timed out. ';throw new Error(timeoutMsg+'The server might be slow to respond. Please try again in a moment.');}else if(((_error$response3=error.response)===null||_error$response3===void 0?void 0:_error$response3.status)===401){throw new Error('Invalid email or password.');}else if(((_error$response4=error.response)===null||_error$response4===void 0?void 0:_error$response4.status)===429){throw new Error('Too many login attempts. Please try again later.');}else if(((_error$response5=error.response)===null||_error$response5===void 0?void 0:_error$response5.status)>=500){throw new Error('Server error. Please try again later.');}else if(!navigator.onLine){throw new Error('No internet connection. Please check your network.');}else if(error.code==='NETWORK_ERROR'||(_error$message2=error.message)!==null&&_error$message2!==void 0&&_error$message2.includes('Network Error')){throw new Error('Network connection failed. Please check your internet connection and try again.');}else{var _error$response6,_error$response6$data;throw new Error(((_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.error)||error.message||'Login failed. Please try again.');}}};const register=async(email,password,first_name,last_name,username)=>{try{const response=await api.post('/api/auth/register',{email,password,first_name,last_name,username});const{token,user:userData}=response.data;// Store authentication data using the new persistence system\nstoreAuthData(token,userData);api.defaults.headers.common['Authorization']=\"Bearer \".concat(token);setUser({id:userData.id,email:userData.email,first_name:userData.first_name,last_name:userData.last_name,username:userData.username,profile_picture:userData.profile_picture});}catch(error){var _error$response7,_error$response7$data;throw new Error(((_error$response7=error.response)===null||_error$response7===void 0?void 0:(_error$response7$data=_error$response7.data)===null||_error$response7$data===void 0?void 0:_error$response7$data.error)||'Registration failed');}};const logout=()=>{// Clear all authentication data using the new persistence system\nclearAuthData();delete api.defaults.headers.common['Authorization'];setUser(null);};const updateUser=userData=>{setUser(prev=>prev?_objectSpread(_objectSpread({},prev),userData):null);};const value={user,loading,login,register,logout,updateUser};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:children});};","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","api","storeAuthData","getAuthData","clearAuthData","jsx","_jsx","AuthContext","undefined","useAuth","context","Error","AuthProvider","_ref","children","user","setUser","loading","setLoading","checkAuth","console","log","authData","defaults","headers","common","concat","token","handleLogoutEvent","window","addEventListener","removeEventListener","login","email","password","baseURL","navigator","onLine","recentTimeouts","localStorage","getItem","timeoutCount","parseInt","get","timeout","healthError","warn","startTime","Date","now","response","loginTimeout","post","axiosError","_axiosError$message","message","includes","code","fetchResponse","fetch","method","body","JSON","stringify","signal","AbortSignal","ok","status","statusText","data","json","fetchError","_fetchError$message","endTime","removeItem","userData","id","first_name","last_name","username","profile_picture","error","_error$response","_error$response2","_error$config","_error$message","_error$response3","_error$response4","_error$response5","_error$message2","config","_error$config2","timeoutMsg","_error$response6","_error$response6$data","register","_error$response7","_error$response7$data","logout","updateUser","prev","_objectSpread","value","Provider"],"sources":["C:/Users/arian/OneDrive/Desktop/Nutrition/client/src/contexts/AuthContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\r\nimport { api } from '../services/api';\r\nimport { storeAuthData, getAuthData, clearAuthData } from '../utils/authPersistence';\r\n\r\ninterface User {\r\n  id: number;\r\n  email: string;\r\n  first_name: string;\r\n  last_name: string;\r\n  username: string;\r\n  profile_picture?: string;\r\n}\r\n\r\ninterface AuthContextType {\r\n  user: User | null;\r\n  loading: boolean;\r\n  login: (email: string, password: string) => Promise<void>;\r\n  register: (email: string, password: string, first_name: string, last_name: string, username: string) => Promise<void>;\r\n  logout: () => void;\r\n  updateUser: (userData: Partial<User>) => void;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\ninterface AuthProviderProps {\r\n  children: ReactNode;\r\n}\r\n\r\nexport const AuthProvider: React.FC<AuthProviderProps> = ({ children }) => {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  // Unused state variables removed\r\n\r\n  useEffect(() => {\r\n    const checkAuth = () => {\r\n      console.log('üõ°Ô∏è BULLETPROOF AUTH - NEVER CLEAR DATA');\r\n      \r\n      const authData = getAuthData();\r\n      \r\n      if (authData && authData.user) {\r\n        console.log('‚úÖ Using cached user data - NO SERVER VERIFICATION');\r\n        setUser(authData.user);\r\n        api.defaults.headers.common['Authorization'] = `Bearer ${authData.token}`;\r\n      } else {\r\n        console.log('‚ùå No cached data');\r\n        setUser(null);\r\n      }\r\n      \r\n      setLoading(false);\r\n    };\r\n\r\n    checkAuth();\r\n\r\n    // Listen for logout events from API interceptor\r\n    const handleLogoutEvent = () => {\r\n      console.log('üîê Logout event received from API interceptor');\r\n      // Clear user state immediately\r\n      setUser(null);\r\n      setLoading(false);\r\n      // The ProtectedRoute component will automatically redirect to /login\r\n      // when user becomes null, using React Router properly\r\n    };\r\n\r\n    window.addEventListener('auth-logout', handleLogoutEvent);\r\n\r\n    return () => {\r\n      window.removeEventListener('auth-logout', handleLogoutEvent);\r\n    };\r\n  }, []); // No dependencies needed for simple auth check\r\n\r\n  const login = async (email: string, password: string) => {\r\n    try {\r\n      console.log('üîê Starting login process...');\r\n      console.log('üîê API Base URL:', api.defaults.baseURL);\r\n      console.log('üîê Network status:', navigator.onLine ? 'Online' : 'Offline');\r\n      \r\n      // Skip health check if we've had recent timeouts to speed up login\r\n      const recentTimeouts = localStorage.getItem('auth_timeout_count');\r\n      const timeoutCount = recentTimeouts ? parseInt(recentTimeouts) : 0;\r\n      \r\n      if (timeoutCount < 2) {\r\n        // Try to wake up the server first with a quick health check\r\n        try {\r\n          console.log('üîê Checking server status...');\r\n          await api.get('/api/health', { timeout: 3000 });\r\n          console.log('üîê Server is responsive');\r\n        } catch (healthError) {\r\n          console.warn('üîê Server health check failed, but continuing with login:', healthError);\r\n        }\r\n      } else {\r\n        console.log('üîê Skipping health check due to recent timeouts');\r\n      }\r\n      \r\n      const startTime = Date.now();\r\n      let response;\r\n      \r\n      try {\r\n        // Primary attempt with axios - adjust timeout based on recent performance\r\n        const loginTimeout = timeoutCount >= 2 ? 10000 : 20000; // Shorter timeout if issues persist\r\n        console.log(`üîê Using ${loginTimeout}ms timeout for login (timeout count: ${timeoutCount})`);\r\n        \r\n        response = await api.post('/api/auth/login', { \r\n          email, \r\n          password \r\n        }, {\r\n          timeout: loginTimeout\r\n        });\r\n      } catch (axiosError: any) {\r\n        console.warn('üîê Axios login failed:', axiosError);\r\n        \r\n        // Check if it's a CORS error\r\n        if (axiosError.message?.includes('CORS') || axiosError.code === 'ERR_NETWORK') {\r\n          throw new Error('CORS_ERROR: Unable to connect to server. Please check your internet connection and try again.');\r\n        }\r\n        \r\n        // Fallback with direct fetch for other errors\r\n        try {\r\n          console.log('üîê Trying direct fetch as fallback...');\r\n          const fetchResponse = await fetch(`${api.defaults.baseURL}/api/auth/login`, {\r\n            method: 'POST',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({ email, password }),\r\n            signal: AbortSignal.timeout(25000)\r\n          });\r\n          \r\n          if (!fetchResponse.ok) {\r\n            throw new Error(`HTTP ${fetchResponse.status}: ${fetchResponse.statusText}`);\r\n          }\r\n          \r\n          const data = await fetchResponse.json();\r\n          response = { data };\r\n        } catch (fetchError: any) {\r\n          if (fetchError.message?.includes('CORS')) {\r\n            throw new Error('CORS_ERROR: Server is not accepting requests from this domain. Please contact support.');\r\n          }\r\n          throw fetchError;\r\n        }\r\n      }\r\n      \r\n      const endTime = Date.now();\r\n      console.log(`üîê Login request completed in ${endTime - startTime}ms`);\r\n      \r\n      // Reset timeout counter on successful login\r\n      localStorage.removeItem('auth_timeout_count');\r\n      \r\n      const { token, user: userData } = response.data;\r\n      \r\n      // Store authentication data using the new persistence system\r\n      storeAuthData(token, userData);\r\n      api.defaults.headers.common['Authorization'] = `Bearer ${token}`;\r\n      \r\n      setUser({\r\n        id: userData.id,\r\n        email: userData.email,\r\n        first_name: userData.first_name,\r\n        last_name: userData.last_name,\r\n        username: userData.username,\r\n        profile_picture: userData.profile_picture\r\n      });\r\n    } catch (error: any) {\r\n      console.error('üîê Login error:', error);\r\n      console.error('üîê Error details:', {\r\n        message: error.message,\r\n        code: error.code,\r\n        status: error.response?.status,\r\n        data: error.response?.data,\r\n        timeout: error.timeout,\r\n        config: error.config?.timeout\r\n      });\r\n      \r\n      if (error.code === 'ECONNABORTED' || error.message?.includes('timeout')) {\r\n        // Try to provide more specific timeout information\r\n        const timeoutMsg = error.config?.timeout ? \r\n          `Login timed out after ${error.config.timeout}ms. ` : 'Login timed out. ';\r\n        throw new Error(timeoutMsg + 'The server might be slow to respond. Please try again in a moment.');\r\n      } else if (error.response?.status === 401) {\r\n        throw new Error('Invalid email or password.');\r\n      } else if (error.response?.status === 429) {\r\n        throw new Error('Too many login attempts. Please try again later.');\r\n      } else if (error.response?.status >= 500) {\r\n        throw new Error('Server error. Please try again later.');\r\n      } else if (!navigator.onLine) {\r\n        throw new Error('No internet connection. Please check your network.');\r\n      } else if (error.code === 'NETWORK_ERROR' || error.message?.includes('Network Error')) {\r\n        throw new Error('Network connection failed. Please check your internet connection and try again.');\r\n      } else {\r\n        throw new Error(error.response?.data?.error || error.message || 'Login failed. Please try again.');\r\n      }\r\n    }\r\n  };\r\n\r\n  const register = async (email: string, password: string, first_name: string, last_name: string, username: string) => {\r\n    try {\r\n      const response = await api.post('/api/auth/register', { email, password, first_name, last_name, username });\r\n      const { token, user: userData } = response.data;\r\n      \r\n      // Store authentication data using the new persistence system\r\n      storeAuthData(token, userData);\r\n      api.defaults.headers.common['Authorization'] = `Bearer ${token}`;\r\n      \r\n      setUser({\r\n        id: userData.id,\r\n        email: userData.email,\r\n        first_name: userData.first_name,\r\n        last_name: userData.last_name,\r\n        username: userData.username,\r\n        profile_picture: userData.profile_picture\r\n      });\r\n    } catch (error: any) {\r\n      throw new Error(error.response?.data?.error || 'Registration failed');\r\n    }\r\n  };\r\n\r\n  const logout = () => {\r\n    // Clear all authentication data using the new persistence system\r\n    clearAuthData();\r\n    delete api.defaults.headers.common['Authorization'];\r\n    setUser(null);\r\n  };\r\n\r\n  const updateUser = (userData: Partial<User>) => {\r\n    setUser(prev => prev ? { ...prev, ...userData } : null);\r\n  };\r\n\r\n  const value: AuthContextType = {\r\n    user,\r\n    loading,\r\n    login,\r\n    register,\r\n    logout,\r\n    updateUser\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}