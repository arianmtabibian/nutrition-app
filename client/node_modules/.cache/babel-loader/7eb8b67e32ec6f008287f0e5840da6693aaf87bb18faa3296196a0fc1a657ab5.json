{"ast":null,"code":"import _objectSpread from\"C:/Users/arian/OneDrive/Desktop/Nutrition/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useAuth}from'../contexts/AuthContext';import{Heart,MessageCircle,Share,MoreHorizontal,PenTool,Edit3,Bookmark,UserPlus,UserCircle,Image,X}from'lucide-react';import{format,startOfMonth,endOfMonth,eachDayOfInterval,isSameMonth,isToday}from'date-fns';import{diaryAPI,mealsAPI,socialAPI}from'../services/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const SocialProfile=()=>{const{user}=useAuth();const[profileData,setProfileData]=useState(null);const[posts,setPosts]=useState([]);const[likedPosts,setLikedPosts]=useState([]);const[bookmarkedPosts,setBookmarkedPosts]=useState([]);const[loading,setLoading]=useState(true);const[activeTab,setActiveTab]=useState('posts');const[showCreatePost,setShowCreatePost]=useState(false);const[newPost,setNewPost]=useState({content:'',imageFile:null,mealData:null,allowComments:true,hideLikeCount:false});const[showEditProfile,setShowEditProfile]=useState(false);const[showFollowersModal,setShowFollowersModal]=useState(false);const[showFollowingModal,setShowFollowingModal]=useState(false);const[followers]=useState([]);const[following]=useState([]);const[editProfileData,setEditProfileData]=useState({daily_calories:0,daily_protein:0,weight:0,target_weight:0,height:0,age:0,activity_level:'moderate',gender:'male',bio:''});// State for streak calculation\nconst[streak,setStreak]=useState(0);const[streakLoading,setStreakLoading]=useState(true);// State for nutrition and calendar data\nconst[todayNutrition,setTodayNutrition]=useState(null);const[currentDate]=useState(new Date());const[monthData,setMonthData]=useState(null);const[nutritionLoading]=useState(true);// SIMPLE streak calculation - just count consecutive yellow/green squares\nconst calculateStreak=async()=>{try{setStreakLoading(true);// Get current month data\nconst currentDate=new Date();const year=currentDate.getFullYear();const month=currentDate.getMonth()+1;const response=await diaryAPI.getMonth(year,month);const monthData=response.data;if(!monthData||!monthData.days){setStreak(0);return;}// Get days with data, sorted by date (newest first)\nconst daysWithData=monthData.days.filter(day=>day.has_data).sort((a,b)=>new Date(b.date).getTime()-new Date(a.date).getTime());let streak=0;// Count consecutive colored squares from today backwards\nfor(const day of daysWithData){// Simple check: yellow = one goal met, green = both goals met\nconst isColored=day.calories_met||day.protein_met;if(isColored){streak++;console.log(\"Day \".concat(day.date,\": COLORED (calories: \").concat(day.calories_met,\", protein: \").concat(day.protein_met,\") - Streak: \").concat(streak));}else{console.log(\"Day \".concat(day.date,\": NOT colored - Streak stops at \").concat(streak));break;}}console.log(\"FINAL STREAK: \".concat(streak));setStreak(streak);}catch(error){console.error('Streak calculation failed:',error);setStreak(0);}finally{setStreakLoading(false);}};// Load nutrition data (same as Feed component)\nconst loadNutritionData=async()=>{try{// setNutritionLoading(true); // Removed - no setter available\nconsole.log('üìä Profile: Loading nutrition data...');if(!(user!==null&&user!==void 0&&user.id)||!profileData){console.log('üìä Profile: No user or profile data available');// setNutritionLoading(false); // Removed - no setter available\nreturn;}// Load today's nutrition using same method as Overview/Feed\nconst today=new Date().toISOString().split('T')[0];console.log('üìä Profile: Loading meals for date:',today);const mealsResponse=await mealsAPI.getByDate(today);console.log('üìä Profile: Raw meals response:',mealsResponse);if(mealsResponse.data&&mealsResponse.data.meals){var _profileData$profile,_profileData$profile2;const meals=mealsResponse.data.meals||[];console.log('üìä Profile: Processing meals:',meals.length,'meals found');const totalCalories=meals.reduce((sum,meal)=>sum+(meal.calories||0),0);const totalProtein=meals.reduce((sum,meal)=>sum+(meal.protein||0),0);const totalCarbs=meals.reduce((sum,meal)=>sum+(meal.carbs||0),0);const totalFat=meals.reduce((sum,meal)=>sum+(meal.fat||0),0);const nutritionData={totalCalories:totalCalories,totalProtein:totalProtein,totalCarbs:totalCarbs,totalFat:totalFat,calorieGoal:((_profileData$profile=profileData.profile)===null||_profileData$profile===void 0?void 0:_profileData$profile.daily_calories)||2000,proteinGoal:((_profileData$profile2=profileData.profile)===null||_profileData$profile2===void 0?void 0:_profileData$profile2.daily_protein)||150};console.log('üìä Profile: Final calculated nutrition data:',nutritionData);setTodayNutrition(nutritionData);}}catch(error){console.error('Error loading nutrition data:',error);}finally{// setNutritionLoading(false); // Removed - no setter available\n}};// Load calendar data (same as Feed component)\nconst loadCalendarData=async()=>{try{console.log('üìÖ Profile: Loading calendar data...');const year=currentDate.getFullYear();const month=currentDate.getMonth()+1;const response=await diaryAPI.getMonth(year,month);console.log('üìÖ Profile: Calendar response:',response);if(response.data){setMonthData(response.data);console.log('üìÖ Profile: Calendar data loaded successfully');}}catch(error){console.error('Error loading calendar data:',error);}};useEffect(()=>{if(profileData){calculateStreak();loadNutritionData();loadCalendarData();}},[profileData]);// Functions are stable, no need to include in deps\n// Listen for meal updates to refresh data\nuseEffect(()=>{const handleMealDataChanged=()=>{console.log('üìä Profile: Meal data changed event received, refreshing...');loadNutritionData();loadCalendarData();};const handleStorageChange=e=>{if(e.key==='mealAdded'||e.key==='mealDeleted'||e.key==='mealUpdated'){console.log('üìä Profile: Storage event detected, refreshing...');handleMealDataChanged();}};// Listen for custom events (same tab)\nwindow.addEventListener('mealDataChanged',handleMealDataChanged);window.addEventListener('mealAdded',handleMealDataChanged);window.addEventListener('mealUpdated',handleMealDataChanged);window.addEventListener('mealDeleted',handleMealDataChanged);// Listen for storage events (cross-tab)\nwindow.addEventListener('storage',handleStorageChange);window.addEventListener('sidebarRefresh',handleMealDataChanged);return()=>{window.removeEventListener('mealDataChanged',handleMealDataChanged);window.removeEventListener('mealAdded',handleMealDataChanged);window.removeEventListener('mealUpdated',handleMealDataChanged);window.removeEventListener('mealDeleted',handleMealDataChanged);window.removeEventListener('storage',handleStorageChange);window.removeEventListener('sidebarRefresh',handleMealDataChanged);};},[profileData]);// Functions are stable, no need to include in deps\nuseEffect(()=>{if(user){loadProfile();loadPosts();}},[user]);// Functions are stable, no need to include in deps\nuseEffect(()=>{if(user&&activeTab==='liked'){loadLikedPosts();}else if(user&&activeTab==='saved'){loadBookmarkedPosts();}},[user,activeTab]);// Functions are stable, no need to include in deps\nconst loadProfile=async function(){let retryCount=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;try{setLoading(true);console.log('Loading profile for user ID:',user===null||user===void 0?void 0:user.id);if(!(user!==null&&user!==void 0&&user.id)){console.error('No user ID available');setLoading(false);return;}// Use centralized socialAPI instead of direct fetch\nconst response=await socialAPI.getProfile(user.id);console.log('Profile response:',response);if(response&&response.data){console.log('Profile data received:',response.data);setProfileData(response.data);}else{console.error('No profile data in response');// If profile doesn't exist, create a basic one\nif(retryCount===0){console.log('Attempting to create basic profile...');await createBasicProfile();return;}}}catch(error){var _error$message;console.error('Error loading profile:',error);// Handle specific error cases\nif(error&&typeof error==='object'&&'response'in error){var _axiosError$response;const axiosError=error;if(((_axiosError$response=axiosError.response)===null||_axiosError$response===void 0?void 0:_axiosError$response.status)===404&&retryCount===0){console.log('Profile not found (404), attempting to create basic profile...');await createBasicProfile();return;}}// Retry logic for network errors\nif(retryCount<3&&error instanceof Error&&((_error$message=error.message)!==null&&_error$message!==void 0&&_error$message.includes('Failed to fetch')||error.name==='TypeError')){console.log(\"Retrying profile load (attempt \".concat(retryCount+1,\")...\"));setTimeout(()=>loadProfile(retryCount+1),1000*(retryCount+1));return;}}finally{setLoading(false);}};const createBasicProfile=async()=>{try{console.log('Creating basic profile for user:',user);// Create a basic profile structure\nconst basicProfileData={user:{id:(user===null||user===void 0?void 0:user.id)||0,email:(user===null||user===void 0?void 0:user.email)||'',first_name:(user===null||user===void 0?void 0:user.first_name)||'User',last_name:(user===null||user===void 0?void 0:user.last_name)||'',username:(user===null||user===void 0?void 0:user.username)||'user'},profile:{profile_picture:'',bio:'',daily_calories:2000,daily_protein:150,weight:0,target_weight:0,height:0,age:0,activity_level:'moderate',gender:'male'},stats:{posts:0,followers:0,following:0},isFollowing:false};setProfileData(basicProfileData);console.log('Basic profile created successfully');}catch(error){console.error('Error creating basic profile:',error);}};const openEditProfile=()=>{if(profileData){setEditProfileData({daily_calories:profileData.profile.daily_calories||0,daily_protein:profileData.profile.daily_protein||0,weight:profileData.profile.weight||0,target_weight:profileData.profile.target_weight||0,height:profileData.profile.height||0,age:profileData.profile.age||0,activity_level:profileData.profile.activity_level||'moderate',gender:profileData.profile.gender||'male',bio:profileData.profile.bio||''});setShowEditProfile(true);}};const handleEditProfile=async()=>{try{// Get token from proper auth system\nconst authData=JSON.parse(localStorage.getItem('nutritrack_auth_data')||'{}');const token=authData.token||localStorage.getItem('token');if(!token||!(user!==null&&user!==void 0&&user.id))return;const response=await fetch(\"\".concat(process.env.REACT_APP_API_URL||'https://nutrition-back-jtf3.onrender.com',\"/api/profile\"),{method:'PUT',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify(editProfileData)});if(response.ok){// Reload profile data\nawait loadProfile();setShowEditProfile(false);// You could add a success message here\n}else{console.error('Failed to update profile');}}catch(error){console.error('Error updating profile:',error);}};const loadPosts=async function(){let retryCount=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;try{if(!(user!==null&&user!==void 0&&user.id)){console.log('‚ùå No user ID available for loading posts');return;}console.log('üìã Loading posts for user:',user.id);const response=await socialAPI.getUserPosts(user.id);console.log('üìã Posts response:',response);if(response&&response.data&&response.data.posts){console.log('‚úÖ Loaded',response.data.posts.length,'posts for profile');setPosts(response.data.posts);}else{console.log('‚ö†Ô∏è No posts data in response');setPosts([]);}}catch(error){var _error$message2;console.error('‚ùå Error loading posts:',error);// Retry logic for network errors\nif(retryCount<3&&error instanceof Error&&((_error$message2=error.message)!==null&&_error$message2!==void 0&&_error$message2.includes('Failed to fetch')||error.name==='TypeError')){console.log(\"Retrying posts load (attempt \".concat(retryCount+1,\")...\"));setTimeout(()=>loadPosts(retryCount+1),1000*(retryCount+1));return;}}finally{setLoading(false);}};const loadLikedPosts=async()=>{try{if(!(user!==null&&user!==void 0&&user.id)){console.log('‚ùå No user ID available for loading liked posts');return;}console.log('‚ù§Ô∏è Loading liked posts for user:',user.id);const response=await socialAPI.getLikedPosts(user.id);console.log('‚ù§Ô∏è Liked posts response:',response);if(response&&response.data&&response.data.posts){console.log('‚úÖ Loaded',response.data.posts.length,'liked posts');setLikedPosts(response.data.posts);}else{console.log('‚ö†Ô∏è No liked posts data in response');setLikedPosts([]);}}catch(error){console.error('‚ùå Error loading liked posts:',error);setLikedPosts([]);}};const loadBookmarkedPosts=async()=>{try{if(!(user!==null&&user!==void 0&&user.id)){console.log('‚ùå No user ID available for loading bookmarked posts');return;}console.log('üîñ Loading bookmarked posts for user:',user.id);const response=await socialAPI.getBookmarkedPosts(user.id);console.log('üîñ Bookmarked posts response:',response);if(response&&response.data&&response.data.posts){console.log('‚úÖ Loaded',response.data.posts.length,'bookmarked posts');setBookmarkedPosts(response.data.posts);}else{console.log('‚ö†Ô∏è No bookmarked posts data in response');setBookmarkedPosts([]);}}catch(error){console.error('‚ùå Error loading bookmarked posts:',error);setBookmarkedPosts([]);}};const handleLike=async postId=>{try{await socialAPI.likePost(postId);// Update local state\nsetPosts(posts.map(post=>post.id===postId?_objectSpread(_objectSpread({},post),{},{is_liked:!post.is_liked,likes_count:post.is_liked?post.likes_count-1:post.likes_count+1}):post));}catch(error){console.error('Error liking post:',error);}};const handleBookmark=async postId=>{try{await socialAPI.bookmarkPost(postId);// Update local state in all relevant arrays\nsetPosts(posts.map(post=>post.id===postId?_objectSpread(_objectSpread({},post),{},{is_bookmarked:!post.is_bookmarked}):post));setLikedPosts(likedPosts.map(post=>post.id===postId?_objectSpread(_objectSpread({},post),{},{is_bookmarked:!post.is_bookmarked}):post));setBookmarkedPosts(bookmarkedPosts.map(post=>post.id===postId?_objectSpread(_objectSpread({},post),{},{is_bookmarked:!post.is_bookmarked}):post));}catch(error){console.error('Error bookmarking post:',error);}};const handleCreatePost=async()=>{try{const formData=new FormData();formData.append('content',newPost.content);formData.append('allowComments',newPost.allowComments.toString());formData.append('hideLikeCount',newPost.hideLikeCount.toString());if(newPost.imageFile){formData.append('image',newPost.imageFile);}if(newPost.mealData){formData.append('mealData',JSON.stringify(newPost.mealData));}const response=await socialAPI.createPost(formData);const result=response.data;console.log('New post data:',result);// Ensure the post has proper user information\nif(!result.created_at){result.created_at=new Date().toISOString();}if(!result.user&&user){result.user={id:user.id,username:user.username,first_name:user.first_name,last_name:user.last_name,profile_picture:user.profile_picture||undefined};}setNewPost({content:'',imageFile:null,mealData:null,allowComments:true,hideLikeCount:false});setShowCreatePost(false);// Store the new post in localStorage for persistence across navigation\nconst existingLocalPosts=JSON.parse(localStorage.getItem('local_posts')||'[]');const updatedLocalPosts=[result,...existingLocalPosts.filter(p=>p.id!==result.id)];localStorage.setItem('local_posts',JSON.stringify(updatedLocalPosts));console.log('üíæ SocialProfile: Stored post in localStorage for persistence');// Trigger a custom event to update the feed\nwindow.dispatchEvent(new CustomEvent('postCreated',{detail:result}));loadPosts();// Reload posts\n}catch(error){console.error('Error creating post:',error);if(error&&typeof error==='object'&&'response'in error){var _axiosError$response2,_axiosError$response3;const axiosError=error;console.error('Response error:',(_axiosError$response2=axiosError.response)===null||_axiosError$response2===void 0?void 0:_axiosError$response2.status,(_axiosError$response3=axiosError.response)===null||_axiosError$response3===void 0?void 0:_axiosError$response3.data);}}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"})});}if(!profileData){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-gray-200 rounded-full mx-auto mb-4 flex items-center justify-center\",children:/*#__PURE__*/_jsx(UserCircle,{className:\"w-8 h-8 text-gray-400\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-medium mb-2\",children:\"Profile not found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-4\",children:\"We couldn't load your profile information.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.reload(),className:\"bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors\",children:\"Try Again\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative h-64 bg-gradient-to-br from-green-400 via-blue-500 to-purple-600\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-black bg-opacity-20\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-40 h-40 rounded-full bg-white p-1 shadow-xl\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-full rounded-full bg-gradient-to-br from-orange-400 to-red-500 flex items-center justify-center text-white text-5xl font-bold overflow-hidden\",children:profileData.profile.profile_picture?/*#__PURE__*/_jsx(\"img\",{src:profileData.profile.profile_picture,alt:\"Profile\",className:\"w-full h-full rounded-full object-cover\"}):profileData.user.first_name&&profileData.user.first_name.charAt(0)||profileData.user.username&&profileData.user.username.charAt(0)||'U'})}),/*#__PURE__*/_jsx(\"button\",{className:\"absolute bottom-2 right-2 bg-gradient-to-r from-orange-500 to-red-500 text-white p-3 rounded-full hover:from-orange-600 hover:to-red-600 transition-all duration-200 shadow-lg z-10\",children:/*#__PURE__*/_jsx(PenTool,{className:\"w-5 h-5\"})})]})}),/*#__PURE__*/_jsxs(\"button\",{className:\"absolute top-4 right-4 bg-white bg-opacity-90 hover:bg-opacity-100 text-gray-700 px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2 shadow-md\",children:[/*#__PURE__*/_jsx(Image,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Edit Background\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-6xl mx-auto px-4 pt-24 pb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center space-x-4 mb-2\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-3xl font-bold text-gray-900\",children:[profileData.user.first_name,\" \",profileData.user.last_name]}),!profileData.profile.daily_calories&&!profileData.profile.weight?/*#__PURE__*/_jsxs(\"button\",{className:\"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-2 rounded-lg font-medium transition-all duration-200 shadow-md\",children:[/*#__PURE__*/_jsx(Edit3,{className:\"w-4 h-4 inline mr-2\"}),\"Complete Profile\"]}):/*#__PURE__*/_jsxs(\"button\",{onClick:openEditProfile,className:\"bg-gray-100 hover:bg-gray-200 text-gray-700 px-6 py-2 rounded-lg font-medium transition-colors border border-gray-300\",children:[/*#__PURE__*/_jsx(Edit3,{className:\"w-4 h-4 inline mr-2\"}),\"Edit Profile\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center space-x-6 mb-3\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[\"@\",profileData.user.username]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg font-bold text-orange-600\",children:profileData.stats.posts}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600 ml-1\",children:\"Posts\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-px h-4 bg-gray-300\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"text-center hover:bg-gray-50 rounded-lg px-2 py-1 transition-colors\",onClick:()=>setShowFollowersModal(true),children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg font-bold text-orange-600 hover:text-orange-700\",children:profileData.stats.followers}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600 ml-1\",children:\"Followers\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-px h-4 bg-gray-300\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"text-center hover:bg-gray-50 rounded-lg px-2 py-1 transition-colors\",onClick:()=>setShowFollowingModal(true),children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg font-bold text-orange-600 hover:text-orange-700\",children:profileData.stats.following}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600 ml-1\",children:\"Following\"})]})]})]}),profileData.profile.bio?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 max-w-md mx-auto text-sm\",children:profileData.profile.bio}):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 italic text-sm\",children:\"No bio yet\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900 mb-4\",children:\"Activity\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center p-3 bg-gray-50 rounded-lg mb-6\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:\"Activity Level\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-lg font-bold text-gray-900 capitalize\",children:profileData.profile.activity_level||'Not set'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-orange-500 to-red-500 rounded-xl p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center space-x-2 mb-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-white text-2xl\",children:\"\\uD83D\\uDD25\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-white text-lg\",children:\"Daily Streak\"})]}),streakLoading?/*#__PURE__*/_jsx(\"div\",{className:\"text-white\",children:\"Loading...\"}):streak>0?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-4xl font-bold text-white mb-2\",children:streak}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-medium text-orange-100\",children:[streak===1?'Day':'Days',\" Strong!\"]})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl font-bold text-white mb-2\",children:\"0\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-orange-100\",children:\"Start Today!\"})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900 mb-4\",children:\"Nutrition Goals\"}),profileData.profile.daily_calories&&todayNutrition?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:\"Daily Calories\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-600\",children:[todayNutrition.totalCalories,\" / \",todayNutrition.calorieGoal,\" cal\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-orange-500 to-red-500 h-3 rounded-full\",style:{width:\"\".concat(Math.min(100,Math.round(todayNutrition.totalCalories/todayNutrition.calorieGoal*100)),\"%\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 mt-1\",children:[Math.round(todayNutrition.totalCalories/todayNutrition.calorieGoal*100),\"% of daily goal\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:\"Daily Protein\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-600\",children:[todayNutrition.totalProtein,\"g / \",todayNutrition.proteinGoal,\"g\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-blue-500 to-purple-500 h-3 rounded-full\",style:{width:\"\".concat(Math.min(100,Math.round(todayNutrition.totalProtein/todayNutrition.proteinGoal*100)),\"%\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 mt-1\",children:[Math.round(todayNutrition.totalProtein/todayNutrition.proteinGoal*100),\"% of daily goal\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:\"Weight Goal\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-600\",children:[profileData.profile.weight,\" \\u2192 \",profileData.profile.target_weight,\" lbs\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-green-500 to-teal-500 h-3 rounded-full\",style:{width:'40%'}})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 mt-1\",children:\"40% to target weight\"})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-4\",children:\"Set up your nutrition goals to track progress\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-gradient-to-r from-orange-500 to-red-500 text-white py-2 px-4 rounded-lg hover:from-orange-600 hover:to-red-600 transition-all duration-200 shadow-md\",children:\"Set Goals\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900 mb-4\",children:\"Activity Calendar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-7 gap-1 text-xs\",children:[['M','T','W','T','F','S','S'].map(day=>/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-gray-500 font-medium p-1\",children:day},day)),(()=>{const monthStart=startOfMonth(currentDate);const monthEnd=endOfMonth(currentDate);const calendarDays=eachDayOfInterval({start:monthStart,end:monthEnd});// Pad the beginning to align with Monday start\nconst startPadding=(monthStart.getDay()+6)%7;// Convert Sunday=0 to Monday=0\nconst paddedDays=Array(startPadding).fill(null).concat(calendarDays);// Fill to 35 days (5 weeks)\nwhile(paddedDays.length<35){paddedDays.push(null);}return paddedDays.slice(0,35).map((day,i)=>{var _monthData$days;if(!day){return/*#__PURE__*/_jsx(\"div\",{className:\"aspect-square\"},i);}const dayData=monthData===null||monthData===void 0?void 0:(_monthData$days=monthData.days)===null||_monthData$days===void 0?void 0:_monthData$days.find(d=>d.date===format(day,'yyyy-MM-dd'));const hasActivity=dayData===null||dayData===void 0?void 0:dayData.has_data;const caloriesMet=dayData===null||dayData===void 0?void 0:dayData.calories_met;const proteinMet=dayData===null||dayData===void 0?void 0:dayData.protein_met;const isCurrentDay=isToday(day);const isCurrentMonth=isSameMonth(day,currentDate);let bgColor='bg-gray-100 text-gray-600';if(hasActivity){if(caloriesMet&&proteinMet){bgColor='bg-orange-500 text-white';// Both goals met\n}else if(caloriesMet||proteinMet){bgColor='bg-orange-300 text-white';// One goal met\n}else{bgColor='bg-orange-100 text-orange-600';// Has data but no goals met\n}}if(isCurrentDay){bgColor+=' ring-2 ring-orange-400';}return/*#__PURE__*/_jsx(\"div\",{className:\"aspect-square rounded flex items-center justify-center text-xs \".concat(bgColor,\" \").concat(!isCurrentMonth?'opacity-30':''),children:format(day,'d')},i);});})()]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 text-xs text-gray-500\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 bg-orange-500 rounded\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Goal met\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 bg-gray-100 rounded border\"}),/*#__PURE__*/_jsx(\"span\",{children:\"No activity\"})]})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('posts'),className:\"text-lg font-semibold transition-colors pb-2 border-b-2 \".concat(activeTab==='posts'?'text-orange-600 border-orange-600':'text-gray-500 border-transparent hover:text-gray-700'),children:\"Posts\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('liked'),className:\"text-lg font-semibold transition-colors pb-2 border-b-2 \".concat(activeTab==='liked'?'text-orange-600 border-orange-600':'text-gray-500 border-transparent hover:text-gray-700'),children:\"Liked\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('saved'),className:\"text-lg font-semibold transition-colors pb-2 border-b-2 \".concat(activeTab==='saved'?'text-orange-600 border-orange-600':'text-gray-500 border-transparent hover:text-gray-700'),children:\"Saved\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowCreatePost(true),className:\"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2 shadow-md\",children:[/*#__PURE__*/_jsx(PenTool,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"New Post\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[activeTab==='posts'&&/*#__PURE__*/_jsx(_Fragment,{children:posts.length>0?posts.map(post=>{var _profileData$profile3;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[profileData!==null&&profileData!==void 0&&(_profileData$profile3=profileData.profile)!==null&&_profileData$profile3!==void 0&&_profileData$profile3.profile_picture?/*#__PURE__*/_jsx(\"img\",{src:profileData.profile.profile_picture,alt:\"\".concat(user===null||user===void 0?void 0:user.first_name,\" \").concat(user===null||user===void 0?void 0:user.last_name),className:\"w-10 h-10 rounded-full object-cover\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center text-white font-semibold\",children:(user===null||user===void 0?void 0:user.first_name)&&user.first_name.charAt(0)||'U'}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-semibold text-gray-900\",children:[user===null||user===void 0?void 0:user.first_name,\" \",user===null||user===void 0?void 0:user.last_name]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:new Date(post.created_at).toLocaleDateString('en-US',{month:'short',day:'numeric',hour:'numeric',minute:'2-digit'})})]})]}),/*#__PURE__*/_jsx(MoreHorizontal,{className:\"w-5 h-5 text-gray-400 cursor-pointer hover:text-gray-600\"})]}),post.content&&/*#__PURE__*/_jsx(\"div\",{className:\"px-4 pb-3\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-900\",children:post.content})}),post.image_url&&/*#__PURE__*/_jsx(\"div\",{className:\"px-4 pb-3\",children:/*#__PURE__*/_jsx(\"img\",{src:post.image_url,alt:\"Post content\",className:\"w-full rounded-lg object-cover max-h-96\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between px-4 py-3 border-t border-gray-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleLike(post.id),className:\"flex items-center space-x-1 transition-colors \".concat(post.is_liked?'text-red-600':'text-gray-600 hover:text-red-600'),children:[/*#__PURE__*/_jsx(Heart,{className:\"w-5 h-5 \".concat(post.is_liked?'fill-current':'')}),!post.hide_like_count&&/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:post.likes_count})]}),post.allow_comments&&/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center space-x-1 text-gray-600 hover:text-blue-600 transition-colors\",children:[/*#__PURE__*/_jsx(MessageCircle,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:post.comments_count})]}),/*#__PURE__*/_jsx(\"button\",{className:\"flex items-center space-x-1 text-gray-600 hover:text-green-600 transition-colors\",children:/*#__PURE__*/_jsx(Share,{className:\"w-5 h-5\"})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleBookmark(post.id),className:\"flex items-center space-x-2 transition-colors \".concat(post.is_bookmarked?'text-blue-500':'text-gray-400 hover:text-blue-500'),children:/*#__PURE__*/_jsx(Bookmark,{className:\"w-5 h-5 \".concat(post.is_bookmarked?'fill-current':'')})})]})]},post.id);}):/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center\",children:[/*#__PURE__*/_jsx(PenTool,{className:\"w-16 h-16 mx-auto mb-4 text-gray-300\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-medium mb-2 text-gray-600\",children:\"No posts yet!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-4\",children:\"When you share photos and videos, they'll appear here.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCreatePost(true),className:\"bg-gradient-to-r from-orange-500 to-red-500 text-white py-2 px-4 rounded-lg hover:from-orange-600 hover:to-red-600 transition-all duration-200 shadow-md\",children:\"Share your first post\"})]})}),activeTab==='liked'&&/*#__PURE__*/_jsx(_Fragment,{children:likedPosts.length>0?likedPosts.map(post=>{var _post$user$first_name;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[post.user.profile_picture?/*#__PURE__*/_jsx(\"img\",{src:post.user.profile_picture,alt:\"\".concat(post.user.first_name,\" \").concat(post.user.last_name),className:\"w-10 h-10 rounded-full object-cover\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center text-white font-semibold\",children:((_post$user$first_name=post.user.first_name)===null||_post$user$first_name===void 0?void 0:_post$user$first_name.charAt(0))||'U'}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-semibold text-gray-900\",children:[post.user.first_name,\" \",post.user.last_name]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:new Date(post.created_at).toLocaleDateString('en-US',{month:'short',day:'numeric',hour:'numeric',minute:'2-digit'})})]})]})}),post.content&&/*#__PURE__*/_jsx(\"div\",{className:\"px-4 pb-3\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-900\",children:post.content})}),post.image_url&&/*#__PURE__*/_jsx(\"div\",{className:\"px-4 pb-3\",children:/*#__PURE__*/_jsx(\"img\",{src:post.image_url,alt:\"Post content\",className:\"w-full rounded-lg object-cover max-h-96\"})})]},post.id);}):/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center\",children:[/*#__PURE__*/_jsx(Heart,{className:\"w-16 h-16 mx-auto mb-4 text-gray-300\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-medium mb-2 text-gray-600\",children:\"No liked posts yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Posts you like will appear here.\"})]})}),activeTab==='saved'&&/*#__PURE__*/_jsx(_Fragment,{children:bookmarkedPosts.length>0?bookmarkedPosts.map(post=>{var _post$user$first_name2;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[post.user.profile_picture?/*#__PURE__*/_jsx(\"img\",{src:post.user.profile_picture,alt:\"\".concat(post.user.first_name,\" \").concat(post.user.last_name),className:\"w-10 h-10 rounded-full object-cover\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center text-white font-semibold\",children:((_post$user$first_name2=post.user.first_name)===null||_post$user$first_name2===void 0?void 0:_post$user$first_name2.charAt(0))||'U'}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-semibold text-gray-900\",children:[post.user.first_name,\" \",post.user.last_name]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:new Date(post.created_at).toLocaleDateString('en-US',{month:'short',day:'numeric',hour:'numeric',minute:'2-digit'})})]})]})}),post.content&&/*#__PURE__*/_jsx(\"div\",{className:\"px-4 pb-3\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-900\",children:post.content})}),post.image_url&&/*#__PURE__*/_jsx(\"div\",{className:\"px-4 pb-3\",children:/*#__PURE__*/_jsx(\"img\",{src:post.image_url,alt:\"Post content\",className:\"w-full rounded-lg object-cover max-h-96\"})})]},post.id);}):/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center\",children:[/*#__PURE__*/_jsx(Bookmark,{className:\"w-16 h-16 mx-auto mb-4 text-gray-300\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-medium mb-2 text-gray-600\",children:\"No saved posts yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Posts you save will appear here.\"})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900\",children:\"Groups\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-medium transition-colors border border-gray-300\",children:[/*#__PURE__*/_jsx(UserPlus,{className:\"w-4 h-4 inline mr-2\"}),\"Join Group\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[[{name:\"Fitness Enthusiasts\",members:1234,image:\"üèÉ‚Äç‚ôÇÔ∏è\"},{name:\"Healthy Recipes\",members:856,image:\"ü•ó\"},{name:\"Weight Loss Support\",members:2341,image:\"‚öñÔ∏è\"},{name:\"Marathon Runners\",members:567,image:\"üèÉ‚Äç‚ôÄÔ∏è\"}].map((group,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-sm border border-gray-200 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center text-white text-xl\",children:group.image}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900\",children:group.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[group.members.toLocaleString(),\" members\"]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-orange-50 hover:bg-orange-100 text-orange-600 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors\",children:\"View\"})]})},index)),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center\",children:[/*#__PURE__*/_jsx(UserPlus,{className:\"w-12 h-12 mx-auto mb-4 text-gray-300\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium mb-2 text-gray-600\",children:\"Join Groups\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-4\",children:\"Connect with like-minded people in nutrition and fitness groups.\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-gradient-to-r from-orange-500 to-red-500 text-white py-2 px-4 rounded-lg hover:from-orange-600 hover:to-red-600 transition-all duration-200 shadow-md\",children:\"Explore Groups\"})]})]})]})]})]}),showCreatePost&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[85vh] flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-4 border-b border-gray-200 flex-shrink-0\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-900\",children:\"Create New Post\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCreatePost(false),className:\"text-gray-400 hover:text-gray-600 transition-colors\",children:/*#__PURE__*/_jsx(X,{className:\"h-6 w-6\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 space-y-4 flex-1 overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"textarea\",{value:newPost.content,onChange:e=>setNewPost(_objectSpread(_objectSpread({},newPost),{},{content:e.target.value})),placeholder:\"What's going on?\",className:\"w-full border border-gray-300 rounded-lg p-4 resize-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors\",rows:4})}),newPost.imageFile&&/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:URL.createObjectURL(newPost.imageFile),alt:\"Preview\",className:\"w-full h-40 object-cover rounded-lg\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setNewPost(_objectSpread(_objectSpread({},newPost),{},{imageFile:null})),className:\"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors shadow-lg\",children:/*#__PURE__*/_jsx(X,{className:\"h-3 w-3\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border border-gray-200 rounded-lg p-3\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 mb-2\",children:\"Add to your post\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-4\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center space-x-2 bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded-lg cursor-pointer transition-colors\",children:[/*#__PURE__*/_jsx(Image,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:\"Upload Photo\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:e=>{var _e$target$files;const file=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0];if(file){setNewPost(_objectSpread(_objectSpread({},newPost),{},{imageFile:file}));}},className:\"hidden\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border border-gray-200 rounded-lg p-3\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 mb-3\",children:\"Privacy Settings\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-medium text-gray-700\",children:\"Allow comments\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"Let people comment on your post\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setNewPost(_objectSpread(_objectSpread({},newPost),{},{allowComments:!newPost.allowComments})),className:\"relative inline-flex h-6 w-11 items-center rounded-full transition-colors \".concat(newPost.allowComments?'bg-blue-600':'bg-gray-200'),children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-block h-4 w-4 transform rounded-full bg-white transition-transform \".concat(newPost.allowComments?'translate-x-6':'translate-x-1')})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-medium text-gray-700\",children:\"Hide like count\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"Only you will see the total number of likes\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setNewPost(_objectSpread(_objectSpread({},newPost),{},{hideLikeCount:!newPost.hideLikeCount})),className:\"relative inline-flex h-6 w-11 items-center rounded-full transition-colors \".concat(newPost.hideLikeCount?'bg-blue-600':'bg-gray-200'),children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-block h-4 w-4 transform rounded-full bg-white transition-transform \".concat(newPost.hideLikeCount?'translate-x-6':'translate-x-1')})})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-end space-x-3 p-4 border-t border-gray-200 bg-gray-50 flex-shrink-0\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCreatePost(false),className:\"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{console.log('SocialProfile Post button clicked',newPost);handleCreatePost();},disabled:!newPost.content.trim(),className:\"px-6 py-2 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 disabled:bg-gray-400 text-white rounded-lg font-medium transition-all duration-200 shadow-md hover:shadow-lg\",children:\"Post\"})]})]})}),showEditProfile&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Edit Profile\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Daily Calories\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:editProfileData.daily_calories||'',onChange:e=>setEditProfileData(prev=>_objectSpread(_objectSpread({},prev),{},{daily_calories:parseFloat(e.target.value)||0})),className:\"w-full border border-gray-300 rounded-lg p-2\",placeholder:\"2000\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Daily Protein (g)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:editProfileData.daily_protein||'',onChange:e=>setEditProfileData(prev=>_objectSpread(_objectSpread({},prev),{},{daily_protein:parseFloat(e.target.value)||0})),className:\"w-full border border-gray-300 rounded-lg p-2\",placeholder:\"150\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Current Weight (lbs)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:editProfileData.weight||'',onChange:e=>setEditProfileData(prev=>_objectSpread(_objectSpread({},prev),{},{weight:parseFloat(e.target.value)||0})),className:\"w-full border border-gray-300 rounded-lg p-2\",placeholder:\"150\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Target Weight (lbs)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:editProfileData.target_weight||'',onChange:e=>setEditProfileData(prev=>_objectSpread(_objectSpread({},prev),{},{target_weight:parseFloat(e.target.value)||0})),className:\"w-full border border-gray-300 rounded-lg p-2\",placeholder:\"140\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Height (inches)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:editProfileData.height||'',onChange:e=>setEditProfileData(prev=>_objectSpread(_objectSpread({},prev),{},{height:parseFloat(e.target.value)||0})),className:\"w-full border border-gray-300 rounded-lg p-2\",placeholder:\"70\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Age\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:editProfileData.age||'',onChange:e=>setEditProfileData(prev=>_objectSpread(_objectSpread({},prev),{},{age:parseFloat(e.target.value)||0})),className:\"w-full border border-gray-300 rounded-lg p-2\",placeholder:\"25\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Activity Level\"}),/*#__PURE__*/_jsxs(\"select\",{value:editProfileData.activity_level,onChange:e=>setEditProfileData(prev=>_objectSpread(_objectSpread({},prev),{},{activity_level:e.target.value})),className:\"w-full border border-gray-300 rounded-lg p-2\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"sedentary\",children:\"Sedentary\"}),/*#__PURE__*/_jsx(\"option\",{value:\"light\",children:\"Light\"}),/*#__PURE__*/_jsx(\"option\",{value:\"moderate\",children:\"Moderate\"}),/*#__PURE__*/_jsx(\"option\",{value:\"active\",children:\"Active\"}),/*#__PURE__*/_jsx(\"option\",{value:\"very_active\",children:\"Very Active\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Gender\"}),/*#__PURE__*/_jsxs(\"select\",{value:editProfileData.gender,onChange:e=>setEditProfileData(prev=>_objectSpread(_objectSpread({},prev),{},{gender:e.target.value})),className:\"w-full border border-gray-300 rounded-lg p-2\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"male\",children:\"Male\"}),/*#__PURE__*/_jsx(\"option\",{value:\"female\",children:\"Female\"}),/*#__PURE__*/_jsx(\"option\",{value:\"other\",children:\"Other\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Bio\"}),/*#__PURE__*/_jsx(\"textarea\",{value:editProfileData.bio||'',onChange:e=>setEditProfileData(prev=>_objectSpread(_objectSpread({},prev),{},{bio:e.target.value})),className:\"w-full border border-gray-300 rounded-lg p-2\",rows:3,placeholder:\"Tell us about yourself...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleEditProfile,className:\"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors\",children:\"Save Changes\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowEditProfile(false),className:\"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors\",children:\"Cancel\"})]})]})}),showFollowersModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl p-6 w-full max-w-md mx-4 max-h-96 overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-900\",children:\"Followers\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowFollowersModal(false),className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(X,{className:\"w-6 h-6\"})})]}),followers.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:followers.map(follower=>{var _follower$first_name,_follower$username;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 p-3 hover:bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-orange-500 rounded-full flex items-center justify-center text-white font-semibold\",children:((_follower$first_name=follower.first_name)===null||_follower$first_name===void 0?void 0:_follower$first_name.charAt(0))||((_follower$username=follower.username)===null||_follower$username===void 0?void 0:_follower$username.charAt(0))||'U'}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-medium text-gray-900\",children:[follower.first_name,\" \",follower.last_name]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[\"@\",follower.username]})]})]},follower.id);})}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(UserCircle,{className:\"w-16 h-16 text-gray-300 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"No followers yet\"})]})]})}),showFollowingModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl p-6 w-full max-w-md mx-4 max-h-96 overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-900\",children:\"Following\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowFollowingModal(false),className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(X,{className:\"w-6 h-6\"})})]}),following.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:following.map(user=>{var _user$first_name,_user$username;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 p-3 hover:bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-orange-500 rounded-full flex items-center justify-center text-white font-semibold\",children:((_user$first_name=user.first_name)===null||_user$first_name===void 0?void 0:_user$first_name.charAt(0))||((_user$username=user.username)===null||_user$username===void 0?void 0:_user$username.charAt(0))||'U'}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-medium text-gray-900\",children:[user.first_name,\" \",user.last_name]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[\"@\",user.username]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"text-sm bg-gray-200 hover:bg-gray-300 px-3 py-1 rounded-lg transition-colors\",children:\"Following\"})]},user.id);})}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(UserCircle,{className:\"w-16 h-16 text-gray-300 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Not following anyone yet\"})]})]})})]});};export default SocialProfile;","map":{"version":3,"names":["React","useState","useEffect","useAuth","Heart","MessageCircle","Share","MoreHorizontal","PenTool","Edit3","Bookmark","UserPlus","UserCircle","Image","X","format","startOfMonth","endOfMonth","eachDayOfInterval","isSameMonth","isToday","diaryAPI","mealsAPI","socialAPI","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SocialProfile","user","profileData","setProfileData","posts","setPosts","likedPosts","setLikedPosts","bookmarkedPosts","setBookmarkedPosts","loading","setLoading","activeTab","setActiveTab","showCreatePost","setShowCreatePost","newPost","setNewPost","content","imageFile","mealData","allowComments","hideLikeCount","showEditProfile","setShowEditProfile","showFollowersModal","setShowFollowersModal","showFollowingModal","setShowFollowingModal","followers","following","editProfileData","setEditProfileData","daily_calories","daily_protein","weight","target_weight","height","age","activity_level","gender","bio","streak","setStreak","streakLoading","setStreakLoading","todayNutrition","setTodayNutrition","currentDate","Date","monthData","setMonthData","nutritionLoading","calculateStreak","year","getFullYear","month","getMonth","response","data","days","daysWithData","filter","day","has_data","sort","a","b","date","getTime","isColored","calories_met","protein_met","console","log","concat","error","loadNutritionData","id","today","toISOString","split","mealsResponse","getByDate","meals","_profileData$profile","_profileData$profile2","length","totalCalories","reduce","sum","meal","calories","totalProtein","protein","totalCarbs","carbs","totalFat","fat","nutritionData","calorieGoal","profile","proteinGoal","loadCalendarData","handleMealDataChanged","handleStorageChange","e","key","window","addEventListener","removeEventListener","loadProfile","loadPosts","loadLikedPosts","loadBookmarkedPosts","retryCount","arguments","undefined","getProfile","createBasicProfile","_error$message","_axiosError$response","axiosError","status","Error","message","includes","name","setTimeout","basicProfileData","email","first_name","last_name","username","profile_picture","stats","isFollowing","openEditProfile","handleEditProfile","authData","JSON","parse","localStorage","getItem","token","fetch","process","env","REACT_APP_API_URL","method","headers","body","stringify","ok","getUserPosts","_error$message2","getLikedPosts","getBookmarkedPosts","handleLike","postId","likePost","map","post","_objectSpread","is_liked","likes_count","handleBookmark","bookmarkPost","is_bookmarked","handleCreatePost","formData","FormData","append","toString","createPost","result","created_at","existingLocalPosts","updatedLocalPosts","p","setItem","dispatchEvent","CustomEvent","detail","_axiosError$response2","_axiosError$response3","className","children","onClick","location","reload","src","alt","charAt","style","width","Math","min","round","monthStart","monthEnd","calendarDays","start","end","startPadding","getDay","paddedDays","Array","fill","push","slice","i","_monthData$days","dayData","find","d","hasActivity","caloriesMet","proteinMet","isCurrentDay","isCurrentMonth","bgColor","_profileData$profile3","toLocaleDateString","hour","minute","image_url","hide_like_count","allow_comments","comments_count","_post$user$first_name","_post$user$first_name2","members","image","group","index","toLocaleString","value","onChange","target","placeholder","rows","URL","createObjectURL","type","accept","_e$target$files","file","files","disabled","trim","prev","parseFloat","follower","_follower$first_name","_follower$username","_user$first_name","_user$username"],"sources":["C:/Users/arian/OneDrive/Desktop/Nutrition/client/src/components/SocialProfile.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { Heart, MessageCircle, Share, MoreHorizontal, PenTool, Edit3, Settings, Grid, Bookmark, UserPlus, UserCheck, UserCircle, Image, X } from 'lucide-react';\nimport { formatDistanceToNow, format, startOfMonth, endOfMonth, eachDayOfInterval, isSameMonth, isToday, addMonths, subMonths } from 'date-fns';\nimport { diaryAPI, mealsAPI, socialAPI } from '../services/api';\n\ninterface Post {\n  id: number;\n  content: string;\n  image_url: string | null;\n  meal_data: any;\n  likes_count: number;\n  comments_count: number;\n  is_liked: boolean;\n  is_bookmarked: boolean;\n  allow_comments?: boolean;\n  hide_like_count?: boolean;\n  created_at: string;\n  user: {\n    id: number;\n    username: string;\n    first_name: string;\n    last_name: string;\n    profile_picture?: string;\n  };\n}\n\ninterface ProfileData {\n  user: {\n    id: number;\n    email: string;\n    first_name: string;\n    last_name: string;\n    username: string;\n  };\n  profile: {\n    profile_picture: string;\n    bio: string;\n    daily_calories: number;\n    daily_protein: number;\n    weight: number;\n    target_weight: number;\n    height: number;\n    age: number;\n    activity_level: string;\n    gender: string;\n  };\n  stats: {\n    posts: number;\n    followers: number;\n    following: number;\n  };\n  isFollowing: boolean;\n}\n\nconst SocialProfile: React.FC = () => {\n  const { user } = useAuth();\n  const [profileData, setProfileData] = useState<ProfileData | null>(null);\n  const [posts, setPosts] = useState<Post[]>([]);\n  const [likedPosts, setLikedPosts] = useState<Post[]>([]);\n  const [bookmarkedPosts, setBookmarkedPosts] = useState<Post[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [activeTab, setActiveTab] = useState<'posts' | 'liked' | 'saved'>('posts');\n  const [showCreatePost, setShowCreatePost] = useState(false);\n  const [newPost, setNewPost] = useState({ \n    content: '', \n    imageFile: null as File | null, \n    mealData: null,\n    allowComments: true,\n    hideLikeCount: false\n  });\n  const [showEditProfile, setShowEditProfile] = useState(false);\n  const [showFollowersModal, setShowFollowersModal] = useState(false);\n  const [showFollowingModal, setShowFollowingModal] = useState(false);\n  const [followers] = useState<any[]>([]);\n  const [following] = useState<any[]>([]);\n  const [editProfileData, setEditProfileData] = useState({\n    daily_calories: 0,\n    daily_protein: 0,\n    weight: 0,\n    target_weight: 0,\n    height: 0,\n    age: 0,\n    activity_level: 'moderate',\n    gender: 'male',\n    bio: ''\n  });\n\n  // State for streak calculation\n  const [streak, setStreak] = useState(0);\n  const [streakLoading, setStreakLoading] = useState(true);\n  \n  // State for nutrition and calendar data\n  const [todayNutrition, setTodayNutrition] = useState<any>(null);\n  const [currentDate] = useState(new Date());\n  const [monthData, setMonthData] = useState<any>(null);\n  const [nutritionLoading] = useState(true);\n\n  // SIMPLE streak calculation - just count consecutive yellow/green squares\n  const calculateStreak = async () => {\n    try {\n      setStreakLoading(true);\n      \n      // Get current month data\n      const currentDate = new Date();\n      const year = currentDate.getFullYear();\n      const month = currentDate.getMonth() + 1;\n      \n      const response = await diaryAPI.getMonth(year, month);\n      const monthData = response.data;\n      \n      if (!monthData || !monthData.days) {\n        setStreak(0);\n        return;\n      }\n\n      // Get days with data, sorted by date (newest first)\n      const daysWithData = monthData.days\n        .filter((day: any) => day.has_data)\n        .sort((a: any, b: any) => new Date(b.date).getTime() - new Date(a.date).getTime());\n\n      let streak = 0;\n      \n      // Count consecutive colored squares from today backwards\n      for (const day of daysWithData) {\n        // Simple check: yellow = one goal met, green = both goals met\n        const isColored = day.calories_met || day.protein_met;\n        \n        if (isColored) {\n          streak++;\n          console.log(`Day ${day.date}: COLORED (calories: ${day.calories_met}, protein: ${day.protein_met}) - Streak: ${streak}`);\n        } else {\n          console.log(`Day ${day.date}: NOT colored - Streak stops at ${streak}`);\n          break;\n        }\n      }\n      \n      console.log(`FINAL STREAK: ${streak}`);\n      setStreak(streak);\n    } catch (error) {\n      console.error('Streak calculation failed:', error);\n      setStreak(0);\n    } finally {\n      setStreakLoading(false);\n    }\n  };\n\n  // Load nutrition data (same as Feed component)\n  const loadNutritionData = async () => {\n    try {\n      // setNutritionLoading(true); // Removed - no setter available\n      console.log('üìä Profile: Loading nutrition data...');\n      \n      if (!user?.id || !profileData) {\n        console.log('üìä Profile: No user or profile data available');\n        // setNutritionLoading(false); // Removed - no setter available\n        return;\n      }\n\n      // Load today's nutrition using same method as Overview/Feed\n      const today = new Date().toISOString().split('T')[0];\n      console.log('üìä Profile: Loading meals for date:', today);\n      \n      const mealsResponse = await mealsAPI.getByDate(today);\n      console.log('üìä Profile: Raw meals response:', mealsResponse);\n      \n      if (mealsResponse.data && mealsResponse.data.meals) {\n        const meals = mealsResponse.data.meals || [];\n        console.log('üìä Profile: Processing meals:', meals.length, 'meals found');\n        \n        const totalCalories = meals.reduce((sum: number, meal: any) => sum + (meal.calories || 0), 0);\n        const totalProtein = meals.reduce((sum: number, meal: any) => sum + (meal.protein || 0), 0);\n        const totalCarbs = meals.reduce((sum: number, meal: any) => sum + (meal.carbs || 0), 0);\n        const totalFat = meals.reduce((sum: number, meal: any) => sum + (meal.fat || 0), 0);\n        \n        const nutritionData = {\n          totalCalories: totalCalories,\n          totalProtein: totalProtein,\n          totalCarbs: totalCarbs,\n          totalFat: totalFat,\n          calorieGoal: profileData.profile?.daily_calories || 2000,\n          proteinGoal: profileData.profile?.daily_protein || 150,\n        };\n        \n        console.log('üìä Profile: Final calculated nutrition data:', nutritionData);\n        setTodayNutrition(nutritionData);\n      }\n    } catch (error) {\n      console.error('Error loading nutrition data:', error);\n    } finally {\n      // setNutritionLoading(false); // Removed - no setter available\n    }\n  };\n\n  // Load calendar data (same as Feed component)\n  const loadCalendarData = async () => {\n    try {\n      console.log('üìÖ Profile: Loading calendar data...');\n      const year = currentDate.getFullYear();\n      const month = currentDate.getMonth() + 1;\n      \n      const response = await diaryAPI.getMonth(year, month);\n      console.log('üìÖ Profile: Calendar response:', response);\n      \n      if (response.data) {\n        setMonthData(response.data);\n        console.log('üìÖ Profile: Calendar data loaded successfully');\n      }\n    } catch (error) {\n      console.error('Error loading calendar data:', error);\n    }\n  };\n\n  useEffect(() => {\n    if (profileData) {\n      calculateStreak();\n      loadNutritionData();\n      loadCalendarData();\n    }\n  }, [profileData]); // Functions are stable, no need to include in deps\n\n  // Listen for meal updates to refresh data\n  useEffect(() => {\n    const handleMealDataChanged = () => {\n      console.log('üìä Profile: Meal data changed event received, refreshing...');\n      loadNutritionData();\n      loadCalendarData();\n    };\n\n    const handleStorageChange = (e: StorageEvent) => {\n      if (e.key === 'mealAdded' || e.key === 'mealDeleted' || e.key === 'mealUpdated') {\n        console.log('üìä Profile: Storage event detected, refreshing...');\n        handleMealDataChanged();\n      }\n    };\n\n    // Listen for custom events (same tab)\n    window.addEventListener('mealDataChanged', handleMealDataChanged);\n    window.addEventListener('mealAdded', handleMealDataChanged);\n    window.addEventListener('mealUpdated', handleMealDataChanged);\n    window.addEventListener('mealDeleted', handleMealDataChanged);\n    \n    // Listen for storage events (cross-tab)\n    window.addEventListener('storage', handleStorageChange);\n    window.addEventListener('sidebarRefresh', handleMealDataChanged);\n\n    return () => {\n      window.removeEventListener('mealDataChanged', handleMealDataChanged);\n      window.removeEventListener('mealAdded', handleMealDataChanged);\n      window.removeEventListener('mealUpdated', handleMealDataChanged);\n      window.removeEventListener('mealDeleted', handleMealDataChanged);\n      window.removeEventListener('storage', handleStorageChange);\n      window.removeEventListener('sidebarRefresh', handleMealDataChanged);\n    };\n  }, [profileData]); // Functions are stable, no need to include in deps\n\n  useEffect(() => {\n    if (user) {\n      loadProfile();\n      loadPosts();\n    }\n  }, [user]); // Functions are stable, no need to include in deps\n\n  useEffect(() => {\n    if (user && activeTab === 'liked') {\n      loadLikedPosts();\n    } else if (user && activeTab === 'saved') {\n      loadBookmarkedPosts();\n    }\n  }, [user, activeTab]); // Functions are stable, no need to include in deps\n\n  const loadProfile = async (retryCount = 0) => {\n    try {\n      setLoading(true);\n      console.log('Loading profile for user ID:', user?.id);\n      \n      if (!user?.id) {\n        console.error('No user ID available');\n        setLoading(false);\n        return;\n      }\n      \n      // Use centralized socialAPI instead of direct fetch\n      const response = await socialAPI.getProfile(user.id);\n      console.log('Profile response:', response);\n      \n      if (response && response.data) {\n        console.log('Profile data received:', response.data);\n        setProfileData(response.data);\n      } else {\n        console.error('No profile data in response');\n        \n        // If profile doesn't exist, create a basic one\n        if (retryCount === 0) {\n          console.log('Attempting to create basic profile...');\n          await createBasicProfile();\n          return;\n        }\n      }\n    } catch (error) {\n      console.error('Error loading profile:', error);\n      \n      // Handle specific error cases\n      if (error && typeof error === 'object' && 'response' in error) {\n        const axiosError = error as any;\n        if (axiosError.response?.status === 404 && retryCount === 0) {\n          console.log('Profile not found (404), attempting to create basic profile...');\n          await createBasicProfile();\n          return;\n        }\n      }\n      \n      // Retry logic for network errors\n      if (retryCount < 3 && (error instanceof Error && (error.message?.includes('Failed to fetch') || error.name === 'TypeError'))) {\n        console.log(`Retrying profile load (attempt ${retryCount + 1})...`);\n        setTimeout(() => loadProfile(retryCount + 1), 1000 * (retryCount + 1));\n        return;\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const createBasicProfile = async () => {\n    try {\n      console.log('Creating basic profile for user:', user);\n      \n      // Create a basic profile structure\n      const basicProfileData: ProfileData = {\n        user: {\n          id: user?.id || 0,\n          email: user?.email || '',\n          first_name: user?.first_name || 'User',\n          last_name: user?.last_name || '',\n          username: user?.username || 'user'\n        },\n        profile: {\n          profile_picture: '',\n          bio: '',\n          daily_calories: 2000,\n          daily_protein: 150,\n          weight: 0,\n          target_weight: 0,\n          height: 0,\n          age: 0,\n          activity_level: 'moderate',\n          gender: 'male'\n        },\n        stats: {\n          posts: 0,\n          followers: 0,\n          following: 0\n        },\n        isFollowing: false\n      };\n      \n      setProfileData(basicProfileData);\n      console.log('Basic profile created successfully');\n      \n    } catch (error) {\n      console.error('Error creating basic profile:', error);\n    }\n  };\n\n  const openEditProfile = () => {\n    if (profileData) {\n      setEditProfileData({\n        daily_calories: profileData.profile.daily_calories || 0,\n        daily_protein: profileData.profile.daily_protein || 0,\n        weight: profileData.profile.weight || 0,\n        target_weight: profileData.profile.target_weight || 0,\n        height: profileData.profile.height || 0,\n        age: profileData.profile.age || 0,\n        activity_level: profileData.profile.activity_level || 'moderate',\n        gender: profileData.profile.gender || 'male',\n        bio: profileData.profile.bio || ''\n      });\n      setShowEditProfile(true);\n    }\n  };\n\n  const handleEditProfile = async () => {\n    try {\n      // Get token from proper auth system\n      const authData = JSON.parse(localStorage.getItem('nutritrack_auth_data') || '{}');\n      const token = authData.token || localStorage.getItem('token');\n      if (!token || !user?.id) return;\n\n      const response = await fetch(`${process.env.REACT_APP_API_URL || 'https://nutrition-back-jtf3.onrender.com'}/api/profile`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify(editProfileData)\n      });\n\n      if (response.ok) {\n        // Reload profile data\n        await loadProfile();\n        setShowEditProfile(false);\n        // You could add a success message here\n      } else {\n        console.error('Failed to update profile');\n      }\n    } catch (error) {\n      console.error('Error updating profile:', error);\n    }\n  };\n\n  const loadPosts = async (retryCount = 0) => {\n    try {\n      if (!user?.id) {\n        console.log('‚ùå No user ID available for loading posts');\n        return;\n      }\n      \n      console.log('üìã Loading posts for user:', user.id);\n      const response = await socialAPI.getUserPosts(user.id);\n      console.log('üìã Posts response:', response);\n      \n      if (response && response.data && response.data.posts) {\n        console.log('‚úÖ Loaded', response.data.posts.length, 'posts for profile');\n        setPosts(response.data.posts);\n      } else {\n        console.log('‚ö†Ô∏è No posts data in response');\n        setPosts([]);\n      }\n    } catch (error) {\n      console.error('‚ùå Error loading posts:', error);\n      \n      // Retry logic for network errors\n      if (retryCount < 3 && (error instanceof Error && (error.message?.includes('Failed to fetch') || error.name === 'TypeError'))) {\n        console.log(`Retrying posts load (attempt ${retryCount + 1})...`);\n        setTimeout(() => loadPosts(retryCount + 1), 1000 * (retryCount + 1));\n        return;\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadLikedPosts = async () => {\n    try {\n      if (!user?.id) {\n        console.log('‚ùå No user ID available for loading liked posts');\n        return;\n      }\n      \n      console.log('‚ù§Ô∏è Loading liked posts for user:', user.id);\n      const response = await socialAPI.getLikedPosts(user.id);\n      console.log('‚ù§Ô∏è Liked posts response:', response);\n      \n      if (response && response.data && response.data.posts) {\n        console.log('‚úÖ Loaded', response.data.posts.length, 'liked posts');\n        setLikedPosts(response.data.posts);\n      } else {\n        console.log('‚ö†Ô∏è No liked posts data in response');\n        setLikedPosts([]);\n      }\n    } catch (error) {\n      console.error('‚ùå Error loading liked posts:', error);\n      setLikedPosts([]);\n    }\n  };\n\n  const loadBookmarkedPosts = async () => {\n    try {\n      if (!user?.id) {\n        console.log('‚ùå No user ID available for loading bookmarked posts');\n        return;\n      }\n      \n      console.log('üîñ Loading bookmarked posts for user:', user.id);\n      const response = await socialAPI.getBookmarkedPosts(user.id);\n      console.log('üîñ Bookmarked posts response:', response);\n      \n      if (response && response.data && response.data.posts) {\n        console.log('‚úÖ Loaded', response.data.posts.length, 'bookmarked posts');\n        setBookmarkedPosts(response.data.posts);\n      } else {\n        console.log('‚ö†Ô∏è No bookmarked posts data in response');\n        setBookmarkedPosts([]);\n      }\n    } catch (error) {\n      console.error('‚ùå Error loading bookmarked posts:', error);\n      setBookmarkedPosts([]);\n    }\n  };\n\n  const handleLike = async (postId: number) => {\n    try {\n      await socialAPI.likePost(postId);\n      \n      // Update local state\n      setPosts(posts.map(post => \n        post.id === postId \n          ? { \n              ...post, \n              is_liked: !post.is_liked,\n              likes_count: post.is_liked ? post.likes_count - 1 : post.likes_count + 1\n            }\n          : post\n      ));\n    } catch (error) {\n      console.error('Error liking post:', error);\n    }\n  };\n\n  const handleBookmark = async (postId: number) => {\n    try {\n      await socialAPI.bookmarkPost(postId);\n      \n      // Update local state in all relevant arrays\n      setPosts(posts.map(post => \n        post.id === postId \n          ? { ...post, is_bookmarked: !post.is_bookmarked }\n          : post\n      ));\n      setLikedPosts(likedPosts.map(post => \n        post.id === postId \n          ? { ...post, is_bookmarked: !post.is_bookmarked }\n          : post\n      ));\n      setBookmarkedPosts(bookmarkedPosts.map(post => \n        post.id === postId \n          ? { ...post, is_bookmarked: !post.is_bookmarked }\n          : post\n      ));\n    } catch (error) {\n      console.error('Error bookmarking post:', error);\n    }\n  };\n\n  const handleCreatePost = async () => {\n    try {\n      const formData = new FormData();\n      formData.append('content', newPost.content);\n      formData.append('allowComments', newPost.allowComments.toString());\n      formData.append('hideLikeCount', newPost.hideLikeCount.toString());\n      \n      if (newPost.imageFile) {\n        formData.append('image', newPost.imageFile);\n      }\n      \n      if (newPost.mealData) {\n        formData.append('mealData', JSON.stringify(newPost.mealData));\n      }\n\n      const response = await socialAPI.createPost(formData);\n      \n      const result = response.data;\n      console.log('New post data:', result);\n      \n      // Ensure the post has proper user information\n      if (!result.created_at) {\n        result.created_at = new Date().toISOString();\n      }\n      \n      if (!result.user && user) {\n        result.user = {\n          id: user.id,\n          username: user.username,\n          first_name: user.first_name,\n          last_name: user.last_name,\n          profile_picture: user.profile_picture || undefined\n        };\n      }\n      \n      setNewPost({ \n        content: '', \n        imageFile: null, \n        mealData: null,\n        allowComments: true,\n        hideLikeCount: false\n      });\n      setShowCreatePost(false);\n      \n      // Store the new post in localStorage for persistence across navigation\n      const existingLocalPosts = JSON.parse(localStorage.getItem('local_posts') || '[]');\n      const updatedLocalPosts = [result, ...existingLocalPosts.filter((p: any) => p.id !== result.id)];\n      localStorage.setItem('local_posts', JSON.stringify(updatedLocalPosts));\n      console.log('üíæ SocialProfile: Stored post in localStorage for persistence');\n      \n      // Trigger a custom event to update the feed\n      window.dispatchEvent(new CustomEvent('postCreated', { detail: result }));\n      \n      loadPosts(); // Reload posts\n    } catch (error) {\n      console.error('Error creating post:', error);\n      if (error && typeof error === 'object' && 'response' in error) {\n        const axiosError = error as any;\n        console.error('Response error:', axiosError.response?.status, axiosError.response?.data);\n      }\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  if (!profileData) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 bg-gray-200 rounded-full mx-auto mb-4 flex items-center justify-center\">\n            <UserCircle className=\"w-8 h-8 text-gray-400\" />\n          </div>\n          <h3 className=\"text-xl font-medium mb-2\">Profile not found</h3>\n          <p className=\"text-gray-500 mb-4\">We couldn't load your profile information.</p>\n          <button\n            onClick={() => window.location.reload()}\n            className=\"bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            Try Again\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Background Header Section */}\n      <div className=\"relative h-64 bg-gradient-to-br from-green-400 via-blue-500 to-purple-600\">\n        {/* Background Image Placeholder */}\n        <div className=\"absolute inset-0 bg-black bg-opacity-20\"></div>\n        \n        {/* Profile Picture - Centered */}\n        <div className=\"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 z-50\">\n          <div className=\"relative\">\n            <div className=\"w-40 h-40 rounded-full bg-white p-1 shadow-xl\">\n              <div className=\"w-full h-full rounded-full bg-gradient-to-br from-orange-400 to-red-500 flex items-center justify-center text-white text-5xl font-bold overflow-hidden\">\n                {profileData.profile.profile_picture ? (\n                  <img \n                    src={profileData.profile.profile_picture} \n                    alt=\"Profile\" \n                    className=\"w-full h-full rounded-full object-cover\"\n                  />\n                ) : (\n                  (profileData.user.first_name && profileData.user.first_name.charAt(0)) || \n                  (profileData.user.username && profileData.user.username.charAt(0)) || \n                  'U'\n                )}\n              </div>\n            </div>\n            <button className=\"absolute bottom-2 right-2 bg-gradient-to-r from-orange-500 to-red-500 text-white p-3 rounded-full hover:from-orange-600 hover:to-red-600 transition-all duration-200 shadow-lg z-10\">\n              <PenTool className=\"w-5 h-5\" />\n            </button>\n          </div>\n        </div>\n\n        {/* Background Edit Button */}\n        <button className=\"absolute top-4 right-4 bg-white bg-opacity-90 hover:bg-opacity-100 text-gray-700 px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2 shadow-md\">\n          <Image className=\"w-4 h-4\" />\n          <span>Edit Background</span>\n        </button>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"max-w-6xl mx-auto px-4 pt-24 pb-8\">\n        {/* Profile Info Section - Compressed Layout */}\n        <div className=\"text-center mb-4\">\n          {/* Name and Edit Button Row */}\n          <div className=\"flex items-center justify-center space-x-4 mb-2\">\n            <h1 className=\"text-3xl font-bold text-gray-900\">{profileData.user.first_name} {profileData.user.last_name}</h1>\n            {!profileData.profile.daily_calories && !profileData.profile.weight ? (\n              <button className=\"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-6 py-2 rounded-lg font-medium transition-all duration-200 shadow-md\">\n                <Edit3 className=\"w-4 h-4 inline mr-2\" />\n                Complete Profile\n              </button>\n            ) : (\n              <button \n                onClick={openEditProfile}\n                className=\"bg-gray-100 hover:bg-gray-200 text-gray-700 px-6 py-2 rounded-lg font-medium transition-colors border border-gray-300\"\n              >\n                <Edit3 className=\"w-4 h-4 inline mr-2\" />\n                Edit Profile\n              </button>\n            )}\n          </div>\n          \n          {/* Username and Stats Row */}\n          <div className=\"flex items-center justify-center space-x-6 mb-3\">\n            <p className=\"text-gray-600\">@{profileData.user.username}</p>\n            \n            {/* Stats inline with username */}\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"text-center\">\n                <span className=\"text-lg font-bold text-orange-600\">{profileData.stats.posts}</span>\n                <span className=\"text-sm text-gray-600 ml-1\">Posts</span>\n              </div>\n              <div className=\"w-px h-4 bg-gray-300\"></div>\n              <button \n                className=\"text-center hover:bg-gray-50 rounded-lg px-2 py-1 transition-colors\"\n                onClick={() => setShowFollowersModal(true)}\n              >\n                <span className=\"text-lg font-bold text-orange-600 hover:text-orange-700\">{profileData.stats.followers}</span>\n                <span className=\"text-sm text-gray-600 ml-1\">Followers</span>\n              </button>\n              <div className=\"w-px h-4 bg-gray-300\"></div>\n              <button \n                className=\"text-center hover:bg-gray-50 rounded-lg px-2 py-1 transition-colors\"\n                onClick={() => setShowFollowingModal(true)}\n              >\n                <span className=\"text-lg font-bold text-orange-600 hover:text-orange-700\">{profileData.stats.following}</span>\n                <span className=\"text-sm text-gray-600 ml-1\">Following</span>\n              </button>\n            </div>\n          </div>\n          \n          {/* Bio */}\n          {profileData.profile.bio ? (\n            <p className=\"text-gray-700 max-w-md mx-auto text-sm\">{profileData.profile.bio}</p>\n          ) : (\n            <p className=\"text-gray-500 italic text-sm\">No bio yet</p>\n          )}\n        </div>\n\n        {/* Stats and Progress Section */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6\">\n          {/* Left Column - Activity & Streak */}\n          <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\n            <h3 className=\"font-semibold text-gray-900 mb-4\">Activity</h3>\n            \n            {/* Activity Level */}\n            <div className=\"flex justify-between items-center p-3 bg-gray-50 rounded-lg mb-6\">\n              <span className=\"text-sm font-medium text-gray-700\">Activity Level</span>\n              <span className=\"text-lg font-bold text-gray-900 capitalize\">\n                {profileData.profile.activity_level || 'Not set'}\n              </span>\n            </div>\n\n            {/* Daily Streak - Simplified */}\n            <div className=\"bg-gradient-to-br from-orange-500 to-red-500 rounded-xl p-6\">\n              <div className=\"text-center\">\n                <div className=\"flex items-center justify-center space-x-2 mb-3\">\n                  <span className=\"text-white text-2xl\">üî•</span>\n                  <span className=\"font-semibold text-white text-lg\">Daily Streak</span>\n                </div>\n                {streakLoading ? (\n                  <div className=\"text-white\">Loading...</div>\n                ) : streak > 0 ? (\n                  <div>\n                    <div className=\"text-4xl font-bold text-white mb-2\">{streak}</div>\n                    <div className=\"text-sm font-medium text-orange-100\">\n                      {streak === 1 ? 'Day' : 'Days'} Strong!\n                    </div>\n                  </div>\n                ) : (\n                  <div>\n                    <div className=\"text-3xl font-bold text-white mb-2\">0</div>\n                    <div className=\"text-sm font-medium text-orange-100\">Start Today!</div>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* Middle Column - Progress Bars */}\n          <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\n            <h3 className=\"font-semibold text-gray-900 mb-4\">Nutrition Goals</h3>\n            \n            {profileData.profile.daily_calories && todayNutrition ? (\n              <div className=\"space-y-6\">\n                {/* Calories Progress */}\n                <div>\n                  <div className=\"flex justify-between items-center mb-2\">\n                    <span className=\"text-sm font-medium text-gray-700\">Daily Calories</span>\n                    <span className=\"text-sm text-gray-600\">\n                      {todayNutrition.totalCalories} / {todayNutrition.calorieGoal} cal\n                    </span>\n                  </div>\n                  <div className=\"w-full bg-gray-200 rounded-full h-3\">\n                    <div \n                      className=\"bg-gradient-to-r from-orange-500 to-red-500 h-3 rounded-full\" \n                      style={{\n                        width: `${Math.min(100, Math.round((todayNutrition.totalCalories / todayNutrition.calorieGoal) * 100))}%`\n                      }}\n                    ></div>\n                  </div>\n                  <div className=\"text-xs text-gray-500 mt-1\">\n                    {Math.round((todayNutrition.totalCalories / todayNutrition.calorieGoal) * 100)}% of daily goal\n                  </div>\n                </div>\n\n                {/* Protein Progress */}\n                <div>\n                  <div className=\"flex justify-between items-center mb-2\">\n                    <span className=\"text-sm font-medium text-gray-700\">Daily Protein</span>\n                    <span className=\"text-sm text-gray-600\">\n                      {todayNutrition.totalProtein}g / {todayNutrition.proteinGoal}g\n                    </span>\n                  </div>\n                  <div className=\"w-full bg-gray-200 rounded-full h-3\">\n                    <div \n                      className=\"bg-gradient-to-r from-blue-500 to-purple-500 h-3 rounded-full\" \n                      style={{\n                        width: `${Math.min(100, Math.round((todayNutrition.totalProtein / todayNutrition.proteinGoal) * 100))}%`\n                      }}\n                    ></div>\n                  </div>\n                  <div className=\"text-xs text-gray-500 mt-1\">\n                    {Math.round((todayNutrition.totalProtein / todayNutrition.proteinGoal) * 100)}% of daily goal\n                  </div>\n                </div>\n\n                {/* Weight Progress */}\n                <div>\n                  <div className=\"flex justify-between items-center mb-2\">\n                    <span className=\"text-sm font-medium text-gray-700\">Weight Goal</span>\n                    <span className=\"text-sm text-gray-600\">{profileData.profile.weight} ‚Üí {profileData.profile.target_weight} lbs</span>\n                  </div>\n                  <div className=\"w-full bg-gray-200 rounded-full h-3\">\n                    <div className=\"bg-gradient-to-r from-green-500 to-teal-500 h-3 rounded-full\" style={{width: '40%'}}></div>\n                  </div>\n                  <div className=\"text-xs text-gray-500 mt-1\">40% to target weight</div>\n                </div>\n              </div>\n            ) : (\n              <div className=\"text-center py-8\">\n                <p className=\"text-gray-500 mb-4\">Set up your nutrition goals to track progress</p>\n                <button className=\"bg-gradient-to-r from-orange-500 to-red-500 text-white py-2 px-4 rounded-lg hover:from-orange-600 hover:to-red-600 transition-all duration-200 shadow-md\">\n                  Set Goals\n                </button>\n              </div>\n            )}\n          </div>\n\n          {/* Right Column - Mini Calendar */}\n          <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\n            <h3 className=\"font-semibold text-gray-900 mb-4\">Activity Calendar</h3>\n            \n            {/* Mini Calendar Grid */}\n            <div className=\"grid grid-cols-7 gap-1 text-xs\">\n              {/* Days of week header */}\n              {['M', 'T', 'W', 'T', 'F', 'S', 'S'].map((day) => (\n                <div key={day} className=\"text-center text-gray-500 font-medium p-1\">{day}</div>\n              ))}\n              \n              {/* Calendar days */}\n              {(() => {\n                const monthStart = startOfMonth(currentDate);\n                const monthEnd = endOfMonth(currentDate);\n                const calendarDays = eachDayOfInterval({ start: monthStart, end: monthEnd });\n                \n                // Pad the beginning to align with Monday start\n                const startPadding = (monthStart.getDay() + 6) % 7; // Convert Sunday=0 to Monday=0\n                const paddedDays = Array(startPadding).fill(null).concat(calendarDays);\n                \n                // Fill to 35 days (5 weeks)\n                while (paddedDays.length < 35) {\n                  paddedDays.push(null);\n                }\n                \n                return paddedDays.slice(0, 35).map((day, i) => {\n                  if (!day) {\n                    return <div key={i} className=\"aspect-square\"></div>;\n                  }\n                  \n                  const dayData = monthData?.days?.find((d: any) => \n                    d.date === format(day, 'yyyy-MM-dd')\n                  );\n                  \n                  const hasActivity = dayData?.has_data;\n                  const caloriesMet = dayData?.calories_met;\n                  const proteinMet = dayData?.protein_met;\n                  const isCurrentDay = isToday(day);\n                  const isCurrentMonth = isSameMonth(day, currentDate);\n                  \n                  let bgColor = 'bg-gray-100 text-gray-600';\n                  if (hasActivity) {\n                    if (caloriesMet && proteinMet) {\n                      bgColor = 'bg-orange-500 text-white'; // Both goals met\n                    } else if (caloriesMet || proteinMet) {\n                      bgColor = 'bg-orange-300 text-white'; // One goal met\n                    } else {\n                      bgColor = 'bg-orange-100 text-orange-600'; // Has data but no goals met\n                    }\n                  }\n                  \n                  if (isCurrentDay) {\n                    bgColor += ' ring-2 ring-orange-400';\n                  }\n                  \n                  return (\n                    <div\n                      key={i}\n                      className={`aspect-square rounded flex items-center justify-center text-xs ${bgColor} ${\n                        !isCurrentMonth ? 'opacity-30' : ''\n                      }`}\n                    >\n                      {format(day, 'd')}\n                    </div>\n                  );\n                });\n              })()}\n            </div>\n            \n            <div className=\"mt-4 text-xs text-gray-500\">\n              <div className=\"flex items-center space-x-4\">\n                <div className=\"flex items-center space-x-1\">\n                  <div className=\"w-3 h-3 bg-orange-500 rounded\"></div>\n                  <span>Goal met</span>\n                </div>\n                <div className=\"flex items-center space-x-1\">\n                  <div className=\"w-3 h-3 bg-gray-100 rounded border\"></div>\n                  <span>No activity</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Two Column Layout - Posts and Groups */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n          {/* Left Column - Posts (2 columns width) */}\n          <div className=\"lg:col-span-2\">\n            {/* Posts Header with Tabs */}\n            <div className=\"flex items-center justify-between mb-4\">\n              <div className=\"flex space-x-6\">\n                <button\n                  onClick={() => setActiveTab('posts')}\n                  className={`text-lg font-semibold transition-colors pb-2 border-b-2 ${\n                    activeTab === 'posts' \n                      ? 'text-orange-600 border-orange-600' \n                      : 'text-gray-500 border-transparent hover:text-gray-700'\n                  }`}\n                >\n                  Posts\n                </button>\n                <button\n                  onClick={() => setActiveTab('liked')}\n                  className={`text-lg font-semibold transition-colors pb-2 border-b-2 ${\n                    activeTab === 'liked' \n                      ? 'text-orange-600 border-orange-600' \n                      : 'text-gray-500 border-transparent hover:text-gray-700'\n                  }`}\n                >\n                  Liked\n                </button>\n                <button\n                  onClick={() => setActiveTab('saved')}\n                  className={`text-lg font-semibold transition-colors pb-2 border-b-2 ${\n                    activeTab === 'saved' \n                      ? 'text-orange-600 border-orange-600' \n                      : 'text-gray-500 border-transparent hover:text-gray-700'\n                  }`}\n                >\n                  Saved\n                </button>\n              </div>\n              <button\n                onClick={() => setShowCreatePost(true)}\n                className=\"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2 shadow-md\"\n              >\n                <PenTool className=\"w-4 h-4\" />\n                <span>New Post</span>\n              </button>\n            </div>\n            \n            {/* Posts Feed */}\n            <div className=\"space-y-6\">\n              {/* Posts Tab */}\n              {activeTab === 'posts' && (\n                <>\n                  {posts.length > 0 ? (\n                    posts.map((post) => (\n                  <div key={post.id} className=\"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden\">\n                    {/* Post Header */}\n                    <div className=\"flex items-center justify-between p-4\">\n                      <div className=\"flex items-center space-x-3\">\n                        {profileData?.profile?.profile_picture ? (\n                          <img\n                            src={profileData.profile.profile_picture}\n                            alt={`${user?.first_name} ${user?.last_name}`}\n                            className=\"w-10 h-10 rounded-full object-cover\"\n                          />\n                        ) : (\n                          <div className=\"w-10 h-10 bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center text-white font-semibold\">\n                            {(user?.first_name && user.first_name.charAt(0)) || 'U'}\n                          </div>\n                        )}\n                        <div>\n                          <h3 className=\"font-semibold text-gray-900\">\n                            {user?.first_name} {user?.last_name}\n                          </h3>\n                          <p className=\"text-sm text-gray-500\">\n                            {new Date(post.created_at).toLocaleDateString('en-US', {\n                              month: 'short',\n                              day: 'numeric',\n                              hour: 'numeric',\n                              minute: '2-digit'\n                            })}\n                          </p>\n                        </div>\n                      </div>\n                      <MoreHorizontal className=\"w-5 h-5 text-gray-400 cursor-pointer hover:text-gray-600\" />\n                    </div>\n\n                    {/* Post Content */}\n                    {post.content && (\n                      <div className=\"px-4 pb-3\">\n                        <p className=\"text-gray-900\">{post.content}</p>\n                      </div>\n                    )}\n\n                    {/* Post Image */}\n                    {post.image_url && (\n                      <div className=\"px-4 pb-3\">\n                        <img\n                          src={post.image_url}\n                          alt=\"Post content\"\n                          className=\"w-full rounded-lg object-cover max-h-96\"\n                        />\n                      </div>\n                    )}\n\n                    {/* Post Actions */}\n                    <div className=\"flex items-center justify-between px-4 py-3 border-t border-gray-100\">\n                      <div className=\"flex items-center space-x-4\">\n                        <button\n                          onClick={() => handleLike(post.id)}\n                          className={`flex items-center space-x-1 transition-colors ${\n                            post.is_liked ? 'text-red-600' : 'text-gray-600 hover:text-red-600'\n                          }`}\n                        >\n                          <Heart className={`w-5 h-5 ${post.is_liked ? 'fill-current' : ''}`} />\n                          {!post.hide_like_count && <span className=\"text-sm\">{post.likes_count}</span>}\n                        </button>\n                        \n                        {post.allow_comments && (\n                          <button className=\"flex items-center space-x-1 text-gray-600 hover:text-blue-600 transition-colors\">\n                            <MessageCircle className=\"w-5 h-5\" />\n                            <span className=\"text-sm\">{post.comments_count}</span>\n                          </button>\n                        )}\n                        \n                        <button className=\"flex items-center space-x-1 text-gray-600 hover:text-green-600 transition-colors\">\n                          <Share className=\"w-5 h-5\" />\n                        </button>\n                      </div>\n                      \n                      <button\n                        onClick={() => handleBookmark(post.id)}\n                        className={`flex items-center space-x-2 transition-colors ${\n                          post.is_bookmarked ? 'text-blue-500' : 'text-gray-400 hover:text-blue-500'\n                        }`}\n                      >\n                        <Bookmark className={`w-5 h-5 ${post.is_bookmarked ? 'fill-current' : ''}`} />\n                      </button>\n                    </div>\n                  </div>\n                    ))\n                  ) : (\n                    <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center\">\n                      <PenTool className=\"w-16 h-16 mx-auto mb-4 text-gray-300\" />\n                      <h3 className=\"text-xl font-medium mb-2 text-gray-600\">No posts yet!</h3>\n                      <p className=\"text-gray-500 mb-4\">When you share photos and videos, they'll appear here.</p>\n                      <button\n                        onClick={() => setShowCreatePost(true)}\n                        className=\"bg-gradient-to-r from-orange-500 to-red-500 text-white py-2 px-4 rounded-lg hover:from-orange-600 hover:to-red-600 transition-all duration-200 shadow-md\"\n                      >\n                        Share your first post\n                      </button>\n                    </div>\n                  )}\n                </>\n              )}\n\n              {/* Liked Posts Tab */}\n              {activeTab === 'liked' && (\n                <>\n                  {likedPosts.length > 0 ? (\n                    likedPosts.map((post) => (\n                      <div key={post.id} className=\"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden\">\n                        {/* Post content similar to above */}\n                        <div className=\"flex items-center justify-between p-4\">\n                          <div className=\"flex items-center space-x-3\">\n                            {post.user.profile_picture ? (\n                              <img\n                                src={post.user.profile_picture}\n                                alt={`${post.user.first_name} ${post.user.last_name}`}\n                                className=\"w-10 h-10 rounded-full object-cover\"\n                              />\n                            ) : (\n                              <div className=\"w-10 h-10 bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center text-white font-semibold\">\n                                {post.user.first_name?.charAt(0) || 'U'}\n                              </div>\n                            )}\n                            <div>\n                              <h3 className=\"font-semibold text-gray-900\">\n                                {post.user.first_name} {post.user.last_name}\n                              </h3>\n                              <p className=\"text-sm text-gray-500\">\n                                {new Date(post.created_at).toLocaleDateString('en-US', {\n                                  month: 'short',\n                                  day: 'numeric',\n                                  hour: 'numeric',\n                                  minute: '2-digit'\n                                })}\n                              </p>\n                            </div>\n                          </div>\n                        </div>\n                        {post.content && (\n                          <div className=\"px-4 pb-3\">\n                            <p className=\"text-gray-900\">{post.content}</p>\n                          </div>\n                        )}\n                        {post.image_url && (\n                          <div className=\"px-4 pb-3\">\n                            <img\n                              src={post.image_url}\n                              alt=\"Post content\"\n                              className=\"w-full rounded-lg object-cover max-h-96\"\n                            />\n                          </div>\n                        )}\n                      </div>\n                    ))\n                  ) : (\n                    <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center\">\n                      <Heart className=\"w-16 h-16 mx-auto mb-4 text-gray-300\" />\n                      <h3 className=\"text-xl font-medium mb-2 text-gray-600\">No liked posts yet</h3>\n                      <p className=\"text-gray-500\">Posts you like will appear here.</p>\n                    </div>\n                  )}\n                </>\n              )}\n\n              {/* Saved Posts Tab */}\n              {activeTab === 'saved' && (\n                <>\n                  {bookmarkedPosts.length > 0 ? (\n                    bookmarkedPosts.map((post) => (\n                      <div key={post.id} className=\"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden\">\n                        {/* Post content similar to above */}\n                        <div className=\"flex items-center justify-between p-4\">\n                          <div className=\"flex items-center space-x-3\">\n                            {post.user.profile_picture ? (\n                              <img\n                                src={post.user.profile_picture}\n                                alt={`${post.user.first_name} ${post.user.last_name}`}\n                                className=\"w-10 h-10 rounded-full object-cover\"\n                              />\n                            ) : (\n                              <div className=\"w-10 h-10 bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center text-white font-semibold\">\n                                {post.user.first_name?.charAt(0) || 'U'}\n                              </div>\n                            )}\n                            <div>\n                              <h3 className=\"font-semibold text-gray-900\">\n                                {post.user.first_name} {post.user.last_name}\n                              </h3>\n                              <p className=\"text-sm text-gray-500\">\n                                {new Date(post.created_at).toLocaleDateString('en-US', {\n                                  month: 'short',\n                                  day: 'numeric',\n                                  hour: 'numeric',\n                                  minute: '2-digit'\n                                })}\n                              </p>\n                            </div>\n                          </div>\n                        </div>\n                        {post.content && (\n                          <div className=\"px-4 pb-3\">\n                            <p className=\"text-gray-900\">{post.content}</p>\n                          </div>\n                        )}\n                        {post.image_url && (\n                          <div className=\"px-4 pb-3\">\n                            <img\n                              src={post.image_url}\n                              alt=\"Post content\"\n                              className=\"w-full rounded-lg object-cover max-h-96\"\n                            />\n                          </div>\n                        )}\n                      </div>\n                    ))\n                  ) : (\n                    <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center\">\n                      <Bookmark className=\"w-16 h-16 mx-auto mb-4 text-gray-300\" />\n                      <h3 className=\"text-xl font-medium mb-2 text-gray-600\">No saved posts yet</h3>\n                      <p className=\"text-gray-500\">Posts you save will appear here.</p>\n                    </div>\n                  )}\n                </>\n              )}\n            </div>\n          </div>\n\n          {/* Right Column - Groups */}\n          <div>\n            <div className=\"flex items-center justify-between mb-6\">\n              <h2 className=\"text-xl font-semibold text-gray-900\">Groups</h2>\n              <button className=\"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-medium transition-colors border border-gray-300\">\n                <UserPlus className=\"w-4 h-4 inline mr-2\" />\n                Join Group\n              </button>\n            </div>\n            \n            {/* Groups List */}\n            <div className=\"space-y-4\">\n              {/* Sample Groups - Replace with actual data */}\n              {[\n                { name: \"Fitness Enthusiasts\", members: 1234, image: \"üèÉ‚Äç‚ôÇÔ∏è\" },\n                { name: \"Healthy Recipes\", members: 856, image: \"ü•ó\" },\n                { name: \"Weight Loss Support\", members: 2341, image: \"‚öñÔ∏è\" },\n                { name: \"Marathon Runners\", members: 567, image: \"üèÉ‚Äç‚ôÄÔ∏è\" },\n              ].map((group, index) => (\n                <div key={index} className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-4\">\n                  <div className=\"flex items-center space-x-4\">\n                    <div className=\"w-12 h-12 bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center text-white text-xl\">\n                      {group.image}\n                    </div>\n                    <div className=\"flex-1\">\n                      <h3 className=\"font-semibold text-gray-900\">{group.name}</h3>\n                      <p className=\"text-sm text-gray-500\">{group.members.toLocaleString()} members</p>\n                    </div>\n                    <button className=\"bg-orange-50 hover:bg-orange-100 text-orange-600 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors\">\n                      View\n                    </button>\n                  </div>\n                </div>\n              ))}\n              \n              {/* No Groups Message */}\n              <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center\">\n                <UserPlus className=\"w-12 h-12 mx-auto mb-4 text-gray-300\" />\n                <h3 className=\"text-lg font-medium mb-2 text-gray-600\">Join Groups</h3>\n                <p className=\"text-gray-500 mb-4\">Connect with like-minded people in nutrition and fitness groups.</p>\n                <button className=\"bg-gradient-to-r from-orange-500 to-red-500 text-white py-2 px-4 rounded-lg hover:from-orange-600 hover:to-red-600 transition-all duration-200 shadow-md\">\n                  Explore Groups\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Create Post Modal */}\n      {showCreatePost && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[85vh] flex flex-col\">\n            {/* Modal Header */}\n            <div className=\"flex items-center justify-between p-4 border-b border-gray-200 flex-shrink-0\">\n              <h3 className=\"text-xl font-semibold text-gray-900\">Create New Post</h3>\n              <button\n                onClick={() => setShowCreatePost(false)}\n                className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n              >\n                <X className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            {/* Modal Body */}\n            <div className=\"p-4 space-y-4 flex-1 overflow-y-auto\">\n              {/* Text Input */}\n              <div>\n                <textarea\n                  value={newPost.content}\n                  onChange={(e) => setNewPost({ ...newPost, content: e.target.value })}\n                  placeholder=\"What's going on?\"\n                  className=\"w-full border border-gray-300 rounded-lg p-4 resize-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors\"\n                  rows={4}\n                />\n              </div>\n\n              {/* Image Preview */}\n              {newPost.imageFile && (\n                <div className=\"relative\">\n                  <img\n                    src={URL.createObjectURL(newPost.imageFile)}\n                    alt=\"Preview\"\n                    className=\"w-full h-40 object-cover rounded-lg\"\n                  />\n                  <button\n                    onClick={() => setNewPost({ ...newPost, imageFile: null })}\n                    className=\"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors shadow-lg\"\n                  >\n                    <X className=\"h-3 w-3\" />\n                  </button>\n                </div>\n              )}\n\n              {/* Upload Controls */}\n              <div className=\"border border-gray-200 rounded-lg p-3\">\n                <h4 className=\"font-medium text-gray-900 mb-2\">Add to your post</h4>\n                <div className=\"flex items-center space-x-4\">\n                  <label className=\"flex items-center space-x-2 bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded-lg cursor-pointer transition-colors\">\n                    <Image className=\"h-4 w-4\" />\n                    <span className=\"text-sm font-medium\">Upload Photo</span>\n                    <input\n                      type=\"file\"\n                      accept=\"image/*\"\n                      onChange={(e) => {\n                        const file = e.target.files?.[0];\n                        if (file) {\n                          setNewPost({ ...newPost, imageFile: file });\n                        }\n                      }}\n                      className=\"hidden\"\n                    />\n                  </label>\n                </div>\n              </div>\n\n              {/* Privacy Settings */}\n              <div className=\"border border-gray-200 rounded-lg p-3\">\n                <h4 className=\"font-medium text-gray-900 mb-3\">Privacy Settings</h4>\n                <div className=\"space-y-3\">\n                  {/* Allow Comments Toggle */}\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <label className=\"text-sm font-medium text-gray-700\">Allow comments</label>\n                      <p className=\"text-xs text-gray-500\">Let people comment on your post</p>\n                    </div>\n                    <button\n                      onClick={() => setNewPost({ ...newPost, allowComments: !newPost.allowComments })}\n                      className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${\n                        newPost.allowComments ? 'bg-blue-600' : 'bg-gray-200'\n                      }`}\n                    >\n                      <span\n                        className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${\n                          newPost.allowComments ? 'translate-x-6' : 'translate-x-1'\n                        }`}\n                      />\n                    </button>\n                  </div>\n\n                  {/* Hide Like Count Toggle */}\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <label className=\"text-sm font-medium text-gray-700\">Hide like count</label>\n                      <p className=\"text-xs text-gray-500\">Only you will see the total number of likes</p>\n                    </div>\n                    <button\n                      onClick={() => setNewPost({ ...newPost, hideLikeCount: !newPost.hideLikeCount })}\n                      className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${\n                        newPost.hideLikeCount ? 'bg-blue-600' : 'bg-gray-200'\n                      }`}\n                    >\n                      <span\n                        className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${\n                          newPost.hideLikeCount ? 'translate-x-6' : 'translate-x-1'\n                        }`}\n                      />\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Modal Footer */}\n            <div className=\"flex items-center justify-end space-x-3 p-4 border-t border-gray-200 bg-gray-50 flex-shrink-0\">\n              <button\n                onClick={() => setShowCreatePost(false)}\n                className=\"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={() => {\n                  console.log('SocialProfile Post button clicked', newPost);\n                  handleCreatePost();\n                }}\n                disabled={!newPost.content.trim()}\n                className=\"px-6 py-2 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 disabled:bg-gray-400 text-white rounded-lg font-medium transition-all duration-200 shadow-md hover:shadow-lg\"\n              >\n                Post\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Edit Profile Modal */}\n      {showEditProfile && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto\">\n            <h3 className=\"text-lg font-semibold mb-4\">Edit Profile</h3>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Daily Calories</label>\n                <input\n                  type=\"number\"\n                  value={editProfileData.daily_calories || ''}\n                  onChange={(e) => setEditProfileData(prev => ({ ...prev, daily_calories: parseFloat(e.target.value) || 0 }))}\n                  className=\"w-full border border-gray-300 rounded-lg p-2\"\n                  placeholder=\"2000\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Daily Protein (g)</label>\n                <input\n                  type=\"number\"\n                  value={editProfileData.daily_protein || ''}\n                  onChange={(e) => setEditProfileData(prev => ({ ...prev, daily_protein: parseFloat(e.target.value) || 0 }))}\n                  className=\"w-full border border-gray-300 rounded-lg p-2\"\n                  placeholder=\"150\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Current Weight (lbs)</label>\n                <input\n                  type=\"number\"\n                  value={editProfileData.weight || ''}\n                  onChange={(e) => setEditProfileData(prev => ({ ...prev, weight: parseFloat(e.target.value) || 0 }))}\n                  className=\"w-full border border-gray-300 rounded-lg p-2\"\n                  placeholder=\"150\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Target Weight (lbs)</label>\n                <input\n                  type=\"number\"\n                  value={editProfileData.target_weight || ''}\n                  onChange={(e) => setEditProfileData(prev => ({ ...prev, target_weight: parseFloat(e.target.value) || 0 }))}\n                  className=\"w-full border border-gray-300 rounded-lg p-2\"\n                  placeholder=\"140\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Height (inches)</label>\n                <input\n                  type=\"number\"\n                  value={editProfileData.height || ''}\n                  onChange={(e) => setEditProfileData(prev => ({ ...prev, height: parseFloat(e.target.value) || 0 }))}\n                  className=\"w-full border border-gray-300 rounded-lg p-2\"\n                  placeholder=\"70\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Age</label>\n                <input\n                  type=\"number\"\n                  value={editProfileData.age || ''}\n                  onChange={(e) => setEditProfileData(prev => ({ ...prev, age: parseFloat(e.target.value) || 0 }))}\n                  className=\"w-full border border-gray-300 rounded-lg p-2\"\n                  placeholder=\"25\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Activity Level</label>\n                <select\n                  value={editProfileData.activity_level}\n                  onChange={(e) => setEditProfileData(prev => ({ ...prev, activity_level: e.target.value }))}\n                  className=\"w-full border border-gray-300 rounded-lg p-2\"\n                >\n                  <option value=\"sedentary\">Sedentary</option>\n                  <option value=\"light\">Light</option>\n                  <option value=\"moderate\">Moderate</option>\n                  <option value=\"active\">Active</option>\n                  <option value=\"very_active\">Very Active</option>\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Gender</label>\n                <select\n                  value={editProfileData.gender}\n                  onChange={(e) => setEditProfileData(prev => ({ ...prev, gender: e.target.value }))}\n                  className=\"w-full border border-gray-300 rounded-lg p-2\"\n                >\n                  <option value=\"male\">Male</option>\n                  <option value=\"female\">Female</option>\n                  <option value=\"other\">Other</option>\n                </select>\n              </div>\n            </div>\n            \n            <div className=\"mb-4\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Bio</label>\n              <textarea\n                value={editProfileData.bio || ''}\n                onChange={(e) => setEditProfileData(prev => ({ ...prev, bio: e.target.value }))}\n                className=\"w-full border border-gray-300 rounded-lg p-2\"\n                rows={3}\n                placeholder=\"Tell us about yourself...\"\n              />\n            </div>\n            \n            <div className=\"flex space-x-3\">\n              <button\n                onClick={handleEditProfile}\n                className=\"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors\"\n              >\n                Save Changes\n              </button>\n              <button\n                onClick={() => setShowEditProfile(false)}\n                className=\"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors\"\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Followers Modal */}\n      {showFollowersModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-xl p-6 w-full max-w-md mx-4 max-h-96 overflow-y-auto\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h3 className=\"text-xl font-bold text-gray-900\">Followers</h3>\n              <button\n                onClick={() => setShowFollowersModal(false)}\n                className=\"text-gray-400 hover:text-gray-600\"\n              >\n                <X className=\"w-6 h-6\" />\n              </button>\n            </div>\n            \n            {followers.length > 0 ? (\n              <div className=\"space-y-3\">\n                {followers.map((follower) => (\n                  <div key={follower.id} className=\"flex items-center space-x-3 p-3 hover:bg-gray-50 rounded-lg\">\n                    <div className=\"w-10 h-10 bg-orange-500 rounded-full flex items-center justify-center text-white font-semibold\">\n                      {follower.first_name?.charAt(0) || follower.username?.charAt(0) || 'U'}\n                    </div>\n                    <div className=\"flex-1\">\n                      <div className=\"font-medium text-gray-900\">\n                        {follower.first_name} {follower.last_name}\n                      </div>\n                      <div className=\"text-sm text-gray-500\">@{follower.username}</div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"text-center py-8\">\n                <UserCircle className=\"w-16 h-16 text-gray-300 mx-auto mb-4\" />\n                <p className=\"text-gray-500\">No followers yet</p>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Following Modal */}\n      {showFollowingModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-xl p-6 w-full max-w-md mx-4 max-h-96 overflow-y-auto\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h3 className=\"text-xl font-bold text-gray-900\">Following</h3>\n              <button\n                onClick={() => setShowFollowingModal(false)}\n                className=\"text-gray-400 hover:text-gray-600\"\n              >\n                <X className=\"w-6 h-6\" />\n              </button>\n            </div>\n            \n            {following.length > 0 ? (\n              <div className=\"space-y-3\">\n                {following.map((user) => (\n                  <div key={user.id} className=\"flex items-center space-x-3 p-3 hover:bg-gray-50 rounded-lg\">\n                    <div className=\"w-10 h-10 bg-orange-500 rounded-full flex items-center justify-center text-white font-semibold\">\n                      {user.first_name?.charAt(0) || user.username?.charAt(0) || 'U'}\n                    </div>\n                    <div className=\"flex-1\">\n                      <div className=\"font-medium text-gray-900\">\n                        {user.first_name} {user.last_name}\n                      </div>\n                      <div className=\"text-sm text-gray-500\">@{user.username}</div>\n                    </div>\n                    <button className=\"text-sm bg-gray-200 hover:bg-gray-300 px-3 py-1 rounded-lg transition-colors\">\n                      Following\n                    </button>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"text-center py-8\">\n                <UserCircle className=\"w-16 h-16 text-gray-300 mx-auto mb-4\" />\n                <p className=\"text-gray-500\">Not following anyone yet</p>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SocialProfile;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}