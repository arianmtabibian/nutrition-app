{"ast":null,"code":"import _objectSpread from\"C:/Users/arian/OneDrive/Desktop/Nutrition/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{useAuth}from'../contexts/AuthContext';import{Heart,MessageCircle,Share,MoreHorizontal,PenTool,Bookmark,Image,X,ChevronLeft,ChevronRight}from'lucide-react';import{formatDistanceToNow,format,startOfMonth,endOfMonth,eachDayOfInterval,isToday,addMonths,subMonths}from'date-fns';import{useNavigate}from'react-router-dom';import{diaryAPI,mealsAPI,profileAPI}from'../services/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Feed=()=>{var _user$first_name,_user$username,_profileData$profile,_profileData$profile2,_profileData$profile3,_user$first_name2,_user$username2,_user$first_name4,_user$username4;const{user}=useAuth();const navigate=useNavigate();const[posts,setPosts]=useState([]);const[loading,setLoading]=useState(true);const[showCreatePost,setShowCreatePost]=useState(false);const[newPost,setNewPost]=useState({content:'',imageFile:null,mealData:null,allowComments:true,hideLikeCount:false});const[expandedComments,setExpandedComments]=useState(new Set());const[comments,setComments]=useState({});const[newComments,setNewComments]=useState({});const[loadingComments,setLoadingComments]=useState(new Set());// Sidebar data states\nconst[profileData,setProfileData]=useState(null);const[todayNutrition,setTodayNutrition]=useState(null);const[currentDate,setCurrentDate]=useState(new Date());const[monthData,setMonthData]=useState(null);const[sidebarLoading,setSidebarLoading]=useState(true);// Follow people search states\nconst[showFollowSearch,setShowFollowSearch]=useState(false);const[searchQuery,setSearchQuery]=useState('');const[searchResults,setSearchResults]=useState([]);const[searchLoading,setSearchLoading]=useState(false);const formatPostDate=dateString=>{const postDate=new Date(dateString);const today=new Date();const isToday=postDate.toDateString()===today.toDateString();if(isToday){return\"Today at \".concat(postDate.toLocaleTimeString('en-US',{hour:'numeric',minute:'2-digit',hour12:true}));}else{return formatDistanceToNow(postDate,{addSuffix:true});}};const loadMonthData=useCallback(async()=>{try{var _response$data$days,_response$data$days$f;const year=currentDate.getFullYear();const month=currentDate.getMonth()+1;console.log('ðŸ“… Feed Calendar: Loading month data for:',{year,month});// Use the EXACT same API call as Diary component\nconst response=await diaryAPI.getMonth(year,month);console.log('ðŸ“… Feed Calendar: Response received:',response.data);console.log('ðŸ“… Feed Calendar: Days with data:',((_response$data$days=response.data.days)===null||_response$data$days===void 0?void 0:(_response$data$days$f=_response$data$days.filter(d=>d.has_data))===null||_response$data$days$f===void 0?void 0:_response$data$days$f.length)||0);setMonthData(response.data);}catch(error){console.error('ðŸ“… Feed Calendar: Error loading month data:',error);setMonthData(null);}},[currentDate]);const loadSidebarData=useCallback(async()=>{if(!user)return;setSidebarLoading(true);try{console.log('ðŸ“Š Feed: Loading sidebar data...');// Load profile data using the same API as Overview - FIXED\nconst profileResponse=await profileAPI.get();console.log('ðŸ“Š Feed: Full profile response:',profileResponse.data);if(profileResponse.data){var _profileResponse$data,_profileResponse$data2,_profileResponse$data3;setProfileData(profileResponse.data);console.log('ðŸ“Š Feed: Profile data set:',{posts:(_profileResponse$data=profileResponse.data.profile)===null||_profileResponse$data===void 0?void 0:_profileResponse$data.posts_count,followers:(_profileResponse$data2=profileResponse.data.profile)===null||_profileResponse$data2===void 0?void 0:_profileResponse$data2.followers_count,following:(_profileResponse$data3=profileResponse.data.profile)===null||_profileResponse$data3===void 0?void 0:_profileResponse$data3.following_count});}// Load today's nutrition using EXACT same method as Overview - FIXED\nconst today=new Date().toISOString().split('T')[0];console.log('ðŸ“Š Feed: Loading meals for date:',today);const mealsResponse=await mealsAPI.getByDate(today);console.log('ðŸ“Š Feed: Raw meals response:',mealsResponse);console.log('ðŸ“Š Feed: Meals data:',mealsResponse.data);if(mealsResponse.data&&mealsResponse.data.meals){var _profileResponse$data4,_profileResponse$data5;// Calculate totals from meals (EXACT same as Overview)\nconst meals=mealsResponse.data.meals||[];console.log('ðŸ“Š Feed: Processing meals:',meals.length,'meals found');const totalCalories=meals.reduce((sum,meal)=>{console.log('ðŸ“Š Feed: Meal calories:',meal.calories);return sum+(meal.calories||0);},0);const totalProtein=meals.reduce((sum,meal)=>sum+(meal.protein||0),0);const totalCarbs=meals.reduce((sum,meal)=>sum+(meal.carbs||0),0);const totalFat=meals.reduce((sum,meal)=>sum+(meal.fat||0),0);// Create nutrition data object (same structure as Overview)\nconst nutritionData={totalCalories:totalCalories,totalProtein:totalProtein,totalCarbs:totalCarbs,totalFat:totalFat,calorieGoal:((_profileResponse$data4=profileResponse.data.profile)===null||_profileResponse$data4===void 0?void 0:_profileResponse$data4.daily_calories)||2000,proteinGoal:((_profileResponse$data5=profileResponse.data.profile)===null||_profileResponse$data5===void 0?void 0:_profileResponse$data5.daily_protein)||150};console.log('ðŸ“Š Feed: Final calculated nutrition data:',nutritionData);setTodayNutrition(nutritionData);}else{var _profileResponse$data6,_profileResponse$data7;console.log('ðŸ“Š Feed: No meals data found, setting empty nutrition');setTodayNutrition({totalCalories:0,totalProtein:0,totalCarbs:0,totalFat:0,calorieGoal:((_profileResponse$data6=profileResponse.data.profile)===null||_profileResponse$data6===void 0?void 0:_profileResponse$data6.daily_calories)||2000,proteinGoal:((_profileResponse$data7=profileResponse.data.profile)===null||_profileResponse$data7===void 0?void 0:_profileResponse$data7.daily_protein)||150});}// Load month data for calendar - FIXED\nawait loadMonthData();}catch(error){console.error('ðŸ“Š Feed: Error loading sidebar data:',error);// Set default nutrition data on error\nsetTodayNutrition({totalCalories:0,totalProtein:0,totalCarbs:0,totalFat:0,calorieGoal:2000,proteinGoal:150});}finally{setSidebarLoading(false);}},[user,loadMonthData]);const loadPosts=async()=>{try{const response=await fetch('/api/social/feed',{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('nutritrack_auth_data'))}});if(response.ok){const data=await response.json();setPosts(data);}}catch(error){console.error('Error loading posts:',error);}finally{setLoading(false);}};const handleLike=async postId=>{try{const response=await fetch(\"/api/social/posts/\".concat(postId,\"/like\"),{method:'POST',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('nutritrack_auth_data'))}});if(response.ok){const data=await response.json();setPosts(posts.map(post=>post.id===postId?_objectSpread(_objectSpread({},post),{},{is_liked:data.is_liked,likes_count:data.likes_count}):post));}}catch(error){console.error('Error liking post:',error);}};const handleBookmark=async postId=>{try{const response=await fetch(\"/api/social/posts/\".concat(postId,\"/bookmark\"),{method:'POST',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('nutritrack_auth_data'))}});if(response.ok){const data=await response.json();setPosts(posts.map(post=>post.id===postId?_objectSpread(_objectSpread({},post),{},{is_bookmarked:data.is_bookmarked}):post));}}catch(error){console.error('Error bookmarking post:',error);}};const toggleComments=async postId=>{if(expandedComments.has(postId)){setExpandedComments(prev=>{const newSet=new Set(prev);newSet.delete(postId);return newSet;});}else{setExpandedComments(prev=>{const newSet=new Set(prev);newSet.add(postId);return newSet;});if(!comments[postId]){setLoadingComments(prev=>{const newSet=new Set(prev);newSet.add(postId);return newSet;});try{const response=await fetch(\"/api/social/posts/\".concat(postId,\"/comments\"),{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('nutritrack_auth_data'))}});if(response.ok){const data=await response.json();setComments(prev=>_objectSpread(_objectSpread({},prev),{},{[postId]:data}));}}catch(error){console.error('Error loading comments:',error);}finally{setLoadingComments(prev=>{const newSet=new Set(prev);newSet.delete(postId);return newSet;});}}}};const handleAddComment=async postId=>{var _newComments$postId;const content=(_newComments$postId=newComments[postId])===null||_newComments$postId===void 0?void 0:_newComments$postId.trim();if(!content)return;try{const response=await fetch(\"/api/social/posts/\".concat(postId,\"/comments\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem('nutritrack_auth_data'))},body:JSON.stringify({content})});if(response.ok){const newComment=await response.json();setComments(prev=>_objectSpread(_objectSpread({},prev),{},{[postId]:[...(prev[postId]||[]),newComment]}));setNewComments(prev=>_objectSpread(_objectSpread({},prev),{},{[postId]:''}));setPosts(posts.map(post=>post.id===postId?_objectSpread(_objectSpread({},post),{},{comments_count:post.comments_count+1}):post));}}catch(error){console.error('Error adding comment:',error);}};const handleCreatePost=async()=>{if(!newPost.content.trim()&&!newPost.imageFile)return;const formData=new FormData();formData.append('content',newPost.content);if(newPost.imageFile){formData.append('image',newPost.imageFile);}if(newPost.mealData){formData.append('meal_data',JSON.stringify(newPost.mealData));}formData.append('allow_comments',newPost.allowComments.toString());formData.append('hide_like_count',newPost.hideLikeCount.toString());try{const response=await fetch('/api/social/posts',{method:'POST',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('nutritrack_auth_data'))},body:formData});if(response.ok){const newPostData=await response.json();setPosts([newPostData,...posts]);setNewPost({content:'',imageFile:null,mealData:null,allowComments:true,hideLikeCount:false});setShowCreatePost(false);}}catch(error){console.error('Error creating post:',error);}};const handleImageUpload=event=>{var _event$target$files;const file=(_event$target$files=event.target.files)===null||_event$target$files===void 0?void 0:_event$target$files[0];if(file){setNewPost(prev=>_objectSpread(_objectSpread({},prev),{},{imageFile:file}));}};const searchUsers=async query=>{if(!query.trim()){setSearchResults([]);return;}setSearchLoading(true);try{const response=await fetch(\"/api/social/users/search?q=\".concat(encodeURIComponent(query)),{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('nutritrack_auth_data'))}});if(response.ok){const data=await response.json();setSearchResults(data);}}catch(error){console.error('Error searching users:',error);}finally{setSearchLoading(false);}};const handleFollow=async userId=>{try{const response=await fetch(\"/api/social/users/\".concat(userId,\"/follow\"),{method:'POST',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('nutritrack_auth_data'))}});if(response.ok){setSearchResults(searchResults.map(user=>user.id===userId?_objectSpread(_objectSpread({},user),{},{is_following:!user.is_following}):user));}}catch(error){console.error('Error following user:',error);}};useEffect(()=>{if(user){console.log('ðŸ”§ Feed: Loading posts...');loadPosts();}},[user]);useEffect(()=>{console.log('ðŸ”§ Feed: Month data effect triggered');loadMonthData();},[loadMonthData]);// Force data load when user becomes available\nuseEffect(()=>{if(user){console.log('ðŸ”§ Feed: User available, loading data immediately...');loadSidebarData();loadMonthData();}},[user]);// Trigger when user changes\n// Enhanced automatic syncing with Overview page - IMPROVED\nuseEffect(()=>{const handleMealDataChanged=()=>{console.log('ðŸ“Š Feed: Meal data changed event received, auto-syncing...');loadSidebarData();loadMonthData();// Also refresh calendar when meals change\n};const handleStorageChange=e=>{if(e.key==='mealAdded'||e.key==='mealDeleted'||e.key==='mealUpdated'){console.log('ðŸ“Š Feed: Storage event detected, auto-syncing...');handleMealDataChanged();}};// Listen for custom events (same tab)\nwindow.addEventListener('mealDataChanged',handleMealDataChanged);window.addEventListener('mealAdded',handleMealDataChanged);window.addEventListener('mealUpdated',handleMealDataChanged);window.addEventListener('mealDeleted',handleMealDataChanged);// Listen for storage events (cross-tab)\nwindow.addEventListener('storage',handleStorageChange);// Also listen for sidebar refresh events from other components\nwindow.addEventListener('sidebarRefresh',handleMealDataChanged);return()=>{window.removeEventListener('mealDataChanged',handleMealDataChanged);window.removeEventListener('mealAdded',handleMealDataChanged);window.removeEventListener('mealUpdated',handleMealDataChanged);window.removeEventListener('mealDeleted',handleMealDataChanged);window.removeEventListener('storage',handleStorageChange);window.removeEventListener('sidebarRefresh',handleMealDataChanged);};},[loadSidebarData,loadMonthData]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"})});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-6 max-w-7xl mx-auto p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-80 flex-shrink-0 sticky top-6 self-start space-y-6 max-h-[calc(100vh-3rem)] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 relative overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-0 right-0 w-16 h-16 bg-blue-50 rounded-full -translate-y-8 translate-x-8\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-0 left-0 w-12 h-12 bg-purple-50 rounded-full translate-y-6 -translate-x-6\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative text-center\",children:[user!==null&&user!==void 0&&user.profile_picture?/*#__PURE__*/_jsxs(\"div\",{className:\"relative inline-block\",children:[/*#__PURE__*/_jsx(\"img\",{src:user.profile_picture,alt:\"Profile\",className:\"w-20 h-20 rounded-full mx-auto mb-4 object-cover ring-3 ring-blue-100 shadow-md\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-3 border-white\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"relative inline-block\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-20 h-20 rounded-full bg-blue-500 flex items-center justify-center text-white text-xl font-semibold mx-auto mb-4 ring-3 ring-blue-100 shadow-md\",children:(user===null||user===void 0?void 0:(_user$first_name=user.first_name)===null||_user$first_name===void 0?void 0:_user$first_name.charAt(0))||(user===null||user===void 0?void 0:(_user$username=user.username)===null||_user$username===void 0?void 0:_user$username.charAt(0))||'U'}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-3 border-white\"})]}),/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-1\",children:[user===null||user===void 0?void 0:user.first_name,\" \",user===null||user===void 0?void 0:user.last_name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-500 mb-4\",children:[\"@\",user===null||user===void 0?void 0:user.username]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-bold text-blue-600\",children:(profileData===null||profileData===void 0?void 0:(_profileData$profile=profileData.profile)===null||_profileData$profile===void 0?void 0:_profileData$profile.posts_count)||0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"Posts\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-bold text-green-600\",children:(profileData===null||profileData===void 0?void 0:(_profileData$profile2=profileData.profile)===null||_profileData$profile2===void 0?void 0:_profileData$profile2.following_count)||0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"Following\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-bold text-purple-600\",children:(profileData===null||profileData===void 0?void 0:(_profileData$profile3=profileData.profile)===null||_profileData$profile3===void 0?void 0:_profileData$profile3.followers_count)||0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"Followers\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowFollowSearch(true),className:\"w-full bg-gradient-to-r from-orange-500 to-orange-600 text-white py-2.5 px-4 rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all duration-200 font-medium shadow-lg hover:shadow-xl transform hover:scale-105\",children:\"Find People\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 relative overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-0 right-0 w-14 h-14 bg-green-50 rounded-full -translate-y-7 translate-x-7\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4 relative\",children:\"Today's Nutrition\"}),todayNutrition?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4 relative\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Calories\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold text-gray-900\",children:[todayNutrition.totalCalories||0,\" / \",todayNutrition.calorieGoal||2000]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-100 rounded-full h-2.5 shadow-inner\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-orange-500 h-2.5 rounded-full transition-all duration-300\",style:{width:\"\".concat(Math.min(100,(todayNutrition.totalCalories||0)/(todayNutrition.calorieGoal||2000)*100),\"%\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mt-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Protein\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold text-gray-900\",children:[todayNutrition.totalProtein||0,\"g / \",todayNutrition.proteinGoal||150,\"g\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-100 rounded-full h-2.5 shadow-inner\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-500 h-2.5 rounded-full transition-all duration-300\",style:{width:\"\".concat(Math.min(100,(todayNutrition.totalProtein||0)/(todayNutrition.proteinGoal||150)*100),\"%\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center bg-yellow-50 rounded-lg p-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-yellow-600 font-semibold text-sm\",children:[todayNutrition.totalCarbs||0,\"g\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 text-xs\",children:\"Carbs\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center bg-red-50 rounded-lg p-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-red-600 font-semibold text-sm\",children:[todayNutrition.totalFat||0,\"g\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 text-xs\",children:\"Fat\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center bg-blue-50 rounded-lg p-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-blue-600 font-semibold text-sm\",children:[Math.round((todayNutrition.totalCalories||0)/(todayNutrition.calorieGoal||2000)*100),\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 text-xs\",children:\"Goal\"})]})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-center py-6 relative\",children:\"No nutrition data for today\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 relative overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-0 left-0 w-16 h-16 bg-purple-50 rounded-full translate-y-8 -translate-x-8\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4 relative\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Calendar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentDate(subMonths(currentDate,1)),className:\"p-2 hover:bg-gray-100 rounded-lg transition-colors\",children:/*#__PURE__*/_jsx(ChevronLeft,{className:\"w-4 h-4 text-gray-500\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentDate(addMonths(currentDate,1)),className:\"p-2 hover:bg-gray-100 rounded-lg transition-colors\",children:/*#__PURE__*/_jsx(ChevronRight,{className:\"w-4 h-4 text-gray-500\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mb-3 relative\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900 bg-gray-50 rounded-lg py-2 px-3\",children:format(currentDate,'MMMM yyyy')})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-7 gap-1 text-xs relative\",children:[['S','M','T','W','T','F','S'].map(day=>/*#__PURE__*/_jsx(\"div\",{className:\"text-center p-2 text-gray-500 font-medium\",children:day},day)),eachDayOfInterval({start:startOfMonth(currentDate),end:endOfMonth(currentDate)}).map(day=>{var _monthData$days;const dayData=monthData===null||monthData===void 0?void 0:(_monthData$days=monthData.days)===null||_monthData$days===void 0?void 0:_monthData$days.find(d=>new Date(d.date).getDate()===day.getDate());const hasData=dayData===null||dayData===void 0?void 0:dayData.has_data;const isCurrentDay=isToday(day);return/*#__PURE__*/_jsx(\"div\",{className:\"\\n                        text-center p-2 rounded-lg text-sm font-medium transition-all duration-200\\n                        \".concat(isCurrentDay?'bg-orange-500 text-white shadow-md':'',\"\\n                        \").concat(hasData&&!isCurrentDay?'bg-green-100 text-green-700':'',\"\\n                        \").concat(!hasData&&!isCurrentDay?'text-gray-400 hover:bg-gray-50':'',\"\\n                      \"),children:day.getDate()},day.toISOString());})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 space-y-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCreatePost(true),className:\"w-full bg-white border border-gray-200 rounded-lg p-4 text-left hover:bg-gray-50 transition-colors shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-full bg-orange-500 flex items-center justify-center text-white font-semibold\",children:(user===null||user===void 0?void 0:(_user$first_name2=user.first_name)===null||_user$first_name2===void 0?void 0:_user$first_name2.charAt(0))||(user===null||user===void 0?void 0:(_user$username2=user.username)===null||_user$username2===void 0?void 0:_user$username2.charAt(0))||'U'}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"What's on your mind?\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[posts.length===0&&!loading&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-200 rounded-lg shadow-sm p-8 text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(MessageCircle,{className:\"w-8 h-8 text-orange-500\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:\"No posts yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"Your feed is empty. Start connecting with others to see their posts!\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row gap-3 justify-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowFollowSearch(true),className:\"px-4 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all duration-200 font-medium shadow-md hover:shadow-lg transform hover:scale-105\",children:\"Find Friends\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{/* Navigate to groups when implemented */},className:\"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium\",children:\"Browse Groups\"})]})]}),posts.map(post=>{var _post$user$first_name,_post$user$username,_user$first_name3,_user$username3,_newComments$post$id,_comments$post$id;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-200 rounded-lg shadow-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-4 border-b border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 rounded-full bg-orange-500 flex items-center justify-center text-white text-sm font-semibold\",children:((_post$user$first_name=post.user.first_name)===null||_post$user$first_name===void 0?void 0:_post$user$first_name.charAt(0))||((_post$user$username=post.user.username)===null||_post$user$username===void 0?void 0:_post$user$username.charAt(0))}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-semibold text-gray-900\",children:[post.user.first_name,\" \",post.user.last_name]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:formatPostDate(post.created_at)})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(MoreHorizontal,{className:\"w-5 h-5\"})})]}),post.content&&/*#__PURE__*/_jsx(\"div\",{className:\"p-4\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-900\",children:post.content})}),post.image_url&&/*#__PURE__*/_jsx(\"div\",{className:\"w-full\",children:/*#__PURE__*/_jsx(\"img\",{src:post.image_url,alt:\"Post\",className:\"w-full object-cover\"})}),post.meal_data&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-gray-50 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900 mb-2\",children:\"Meal Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-4 gap-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold text-orange-600\",children:post.meal_data.calories||0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-600\",children:\"Calories\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-semibold text-green-600\",children:[post.meal_data.protein||0,\"g\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-600\",children:\"Protein\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-semibold text-yellow-600\",children:[post.meal_data.carbs||0,\"g\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-600\",children:\"Carbs\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-semibold text-red-600\",children:[post.meal_data.fat||0,\"g\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-600\",children:\"Fat\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-3 border-t border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-6\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleLike(post.id),className:\"flex items-center space-x-2 \".concat(post.is_liked?'text-red-500':'text-gray-500 hover:text-red-500'),children:[/*#__PURE__*/_jsx(Heart,{className:\"w-5 h-5 \".concat(post.is_liked?'fill-current':'')}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:post.likes_count})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>toggleComments(post.id),className:\"flex items-center space-x-2 text-gray-500 hover:text-orange-500\",children:[/*#__PURE__*/_jsx(MessageCircle,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:post.comments_count})]}),/*#__PURE__*/_jsx(\"button\",{className:\"text-gray-500 hover:text-orange-500\",children:/*#__PURE__*/_jsx(Share,{className:\"w-5 h-5\"})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleBookmark(post.id),className:\"\".concat(post.is_bookmarked?'text-orange-500':'text-gray-500 hover:text-orange-500'),children:/*#__PURE__*/_jsx(Bookmark,{className:\"w-5 h-5 \".concat(post.is_bookmarked?'fill-current':'')})})]})}),expandedComments.has(post.id)&&/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-3 border-t border-gray-200 bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 rounded-full bg-orange-500 flex items-center justify-center text-white text-sm font-semibold\",children:(user===null||user===void 0?void 0:(_user$first_name3=user.first_name)===null||_user$first_name3===void 0?void 0:_user$first_name3.charAt(0))||(user===null||user===void 0?void 0:(_user$username3=user.username)===null||_user$username3===void 0?void 0:_user$username3.charAt(0))||'U'}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Add a comment...\",value:newComments[post.id]||'',onChange:e=>setNewComments(prev=>_objectSpread(_objectSpread({},prev),{},{[post.id]:e.target.value})),className:\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500\",onKeyPress:e=>e.key==='Enter'&&handleAddComment(post.id)}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAddComment(post.id),disabled:!((_newComments$post$id=newComments[post.id])!==null&&_newComments$post$id!==void 0&&_newComments$post$id.trim()),className:\"px-4 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-md hover:shadow-lg\",children:\"Post\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:(_comments$post$id=comments[post.id])===null||_comments$post$id===void 0?void 0:_comments$post$id.map(comment=>{var _comment$user$first_n,_comment$user$usernam;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 rounded-full bg-orange-500 flex items-center justify-center text-white text-sm font-semibold\",children:((_comment$user$first_n=comment.user.first_name)===null||_comment$user$first_n===void 0?void 0:_comment$user$first_n.charAt(0))||((_comment$user$usernam=comment.user.username)===null||_comment$user$usernam===void 0?void 0:_comment$user$usernam.charAt(0))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-semibold text-sm text-gray-900\",children:[comment.user.first_name,\" \",comment.user.last_name]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-700\",children:comment.content})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 mt-1\",children:formatDistanceToNow(new Date(comment.created_at),{addSuffix:true})})]})]},comment.id);})})]})]},post.id);})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-80 flex-shrink-0 sticky top-6 self-start space-y-6 max-h-[calc(100vh-3rem)] overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 relative overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-0 right-0 w-14 h-14 bg-indigo-50 rounded-full -translate-y-7 translate-x-7\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6 relative\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Groups\"}),/*#__PURE__*/_jsx(\"button\",{className:\"text-blue-600 hover:text-blue-700 text-sm font-medium bg-blue-50 hover:bg-blue-100 px-3 py-1 rounded-full transition-colors\",children:\"See All\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 relative\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-50 cursor-pointer transition-colors group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-green-500 flex items-center justify-center shadow-sm\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-semibold text-sm\",children:\"VG\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900 group-hover:text-green-600 transition-colors\",children:\"Vegan Recipes\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"1.2k members\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-50 cursor-pointer transition-colors group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-blue-500 flex items-center justify-center shadow-sm\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-semibold text-sm\",children:\"FT\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900 group-hover:text-blue-600 transition-colors\",children:\"Fitness Goals\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"856 members\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-50 cursor-pointer transition-colors group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-purple-500 flex items-center justify-center shadow-sm\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-semibold text-sm\",children:\"WL\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900 group-hover:text-purple-600 transition-colors\",children:\"Weight Loss\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"2.1k members\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-50 cursor-pointer transition-colors group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-orange-500 flex items-center justify-center shadow-sm\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-semibold text-sm\",children:\"KT\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900 group-hover:text-orange-600 transition-colors\",children:\"Keto Diet\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"643 members\"})]})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"w-full mt-6 bg-gradient-to-r from-orange-500 to-orange-600 text-white py-2.5 px-4 rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all duration-200 font-medium shadow-lg hover:shadow-xl transform hover:scale-105\",children:\"Create Group\"})]})})]})}),showCreatePost&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-gray-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-6 border-b border-gray-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(PenTool,{className:\"w-4 h-4 text-orange-600\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900\",children:\"Create Post\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCreatePost(false),className:\"text-gray-400 hover:text-gray-600 p-2 hover:bg-gray-100 rounded-lg transition-colors\",children:/*#__PURE__*/_jsx(X,{className:\"w-5 h-5\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 rounded-full bg-orange-500 flex items-center justify-center text-white font-semibold shadow-md\",children:(user===null||user===void 0?void 0:(_user$first_name4=user.first_name)===null||_user$first_name4===void 0?void 0:_user$first_name4.charAt(0))||(user===null||user===void 0?void 0:(_user$username4=user.username)===null||_user$username4===void 0?void 0:_user$username4.charAt(0))||'U'}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"What's on your mind?\",value:newPost.content,onChange:e=>setNewPost(prev=>_objectSpread(_objectSpread({},prev),{},{content:e.target.value})),className:\"w-full p-4 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-300 resize-none bg-gray-50 hover:bg-white transition-colors\",rows:5})})]}),newPost.imageFile&&/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:URL.createObjectURL(newPost.imageFile),alt:\"Preview\",className:\"w-full h-64 object-cover rounded-lg\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setNewPost(prev=>_objectSpread(_objectSpread({},prev),{},{imageFile:null})),className:\"absolute top-2 right-2 bg-black bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-70\",children:/*#__PURE__*/_jsx(X,{className:\"w-4 h-4\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-xl p-4 space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-5 h-5 bg-orange-100 rounded flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-orange-500 rounded-full\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold text-gray-900\",children:\"Post Settings\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center space-x-3 cursor-pointer p-3 bg-white rounded-lg border border-gray-200 hover:border-orange-300 transition-colors\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:newPost.allowComments,onChange:e=>setNewPost(prev=>_objectSpread(_objectSpread({},prev),{},{allowComments:e.target.checked})),className:\"rounded border-gray-300 text-orange-600 focus:ring-orange-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-700\",children:\"Allow comments\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center space-x-3 cursor-pointer p-3 bg-white rounded-lg border border-gray-200 hover:border-orange-300 transition-colors\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:newPost.hideLikeCount,onChange:e=>setNewPost(prev=>_objectSpread(_objectSpread({},prev),{},{hideLikeCount:e.target.checked})),className:\"rounded border-gray-300 text-orange-600 focus:ring-orange-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-700\",children:\"Hide like count\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between pt-6 border-t border-gray-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-4\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center space-x-3 text-gray-600 hover:text-orange-600 cursor-pointer p-2 hover:bg-orange-50 rounded-lg transition-colors\",children:[/*#__PURE__*/_jsx(Image,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:\"Add Photo\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleImageUpload,className:\"hidden\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCreatePost(false),className:\"px-6 py-2.5 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors font-medium\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCreatePost,disabled:!newPost.content.trim()&&!newPost.imageFile,className:\"px-6 py-2.5 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium shadow-lg hover:shadow-xl transform hover:scale-105\",children:\"Share Post\"})]})]})]})]})}),showFollowSearch&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-6 border-b border-gray-100\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900\",children:\"Find People\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowFollowSearch(false),className:\"text-gray-400 hover:text-gray-600 p-2 hover:bg-gray-100 rounded-full transition-colors\",children:/*#__PURE__*/_jsx(X,{className:\"w-5 h-5\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search for people...\",value:searchQuery,onChange:e=>{setSearchQuery(e.target.value);searchUsers(e.target.value);},className:\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"})}),searchLoading?/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center py-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:searchResults.map(user=>{var _user$first_name5,_user$username5;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-4 hover:bg-gray-50 rounded-xl transition-colors\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-semibold\",children:((_user$first_name5=user.first_name)===null||_user$first_name5===void 0?void 0:_user$first_name5.charAt(0))||((_user$username5=user.username)===null||_user$username5===void 0?void 0:_user$username5.charAt(0))}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-medium text-gray-900\",children:[user.first_name,\" \",user.last_name]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[\"@\",user.username]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleFollow(user.id),className:\"px-4 py-2 rounded-xl font-medium transition-all duration-200 \".concat(user.is_following?'bg-gray-200 text-gray-700 hover:bg-gray-300':'bg-gradient-to-r from-orange-500 to-orange-600 text-white hover:from-orange-600 hover:to-orange-700 shadow-md hover:shadow-lg'),children:user.is_following?'Following':'Follow'})]},user.id);})})]})]})})]});};export default Feed;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useAuth","Heart","MessageCircle","Share","MoreHorizontal","PenTool","Bookmark","Image","X","ChevronLeft","ChevronRight","formatDistanceToNow","format","startOfMonth","endOfMonth","eachDayOfInterval","isToday","addMonths","subMonths","useNavigate","diaryAPI","mealsAPI","profileAPI","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Feed","_user$first_name","_user$username","_profileData$profile","_profileData$profile2","_profileData$profile3","_user$first_name2","_user$username2","_user$first_name4","_user$username4","user","navigate","posts","setPosts","loading","setLoading","showCreatePost","setShowCreatePost","newPost","setNewPost","content","imageFile","mealData","allowComments","hideLikeCount","expandedComments","setExpandedComments","Set","comments","setComments","newComments","setNewComments","loadingComments","setLoadingComments","profileData","setProfileData","todayNutrition","setTodayNutrition","currentDate","setCurrentDate","Date","monthData","setMonthData","sidebarLoading","setSidebarLoading","showFollowSearch","setShowFollowSearch","searchQuery","setSearchQuery","searchResults","setSearchResults","searchLoading","setSearchLoading","formatPostDate","dateString","postDate","today","toDateString","concat","toLocaleTimeString","hour","minute","hour12","addSuffix","loadMonthData","_response$data$days","_response$data$days$f","year","getFullYear","month","getMonth","console","log","response","data","days","filter","d","has_data","length","error","loadSidebarData","profileResponse","get","_profileResponse$data","_profileResponse$data2","_profileResponse$data3","profile","posts_count","followers","followers_count","following","following_count","toISOString","split","mealsResponse","getByDate","meals","_profileResponse$data4","_profileResponse$data5","totalCalories","reduce","sum","meal","calories","totalProtein","protein","totalCarbs","carbs","totalFat","fat","nutritionData","calorieGoal","daily_calories","proteinGoal","daily_protein","_profileResponse$data6","_profileResponse$data7","loadPosts","fetch","headers","localStorage","getItem","ok","json","handleLike","postId","method","map","post","id","_objectSpread","is_liked","likes_count","handleBookmark","is_bookmarked","toggleComments","has","prev","newSet","delete","add","handleAddComment","_newComments$postId","trim","body","JSON","stringify","newComment","comments_count","handleCreatePost","formData","FormData","append","toString","newPostData","handleImageUpload","event","_event$target$files","file","target","files","searchUsers","query","encodeURIComponent","handleFollow","userId","is_following","handleMealDataChanged","handleStorageChange","e","key","window","addEventListener","removeEventListener","className","children","profile_picture","src","alt","first_name","charAt","username","last_name","onClick","style","width","Math","min","round","day","start","end","_monthData$days","dayData","find","date","getDate","hasData","isCurrentDay","_post$user$first_name","_post$user$username","_user$first_name3","_user$username3","_newComments$post$id","_comments$post$id","created_at","image_url","meal_data","type","placeholder","value","onChange","onKeyPress","disabled","comment","_comment$user$first_n","_comment$user$usernam","rows","URL","createObjectURL","checked","accept","_user$first_name5","_user$username5"],"sources":["C:/Users/arian/OneDrive/Desktop/Nutrition/client/src/components/Feed.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { Heart, MessageCircle, Share, MoreHorizontal, PenTool, Bookmark, Image, X, Plus, UserCircle, Calendar, TrendingUp, TrendingDown, BarChart3, ChevronLeft, ChevronRight } from 'lucide-react';\r\nimport { formatDistanceToNow, format, startOfMonth, endOfMonth, eachDayOfInterval, isSameMonth, isToday, addMonths, subMonths } from 'date-fns';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { diaryAPI, mealsAPI, profileAPI } from '../services/api';\r\n\r\ninterface Post {\r\n  id: number;\r\n  content: string;\r\n  image_url: string | null;\r\n  meal_data: any;\r\n  likes_count: number;\r\n  comments_count: number;\r\n  is_liked: boolean;\r\n  is_bookmarked: boolean;\r\n  allow_comments?: boolean;\r\n  hide_like_count?: boolean;\r\n  created_at: string;\r\n  user: {\r\n    id: number;\r\n    username: string;\r\n    first_name: string;\r\n    last_name: string;\r\n    profile_picture?: string;\r\n  };\r\n}\r\n\r\ninterface Comment {\r\n  id: number;\r\n  content: string;\r\n  created_at: string;\r\n  user: {\r\n    id: number;\r\n    username: string;\r\n    first_name: string;\r\n    last_name: string;\r\n    profile_picture?: string;\r\n  };\r\n}\r\n\r\nconst Feed: React.FC = () => {\r\n  const { user } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [posts, setPosts] = useState<Post[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showCreatePost, setShowCreatePost] = useState(false);\r\n  const [newPost, setNewPost] = useState({ \r\n    content: '', \r\n    imageFile: null as File | null, \r\n    mealData: null,\r\n    allowComments: true,\r\n    hideLikeCount: false\r\n  });\r\n  const [expandedComments, setExpandedComments] = useState<Set<number>>(new Set());\r\n  const [comments, setComments] = useState<{ [postId: number]: Comment[] }>({});\r\n  const [newComments, setNewComments] = useState<{ [postId: number]: string }>({});\r\n  const [loadingComments, setLoadingComments] = useState<Set<number>>(new Set());\r\n  \r\n  // Sidebar data states\r\n  const [profileData, setProfileData] = useState<any>(null);\r\n  const [todayNutrition, setTodayNutrition] = useState<any>(null);\r\n  const [currentDate, setCurrentDate] = useState(new Date());\r\n  const [monthData, setMonthData] = useState<any>(null);\r\n  const [sidebarLoading, setSidebarLoading] = useState(true);\r\n  \r\n  // Follow people search states\r\n  const [showFollowSearch, setShowFollowSearch] = useState(false);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [searchResults, setSearchResults] = useState<any[]>([]);\r\n  const [searchLoading, setSearchLoading] = useState(false);\r\n\r\n  const formatPostDate = (dateString: string) => {\r\n    const postDate = new Date(dateString);\r\n    const today = new Date();\r\n    const isToday = postDate.toDateString() === today.toDateString();\r\n    \r\n    if (isToday) {\r\n      return `Today at ${postDate.toLocaleTimeString('en-US', { \r\n        hour: 'numeric', \r\n        minute: '2-digit', \r\n        hour12: true \r\n      })}`;\r\n    } else {\r\n      return formatDistanceToNow(postDate, { addSuffix: true });\r\n    }\r\n  };\r\n\r\n  const loadMonthData = useCallback(async () => {\r\n    try {\r\n      const year = currentDate.getFullYear();\r\n      const month = currentDate.getMonth() + 1;\r\n      \r\n      console.log('ðŸ“… Feed Calendar: Loading month data for:', { year, month });\r\n      \r\n      // Use the EXACT same API call as Diary component\r\n      const response = await diaryAPI.getMonth(year, month);\r\n      \r\n      console.log('ðŸ“… Feed Calendar: Response received:', response.data);\r\n      console.log('ðŸ“… Feed Calendar: Days with data:', response.data.days?.filter((d: any) => d.has_data)?.length || 0);\r\n      \r\n      setMonthData(response.data);\r\n    } catch (error) {\r\n      console.error('ðŸ“… Feed Calendar: Error loading month data:', error);\r\n      setMonthData(null);\r\n    }\r\n  }, [currentDate]);\r\n\r\n  const loadSidebarData = useCallback(async () => {\r\n    if (!user) return;\r\n    \r\n    setSidebarLoading(true);\r\n    try {\r\n      console.log('ðŸ“Š Feed: Loading sidebar data...');\r\n      \r\n      // Load profile data using the same API as Overview - FIXED\r\n      const profileResponse = await profileAPI.get();\r\n      console.log('ðŸ“Š Feed: Full profile response:', profileResponse.data);\r\n      \r\n      if (profileResponse.data) {\r\n        setProfileData(profileResponse.data);\r\n        console.log('ðŸ“Š Feed: Profile data set:', {\r\n          posts: profileResponse.data.profile?.posts_count,\r\n          followers: profileResponse.data.profile?.followers_count,\r\n          following: profileResponse.data.profile?.following_count\r\n        });\r\n      }\r\n\r\n      // Load today's nutrition using EXACT same method as Overview - FIXED\r\n      const today = new Date().toISOString().split('T')[0];\r\n      console.log('ðŸ“Š Feed: Loading meals for date:', today);\r\n      \r\n      const mealsResponse = await mealsAPI.getByDate(today);\r\n      console.log('ðŸ“Š Feed: Raw meals response:', mealsResponse);\r\n      console.log('ðŸ“Š Feed: Meals data:', mealsResponse.data);\r\n      \r\n      if (mealsResponse.data && mealsResponse.data.meals) {\r\n        // Calculate totals from meals (EXACT same as Overview)\r\n        const meals = mealsResponse.data.meals || [];\r\n        console.log('ðŸ“Š Feed: Processing meals:', meals.length, 'meals found');\r\n        \r\n        const totalCalories = meals.reduce((sum: number, meal: any) => {\r\n          console.log('ðŸ“Š Feed: Meal calories:', meal.calories);\r\n          return sum + (meal.calories || 0);\r\n        }, 0);\r\n        const totalProtein = meals.reduce((sum: number, meal: any) => sum + (meal.protein || 0), 0);\r\n        const totalCarbs = meals.reduce((sum: number, meal: any) => sum + (meal.carbs || 0), 0);\r\n        const totalFat = meals.reduce((sum: number, meal: any) => sum + (meal.fat || 0), 0);\r\n        \r\n        // Create nutrition data object (same structure as Overview)\r\n        const nutritionData = {\r\n          totalCalories: totalCalories,\r\n          totalProtein: totalProtein,\r\n          totalCarbs: totalCarbs,\r\n          totalFat: totalFat,\r\n          calorieGoal: profileResponse.data.profile?.daily_calories || 2000,\r\n          proteinGoal: profileResponse.data.profile?.daily_protein || 150,\r\n        };\r\n        \r\n        console.log('ðŸ“Š Feed: Final calculated nutrition data:', nutritionData);\r\n        setTodayNutrition(nutritionData);\r\n      } else {\r\n        console.log('ðŸ“Š Feed: No meals data found, setting empty nutrition');\r\n        setTodayNutrition({\r\n          totalCalories: 0,\r\n          totalProtein: 0,\r\n          totalCarbs: 0,\r\n          totalFat: 0,\r\n          calorieGoal: profileResponse.data.profile?.daily_calories || 2000,\r\n          proteinGoal: profileResponse.data.profile?.daily_protein || 150,\r\n        });\r\n      }\r\n\r\n      // Load month data for calendar - FIXED\r\n      await loadMonthData();\r\n      \r\n    } catch (error) {\r\n      console.error('ðŸ“Š Feed: Error loading sidebar data:', error);\r\n      // Set default nutrition data on error\r\n      setTodayNutrition({\r\n        totalCalories: 0,\r\n        totalProtein: 0,\r\n        totalCarbs: 0,\r\n        totalFat: 0,\r\n        calorieGoal: 2000,\r\n        proteinGoal: 150,\r\n      });\r\n    } finally {\r\n      setSidebarLoading(false);\r\n    }\r\n  }, [user, loadMonthData]);\r\n\r\n  const loadPosts = async () => {\r\n    try {\r\n      const response = await fetch('/api/social/feed', {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('nutritrack_auth_data')}`\r\n        }\r\n      });\r\n      \r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setPosts(data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading posts:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleLike = async (postId: number) => {\r\n    try {\r\n      const response = await fetch(`/api/social/posts/${postId}/like`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('nutritrack_auth_data')}`\r\n        }\r\n      });\r\n      \r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setPosts(posts.map(post => \r\n          post.id === postId \r\n            ? { ...post, is_liked: data.is_liked, likes_count: data.likes_count }\r\n            : post\r\n        ));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error liking post:', error);\r\n    }\r\n  };\r\n\r\n  const handleBookmark = async (postId: number) => {\r\n    try {\r\n      const response = await fetch(`/api/social/posts/${postId}/bookmark`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('nutritrack_auth_data')}`\r\n        }\r\n      });\r\n      \r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setPosts(posts.map(post => \r\n          post.id === postId \r\n            ? { ...post, is_bookmarked: data.is_bookmarked }\r\n            : post\r\n        ));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error bookmarking post:', error);\r\n    }\r\n  };\r\n\r\n  const toggleComments = async (postId: number) => {\r\n    if (expandedComments.has(postId)) {\r\n      setExpandedComments(prev => {\r\n        const newSet = new Set(prev);\r\n        newSet.delete(postId);\r\n        return newSet;\r\n      });\r\n    } else {\r\n      setExpandedComments(prev => {\r\n        const newSet = new Set(prev);\r\n        newSet.add(postId);\r\n        return newSet;\r\n      });\r\n      \r\n      if (!comments[postId]) {\r\n        setLoadingComments(prev => {\r\n          const newSet = new Set(prev);\r\n          newSet.add(postId);\r\n          return newSet;\r\n        });\r\n        \r\n        try {\r\n          const response = await fetch(`/api/social/posts/${postId}/comments`, {\r\n            headers: {\r\n              'Authorization': `Bearer ${localStorage.getItem('nutritrack_auth_data')}`\r\n            }\r\n          });\r\n          \r\n          if (response.ok) {\r\n            const data = await response.json();\r\n            setComments(prev => ({ ...prev, [postId]: data }));\r\n          }\r\n        } catch (error) {\r\n          console.error('Error loading comments:', error);\r\n        } finally {\r\n          setLoadingComments(prev => {\r\n            const newSet = new Set(prev);\r\n            newSet.delete(postId);\r\n            return newSet;\r\n          });\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleAddComment = async (postId: number) => {\r\n    const content = newComments[postId]?.trim();\r\n    if (!content) return;\r\n\r\n    try {\r\n      const response = await fetch(`/api/social/posts/${postId}/comments`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.getItem('nutritrack_auth_data')}`\r\n        },\r\n        body: JSON.stringify({ content })\r\n      });\r\n\r\n      if (response.ok) {\r\n        const newComment = await response.json();\r\n        setComments(prev => ({\r\n          ...prev,\r\n          [postId]: [...(prev[postId] || []), newComment]\r\n        }));\r\n        setNewComments(prev => ({ ...prev, [postId]: '' }));\r\n        \r\n        setPosts(posts.map(post => \r\n          post.id === postId \r\n            ? { ...post, comments_count: post.comments_count + 1 }\r\n            : post\r\n        ));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error adding comment:', error);\r\n    }\r\n  };\r\n\r\n  const handleCreatePost = async () => {\r\n    if (!newPost.content.trim() && !newPost.imageFile) return;\r\n\r\n    const formData = new FormData();\r\n    formData.append('content', newPost.content);\r\n    if (newPost.imageFile) {\r\n      formData.append('image', newPost.imageFile);\r\n    }\r\n    if (newPost.mealData) {\r\n      formData.append('meal_data', JSON.stringify(newPost.mealData));\r\n    }\r\n    formData.append('allow_comments', newPost.allowComments.toString());\r\n    formData.append('hide_like_count', newPost.hideLikeCount.toString());\r\n\r\n    try {\r\n      const response = await fetch('/api/social/posts', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('nutritrack_auth_data')}`\r\n        },\r\n        body: formData\r\n      });\r\n\r\n      if (response.ok) {\r\n        const newPostData = await response.json();\r\n        setPosts([newPostData, ...posts]);\r\n        setNewPost({\r\n          content: '',\r\n          imageFile: null,\r\n          mealData: null,\r\n          allowComments: true,\r\n          hideLikeCount: false\r\n        });\r\n        setShowCreatePost(false);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error creating post:', error);\r\n    }\r\n  };\r\n\r\n  const handleImageUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (file) {\r\n      setNewPost(prev => ({ ...prev, imageFile: file }));\r\n    }\r\n  };\r\n\r\n  const searchUsers = async (query: string) => {\r\n    if (!query.trim()) {\r\n      setSearchResults([]);\r\n      return;\r\n    }\r\n\r\n    setSearchLoading(true);\r\n    try {\r\n      const response = await fetch(`/api/social/users/search?q=${encodeURIComponent(query)}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('nutritrack_auth_data')}`\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setSearchResults(data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error searching users:', error);\r\n    } finally {\r\n      setSearchLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleFollow = async (userId: number) => {\r\n    try {\r\n      const response = await fetch(`/api/social/users/${userId}/follow`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('nutritrack_auth_data')}`\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        setSearchResults(searchResults.map(user =>\r\n          user.id === userId\r\n            ? { ...user, is_following: !user.is_following }\r\n            : user\r\n        ));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error following user:', error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      console.log('ðŸ”§ Feed: Loading posts...');\r\n      loadPosts();\r\n    }\r\n  }, [user]);\r\n\r\n  useEffect(() => {\r\n    console.log('ðŸ”§ Feed: Month data effect triggered');\r\n    loadMonthData();\r\n  }, [loadMonthData]);\r\n\r\n  // Force data load when user becomes available\r\n  useEffect(() => {\r\n    if (user) {\r\n      console.log('ðŸ”§ Feed: User available, loading data immediately...');\r\n      loadSidebarData();\r\n      loadMonthData();\r\n    }\r\n  }, [user]); // Trigger when user changes\r\n\r\n  // Enhanced automatic syncing with Overview page - IMPROVED\r\n  useEffect(() => {\r\n    const handleMealDataChanged = () => {\r\n      console.log('ðŸ“Š Feed: Meal data changed event received, auto-syncing...');\r\n      loadSidebarData();\r\n      loadMonthData(); // Also refresh calendar when meals change\r\n    };\r\n\r\n    const handleStorageChange = (e: StorageEvent) => {\r\n      if (e.key === 'mealAdded' || e.key === 'mealDeleted' || e.key === 'mealUpdated') {\r\n        console.log('ðŸ“Š Feed: Storage event detected, auto-syncing...');\r\n        handleMealDataChanged();\r\n      }\r\n    };\r\n\r\n    // Listen for custom events (same tab)\r\n    window.addEventListener('mealDataChanged', handleMealDataChanged);\r\n    window.addEventListener('mealAdded', handleMealDataChanged);\r\n    window.addEventListener('mealUpdated', handleMealDataChanged);\r\n    window.addEventListener('mealDeleted', handleMealDataChanged);\r\n    \r\n    // Listen for storage events (cross-tab)\r\n    window.addEventListener('storage', handleStorageChange);\r\n\r\n    // Also listen for sidebar refresh events from other components\r\n    window.addEventListener('sidebarRefresh', handleMealDataChanged);\r\n\r\n    return () => {\r\n      window.removeEventListener('mealDataChanged', handleMealDataChanged);\r\n      window.removeEventListener('mealAdded', handleMealDataChanged);\r\n      window.removeEventListener('mealUpdated', handleMealDataChanged);\r\n      window.removeEventListener('mealDeleted', handleMealDataChanged);\r\n      window.removeEventListener('storage', handleStorageChange);\r\n      window.removeEventListener('sidebarRefresh', handleMealDataChanged);\r\n    };\r\n  }, [loadSidebarData, loadMonthData]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-64\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"min-h-screen bg-gray-50\">\r\n        \r\n        {/* Three Column Layout */}\r\n        <div className=\"flex gap-6 max-w-7xl mx-auto p-6\">\r\n          \r\n          {/* Left Sidebar - Profile & Calendar */}\r\n          <div className=\"w-80 flex-shrink-0 sticky top-6 self-start space-y-6 max-h-[calc(100vh-3rem)] overflow-y-auto\">\r\n            \r\n            {/* Profile Card */}\r\n            <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 relative overflow-hidden\">\r\n              {/* Subtle decorative elements */}\r\n              <div className=\"absolute top-0 right-0 w-16 h-16 bg-blue-50 rounded-full -translate-y-8 translate-x-8\"></div>\r\n              <div className=\"absolute bottom-0 left-0 w-12 h-12 bg-purple-50 rounded-full translate-y-6 -translate-x-6\"></div>\r\n              \r\n              <div className=\"relative text-center\">\r\n                {user?.profile_picture ? (\r\n                  <div className=\"relative inline-block\">\r\n                    <img \r\n                      src={user.profile_picture} \r\n                      alt=\"Profile\" \r\n                      className=\"w-20 h-20 rounded-full mx-auto mb-4 object-cover ring-3 ring-blue-100 shadow-md\"\r\n                    />\r\n                    <div className=\"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-3 border-white\"></div>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"relative inline-block\">\r\n                    <div className=\"w-20 h-20 rounded-full bg-blue-500 flex items-center justify-center text-white text-xl font-semibold mx-auto mb-4 ring-3 ring-blue-100 shadow-md\">\r\n                      {user?.first_name?.charAt(0) || user?.username?.charAt(0) || 'U'}\r\n                    </div>\r\n                    <div className=\"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-3 border-white\"></div>\r\n                  </div>\r\n                )}\r\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-1\">\r\n                  {user?.first_name} {user?.last_name}\r\n                </h3>\r\n                <p className=\"text-gray-500 mb-4\">@{user?.username}</p>\r\n                \r\n                {/* Stats */}\r\n                <div className=\"grid grid-cols-3 gap-4 mb-6\">\r\n                  <div className=\"text-center\">\r\n                    <div className=\"text-xl font-bold text-blue-600\">{profileData?.profile?.posts_count || 0}</div>\r\n                    <div className=\"text-xs text-gray-500\">Posts</div>\r\n                  </div>\r\n                  <div className=\"text-center\">\r\n                    <div className=\"text-xl font-bold text-green-600\">{profileData?.profile?.following_count || 0}</div>\r\n                    <div className=\"text-xs text-gray-500\">Following</div>\r\n                  </div>\r\n                  <div className=\"text-center\">\r\n                    <div className=\"text-xl font-bold text-purple-600\">{profileData?.profile?.followers_count || 0}</div>\r\n                    <div className=\"text-xs text-gray-500\">Followers</div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <button \r\n                  onClick={() => setShowFollowSearch(true)}\r\n                  className=\"w-full bg-gradient-to-r from-orange-500 to-orange-600 text-white py-2.5 px-4 rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all duration-200 font-medium shadow-lg hover:shadow-xl transform hover:scale-105\"\r\n                >\r\n                  Find People\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Today's Nutrition Card */}\r\n            <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 relative overflow-hidden\">\r\n              <div className=\"absolute top-0 right-0 w-14 h-14 bg-green-50 rounded-full -translate-y-7 translate-x-7\"></div>\r\n              \r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4 relative\">Today's Nutrition</h3>\r\n              {todayNutrition ? (\r\n                <div className=\"space-y-4 relative\">\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <span className=\"text-gray-600\">Calories</span>\r\n                    <span className=\"font-semibold text-gray-900\">\r\n                      {todayNutrition.totalCalories || 0} / {todayNutrition.calorieGoal || 2000}\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"w-full bg-gray-100 rounded-full h-2.5 shadow-inner\">\r\n                    <div \r\n                      className=\"bg-orange-500 h-2.5 rounded-full transition-all duration-300\" \r\n                      style={{ \r\n                        width: `${Math.min(100, ((todayNutrition.totalCalories || 0) / (todayNutrition.calorieGoal || 2000)) * 100)}%` \r\n                      }}\r\n                    ></div>\r\n                  </div>\r\n                  \r\n                  {/* Protein Progress */}\r\n                  <div className=\"flex justify-between items-center mt-4\">\r\n                    <span className=\"text-gray-600\">Protein</span>\r\n                    <span className=\"font-semibold text-gray-900\">\r\n                      {todayNutrition.totalProtein || 0}g / {todayNutrition.proteinGoal || 150}g\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"w-full bg-gray-100 rounded-full h-2.5 shadow-inner\">\r\n                    <div \r\n                      className=\"bg-green-500 h-2.5 rounded-full transition-all duration-300\" \r\n                      style={{ \r\n                        width: `${Math.min(100, ((todayNutrition.totalProtein || 0) / (todayNutrition.proteinGoal || 150)) * 100)}%` \r\n                      }}\r\n                    ></div>\r\n                  </div>\r\n                  \r\n                  {/* Macros - REMOVED PROTEIN RECTANGLE */}\r\n                  <div className=\"grid grid-cols-3 gap-2\">\r\n                    <div className=\"text-center bg-yellow-50 rounded-lg p-2\">\r\n                      <div className=\"text-yellow-600 font-semibold text-sm\">{todayNutrition.totalCarbs || 0}g</div>\r\n                      <div className=\"text-gray-500 text-xs\">Carbs</div>\r\n                    </div>\r\n                    <div className=\"text-center bg-red-50 rounded-lg p-2\">\r\n                      <div className=\"text-red-600 font-semibold text-sm\">{todayNutrition.totalFat || 0}g</div>\r\n                      <div className=\"text-gray-500 text-xs\">Fat</div>\r\n                    </div>\r\n                    <div className=\"text-center bg-blue-50 rounded-lg p-2\">\r\n                      <div className=\"text-blue-600 font-semibold text-sm\">{Math.round(((todayNutrition.totalCalories || 0) / (todayNutrition.calorieGoal || 2000)) * 100)}%</div>\r\n                      <div className=\"text-gray-500 text-xs\">Goal</div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-gray-400 text-center py-6 relative\">No nutrition data for today</div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Calendar Streak Card */}\r\n            <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 relative overflow-hidden\">\r\n              <div className=\"absolute bottom-0 left-0 w-16 h-16 bg-purple-50 rounded-full translate-y-8 -translate-x-8\"></div>\r\n              \r\n              <div className=\"flex items-center justify-between mb-4 relative\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900\">Calendar</h3>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <button \r\n                    onClick={() => setCurrentDate(subMonths(currentDate, 1))}\r\n                    className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\r\n                  >\r\n                    <ChevronLeft className=\"w-4 h-4 text-gray-500\" />\r\n                  </button>\r\n                  <button \r\n                    onClick={() => setCurrentDate(addMonths(currentDate, 1))}\r\n                    className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\r\n                  >\r\n                    <ChevronRight className=\"w-4 h-4 text-gray-500\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"text-center mb-3 relative\">\r\n                <div className=\"text-sm font-medium text-gray-900 bg-gray-50 rounded-lg py-2 px-3\">\r\n                  {format(currentDate, 'MMMM yyyy')}\r\n                </div>\r\n              </div>\r\n              \r\n              {/* Calendar Grid */}\r\n              <div className=\"grid grid-cols-7 gap-1 text-xs relative\">\r\n                {['S', 'M', 'T', 'W', 'T', 'F', 'S'].map(day => (\r\n                  <div key={day} className=\"text-center p-2 text-gray-500 font-medium\">\r\n                    {day}\r\n                  </div>\r\n                ))}\r\n                {eachDayOfInterval({\r\n                  start: startOfMonth(currentDate),\r\n                  end: endOfMonth(currentDate)\r\n                }).map(day => {\r\n                  const dayData = monthData?.days?.find((d: any) => \r\n                    new Date(d.date).getDate() === day.getDate()\r\n                  );\r\n                  const hasData = dayData?.has_data;\r\n                  const isCurrentDay = isToday(day);\r\n                  \r\n                  return (\r\n                    <div\r\n                      key={day.toISOString()}\r\n                      className={`\r\n                        text-center p-2 rounded-lg text-sm font-medium transition-all duration-200\r\n                        ${isCurrentDay ? 'bg-orange-500 text-white shadow-md' : ''}\r\n                        ${hasData && !isCurrentDay ? 'bg-green-100 text-green-700' : ''}\r\n                        ${!hasData && !isCurrentDay ? 'text-gray-400 hover:bg-gray-50' : ''}\r\n                      `}\r\n                    >\r\n                      {day.getDate()}\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Main Feed Content */}\r\n          <div className=\"flex-1 space-y-6\">\r\n            {/* Create Post Button - Simple */}\r\n            <button\r\n              onClick={() => setShowCreatePost(true)}\r\n              className=\"w-full bg-white border border-gray-200 rounded-lg p-4 text-left hover:bg-gray-50 transition-colors shadow-sm\"\r\n            >\r\n              <div className=\"flex items-center space-x-3\">\r\n                <div className=\"w-10 h-10 rounded-full bg-orange-500 flex items-center justify-center text-white font-semibold\">\r\n                  {user?.first_name?.charAt(0) || user?.username?.charAt(0) || 'U'}\r\n                </div>\r\n                <span className=\"text-gray-600\">What's on your mind?</span>\r\n              </div>\r\n            </button>\r\n\r\n            {/* Posts - Original Simple Design */}\r\n            <div className=\"space-y-6\">\r\n              {posts.length === 0 && !loading && (\r\n                <div className=\"bg-white border border-gray-200 rounded-lg shadow-sm p-8 text-center\">\r\n                  <div className=\"mb-4\">\r\n                    <div className=\"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                      <MessageCircle className=\"w-8 h-8 text-orange-500\" />\r\n                    </div>\r\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">No posts yet</h3>\r\n                    <p className=\"text-gray-600 mb-6\">Your feed is empty. Start connecting with others to see their posts!</p>\r\n                  </div>\r\n                  \r\n                  <div className=\"flex flex-col sm:flex-row gap-3 justify-center\">\r\n                    <button\r\n                      onClick={() => setShowFollowSearch(true)}\r\n                      className=\"px-4 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all duration-200 font-medium shadow-md hover:shadow-lg transform hover:scale-105\"\r\n                    >\r\n                      Find Friends\r\n                    </button>\r\n                    <button\r\n                      onClick={() => {/* Navigate to groups when implemented */}}\r\n                      className=\"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium\"\r\n                    >\r\n                      Browse Groups\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n              \r\n              {posts.map(post => (\r\n                <div key={post.id} className=\"bg-white border border-gray-200 rounded-lg shadow-sm\">\r\n                  {/* Post Header */}\r\n                  <div className=\"flex items-center justify-between p-4 border-b border-gray-200\">\r\n                    <div className=\"flex items-center space-x-3\">\r\n                      <div className=\"w-8 h-8 rounded-full bg-orange-500 flex items-center justify-center text-white text-sm font-semibold\">\r\n                        {post.user.first_name?.charAt(0) || post.user.username?.charAt(0)}\r\n                      </div>\r\n                      <div>\r\n                        <div className=\"font-semibold text-gray-900\">{post.user.first_name} {post.user.last_name}</div>\r\n                        <div className=\"text-sm text-gray-500\">{formatPostDate(post.created_at)}</div>\r\n                      </div>\r\n                    </div>\r\n                    <button className=\"text-gray-400 hover:text-gray-600\">\r\n                      <MoreHorizontal className=\"w-5 h-5\" />\r\n                    </button>\r\n                  </div>\r\n\r\n                  {/* Post Content */}\r\n                  {post.content && (\r\n                    <div className=\"p-4\">\r\n                      <p className=\"text-gray-900\">{post.content}</p>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Post Image */}\r\n                  {post.image_url && (\r\n                    <div className=\"w-full\">\r\n                      <img \r\n                        src={post.image_url} \r\n                        alt=\"Post\" \r\n                        className=\"w-full object-cover\"\r\n                      />\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Meal Data */}\r\n                  {post.meal_data && (\r\n                    <div className=\"p-4 bg-gray-50 border-t border-gray-200\">\r\n                      <div className=\"text-sm font-medium text-gray-900 mb-2\">Meal Information</div>\r\n                      <div className=\"grid grid-cols-4 gap-4 text-sm\">\r\n                        <div className=\"text-center\">\r\n                          <div className=\"font-semibold text-orange-600\">{post.meal_data.calories || 0}</div>\r\n                          <div className=\"text-gray-600\">Calories</div>\r\n                        </div>\r\n                        <div className=\"text-center\">\r\n                          <div className=\"font-semibold text-green-600\">{post.meal_data.protein || 0}g</div>\r\n                          <div className=\"text-gray-600\">Protein</div>\r\n                        </div>\r\n                        <div className=\"text-center\">\r\n                          <div className=\"font-semibold text-yellow-600\">{post.meal_data.carbs || 0}g</div>\r\n                          <div className=\"text-gray-600\">Carbs</div>\r\n                        </div>\r\n                        <div className=\"text-center\">\r\n                          <div className=\"font-semibold text-red-600\">{post.meal_data.fat || 0}g</div>\r\n                          <div className=\"text-gray-600\">Fat</div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Post Actions */}\r\n                  <div className=\"px-4 py-3 border-t border-gray-200\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div className=\"flex items-center space-x-6\">\r\n                        <button\r\n                          onClick={() => handleLike(post.id)}\r\n                          className={`flex items-center space-x-2 ${post.is_liked ? 'text-red-500' : 'text-gray-500 hover:text-red-500'}`}\r\n                        >\r\n                          <Heart className={`w-5 h-5 ${post.is_liked ? 'fill-current' : ''}`} />\r\n                          <span className=\"text-sm\">{post.likes_count}</span>\r\n                        </button>\r\n                        <button\r\n                          onClick={() => toggleComments(post.id)}\r\n                          className=\"flex items-center space-x-2 text-gray-500 hover:text-orange-500\"\r\n                        >\r\n                          <MessageCircle className=\"w-5 h-5\" />\r\n                          <span className=\"text-sm\">{post.comments_count}</span>\r\n                        </button>\r\n                        <button className=\"text-gray-500 hover:text-orange-500\">\r\n                          <Share className=\"w-5 h-5\" />\r\n                        </button>\r\n                      </div>\r\n                      <button\r\n                        onClick={() => handleBookmark(post.id)}\r\n                        className={`${post.is_bookmarked ? 'text-orange-500' : 'text-gray-500 hover:text-orange-500'}`}\r\n                      >\r\n                        <Bookmark className={`w-5 h-5 ${post.is_bookmarked ? 'fill-current' : ''}`} />\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Comments Section */}\r\n                  {expandedComments.has(post.id) && (\r\n                    <div className=\"px-4 py-3 border-t border-gray-200 bg-gray-50\">\r\n                      {/* Add Comment */}\r\n                      <div className=\"flex items-center space-x-3 mb-4\">\r\n                        <div className=\"w-8 h-8 rounded-full bg-orange-500 flex items-center justify-center text-white text-sm font-semibold\">\r\n                          {user?.first_name?.charAt(0) || user?.username?.charAt(0) || 'U'}\r\n                        </div>\r\n                        <div className=\"flex-1 flex items-center space-x-2\">\r\n                          <input\r\n                            type=\"text\"\r\n                            placeholder=\"Add a comment...\"\r\n                            value={newComments[post.id] || ''}\r\n                            onChange={(e) => setNewComments(prev => ({...prev, [post.id]: e.target.value}))}\r\n                            className=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500\"\r\n                            onKeyPress={(e) => e.key === 'Enter' && handleAddComment(post.id)}\r\n                          />\r\n                          <button\r\n                            onClick={() => handleAddComment(post.id)}\r\n                            disabled={!newComments[post.id]?.trim()}\r\n                            className=\"px-4 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-md hover:shadow-lg\"\r\n                          >\r\n                            Post\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Comments List */}\r\n                      <div className=\"space-y-3\">\r\n                        {comments[post.id]?.map(comment => (\r\n                          <div key={comment.id} className=\"flex items-start space-x-3\">\r\n                            <div className=\"w-8 h-8 rounded-full bg-orange-500 flex items-center justify-center text-white text-sm font-semibold\">\r\n                              {comment.user.first_name?.charAt(0) || comment.user.username?.charAt(0)}\r\n                            </div>\r\n                            <div className=\"flex-1\">\r\n                              <div className=\"bg-white rounded-lg p-3\">\r\n                                <div className=\"font-semibold text-sm text-gray-900\">{comment.user.first_name} {comment.user.last_name}</div>\r\n                                <div className=\"text-gray-700\">{comment.content}</div>\r\n                              </div>\r\n                              <div className=\"text-xs text-gray-500 mt-1\">{formatDistanceToNow(new Date(comment.created_at), { addSuffix: true })}</div>\r\n                            </div>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Right Sidebar - Groups */}\r\n          <div className=\"w-80 flex-shrink-0 sticky top-6 self-start space-y-6 max-h-[calc(100vh-3rem)] overflow-y-auto\">\r\n            \r\n            {/* Groups Card */}\r\n            <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 relative overflow-hidden\">\r\n              <div className=\"absolute top-0 right-0 w-14 h-14 bg-indigo-50 rounded-full -translate-y-7 translate-x-7\"></div>\r\n              \r\n              <div className=\"flex items-center justify-between mb-6 relative\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900\">Groups</h3>\r\n                <button className=\"text-blue-600 hover:text-blue-700 text-sm font-medium bg-blue-50 hover:bg-blue-100 px-3 py-1 rounded-full transition-colors\">\r\n                  See All\r\n                </button>\r\n              </div>\r\n              \r\n              <div className=\"space-y-3 relative\">\r\n                {/* Mock Group Items */}\r\n                <div className=\"flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-50 cursor-pointer transition-colors group\">\r\n                  <div className=\"w-10 h-10 rounded-xl bg-green-500 flex items-center justify-center shadow-sm\">\r\n                    <span className=\"text-white font-semibold text-sm\">VG</span>\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"font-medium text-gray-900 group-hover:text-green-600 transition-colors\">Vegan Recipes</div>\r\n                    <div className=\"text-sm text-gray-500\">1.2k members</div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-50 cursor-pointer transition-colors group\">\r\n                  <div className=\"w-10 h-10 rounded-xl bg-blue-500 flex items-center justify-center shadow-sm\">\r\n                    <span className=\"text-white font-semibold text-sm\">FT</span>\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"font-medium text-gray-900 group-hover:text-blue-600 transition-colors\">Fitness Goals</div>\r\n                    <div className=\"text-sm text-gray-500\">856 members</div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-50 cursor-pointer transition-colors group\">\r\n                  <div className=\"w-10 h-10 rounded-xl bg-purple-500 flex items-center justify-center shadow-sm\">\r\n                    <span className=\"text-white font-semibold text-sm\">WL</span>\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"font-medium text-gray-900 group-hover:text-purple-600 transition-colors\">Weight Loss</div>\r\n                    <div className=\"text-sm text-gray-500\">2.1k members</div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-50 cursor-pointer transition-colors group\">\r\n                  <div className=\"w-10 h-10 rounded-xl bg-orange-500 flex items-center justify-center shadow-sm\">\r\n                    <span className=\"text-white font-semibold text-sm\">KT</span>\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"font-medium text-gray-900 group-hover:text-orange-600 transition-colors\">Keto Diet</div>\r\n                    <div className=\"text-sm text-gray-500\">643 members</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              \r\n              <button className=\"w-full mt-6 bg-gradient-to-r from-orange-500 to-orange-600 text-white py-2.5 px-4 rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all duration-200 font-medium shadow-lg hover:shadow-xl transform hover:scale-105\">\r\n                Create Group\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Create Post Modal - Improved Design */}\r\n      {showCreatePost && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n          <div className=\"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-gray-100\">\r\n            <div className=\"flex items-center justify-between p-6 border-b border-gray-100\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                <div className=\"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center\">\r\n                  <PenTool className=\"w-4 h-4 text-orange-600\" />\r\n                </div>\r\n                <h2 className=\"text-xl font-semibold text-gray-900\">Create Post</h2>\r\n              </div>\r\n              <button\r\n                onClick={() => setShowCreatePost(false)}\r\n                className=\"text-gray-400 hover:text-gray-600 p-2 hover:bg-gray-100 rounded-lg transition-colors\"\r\n              >\r\n                <X className=\"w-5 h-5\" />\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"p-6 space-y-6\">\r\n              <div className=\"flex items-start space-x-4\">\r\n                <div className=\"w-12 h-12 rounded-full bg-orange-500 flex items-center justify-center text-white font-semibold shadow-md\">\r\n                  {user?.first_name?.charAt(0) || user?.username?.charAt(0) || 'U'}\r\n                </div>\r\n                <div className=\"flex-1\">\r\n                  <textarea\r\n                    placeholder=\"What's on your mind?\"\r\n                    value={newPost.content}\r\n                    onChange={(e) => setNewPost(prev => ({ ...prev, content: e.target.value }))}\r\n                    className=\"w-full p-4 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-300 resize-none bg-gray-50 hover:bg-white transition-colors\"\r\n                    rows={5}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {newPost.imageFile && (\r\n                <div className=\"relative\">\r\n                  <img\r\n                    src={URL.createObjectURL(newPost.imageFile)}\r\n                    alt=\"Preview\"\r\n                    className=\"w-full h-64 object-cover rounded-lg\"\r\n                  />\r\n                  <button\r\n                    onClick={() => setNewPost(prev => ({ ...prev, imageFile: null }))}\r\n                    className=\"absolute top-2 right-2 bg-black bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-70\"\r\n                  >\r\n                    <X className=\"w-4 h-4\" />\r\n                  </button>\r\n                </div>\r\n              )}\r\n\r\n              {/* Post Options */}\r\n              <div className=\"bg-gray-50 rounded-xl p-4 space-y-4\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <div className=\"w-5 h-5 bg-orange-100 rounded flex items-center justify-center\">\r\n                    <div className=\"w-2 h-2 bg-orange-500 rounded-full\"></div>\r\n                  </div>\r\n                  <span className=\"text-sm font-semibold text-gray-900\">Post Settings</span>\r\n                </div>\r\n                \r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <label className=\"flex items-center space-x-3 cursor-pointer p-3 bg-white rounded-lg border border-gray-200 hover:border-orange-300 transition-colors\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={newPost.allowComments}\r\n                      onChange={(e) => setNewPost(prev => ({ ...prev, allowComments: e.target.checked }))}\r\n                      className=\"rounded border-gray-300 text-orange-600 focus:ring-orange-500\"\r\n                    />\r\n                    <span className=\"text-sm text-gray-700\">Allow comments</span>\r\n                  </label>\r\n                  \r\n                  <label className=\"flex items-center space-x-3 cursor-pointer p-3 bg-white rounded-lg border border-gray-200 hover:border-orange-300 transition-colors\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={newPost.hideLikeCount}\r\n                      onChange={(e) => setNewPost(prev => ({ ...prev, hideLikeCount: e.target.checked }))}\r\n                      className=\"rounded border-gray-300 text-orange-600 focus:ring-orange-500\"\r\n                    />\r\n                    <span className=\"text-sm text-gray-700\">Hide like count</span>\r\n                  </label>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex items-center justify-between pt-6 border-t border-gray-100\">\r\n                <div className=\"flex items-center space-x-4\">\r\n                  <label className=\"flex items-center space-x-3 text-gray-600 hover:text-orange-600 cursor-pointer p-2 hover:bg-orange-50 rounded-lg transition-colors\">\r\n                    <Image className=\"w-5 h-5\" />\r\n                    <span className=\"text-sm font-medium\">Add Photo</span>\r\n                    <input\r\n                      type=\"file\"\r\n                      accept=\"image/*\"\r\n                      onChange={handleImageUpload}\r\n                      className=\"hidden\"\r\n                    />\r\n                  </label>\r\n                </div>\r\n                \r\n                <div className=\"flex items-center space-x-3\">\r\n                  <button\r\n                    onClick={() => setShowCreatePost(false)}\r\n                    className=\"px-6 py-2.5 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors font-medium\"\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                  <button\r\n                    onClick={handleCreatePost}\r\n                    disabled={!newPost.content.trim() && !newPost.imageFile}\r\n                    className=\"px-6 py-2.5 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium shadow-lg hover:shadow-xl transform hover:scale-105\"\r\n                  >\r\n                    Share Post\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Follow People Search Modal */}\r\n      {showFollowSearch && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n          <div className=\"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\r\n            <div className=\"flex items-center justify-between p-6 border-b border-gray-100\">\r\n              <h2 className=\"text-xl font-semibold text-gray-900\">Find People</h2>\r\n              <button\r\n                onClick={() => setShowFollowSearch(false)}\r\n                className=\"text-gray-400 hover:text-gray-600 p-2 hover:bg-gray-100 rounded-full transition-colors\"\r\n              >\r\n                <X className=\"w-5 h-5\" />\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"p-6\">\r\n              <div className=\"mb-6\">\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Search for people...\"\r\n                  value={searchQuery}\r\n                  onChange={(e) => {\r\n                    setSearchQuery(e.target.value);\r\n                    searchUsers(e.target.value);\r\n                  }}\r\n                  className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              {searchLoading ? (\r\n                <div className=\"flex items-center justify-center py-8\">\r\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"space-y-3\">\r\n                  {searchResults.map(user => (\r\n                    <div key={user.id} className=\"flex items-center justify-between p-4 hover:bg-gray-50 rounded-xl transition-colors\">\r\n                      <div className=\"flex items-center space-x-3\">\r\n                        <div className=\"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-semibold\">\r\n                          {user.first_name?.charAt(0) || user.username?.charAt(0)}\r\n                        </div>\r\n                        <div>\r\n                          <div className=\"font-medium text-gray-900\">{user.first_name} {user.last_name}</div>\r\n                          <div className=\"text-sm text-gray-500\">@{user.username}</div>\r\n                        </div>\r\n                      </div>\r\n                      <button\r\n                        onClick={() => handleFollow(user.id)}\r\n                        className={`px-4 py-2 rounded-xl font-medium transition-all duration-200 ${\r\n                          user.is_following\r\n                            ? 'bg-gray-200 text-gray-700 hover:bg-gray-300'\r\n                            : 'bg-gradient-to-r from-orange-500 to-orange-600 text-white hover:from-orange-600 hover:to-orange-700 shadow-md hover:shadow-lg'\r\n                        }`}\r\n                      >\r\n                        {user.is_following ? 'Following' : 'Follow'}\r\n                      </button>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Feed;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}