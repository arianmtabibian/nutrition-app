{"ast":null,"code":"import React from'react';import{Routes,Route,Navigate}from'react-router-dom';import{AuthProvider,useAuth}from'./contexts/AuthContext';import{useOnboardingProtection}from'./hooks/useOnboardingProtection';// Test auto-deploy connection - 2025-01-05\n// Second test after config fix\n// Fresh project test - should auto-deploy\nimport Welcome from'./components/Welcome';import EnhancedRegister from'./components/EnhancedRegister';import Onboarding from'./components/Onboarding';import Login from'./components/auth/Login';import Dashboard from'./components/Dashboard';import LoadingSpinner from'./components/ui/LoadingSpinner';// Protected route component\nimport{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children}=_ref;const{user,loading}=useAuth();if(loading){return/*#__PURE__*/_jsx(LoadingSpinner,{});}// Add a small delay to prevent flash of login page during auth verification\nif(!user){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}return/*#__PURE__*/_jsx(_Fragment,{children:children});};// Smart protection for onboarding - only blocks users who have completed onboarding\nconst OnboardingProtectedRoute=_ref2=>{let{children}=_ref2;const{user,loading}=useAuth();if(loading){return/*#__PURE__*/_jsx(LoadingSpinner,{});}if(!user){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}// Allow new users to access onboarding, but prevent users who have completed it from returning\n// The actual profile check happens inside the Onboarding component for proper async handling\nreturn/*#__PURE__*/_jsx(_Fragment,{children:children});};// Public route component (redirects if already logged in)\nconst PublicRoute=_ref3=>{let{children}=_ref3;const{user,loading}=useAuth();if(loading){return/*#__PURE__*/_jsx(LoadingSpinner,{});}return user?/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true}):/*#__PURE__*/_jsx(_Fragment,{children:children});};function AppRoutes(){// Global protection against onboarding access for existing users\nuseOnboardingProtection();return/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Welcome,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(PublicRoute,{children:/*#__PURE__*/_jsx(Login,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(PublicRoute,{children:/*#__PURE__*/_jsx(EnhancedRegister,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/onboarding\",element:/*#__PURE__*/_jsx(OnboardingProtectedRoute,{children:/*#__PURE__*/_jsx(Onboarding,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard/*\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Dashboard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true})})]});}function App(){return/*#__PURE__*/_jsx(AuthProvider,{children:/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50\",children:/*#__PURE__*/_jsx(AppRoutes,{})})});}export default App;","map":{"version":3,"names":["React","Routes","Route","Navigate","AuthProvider","useAuth","useOnboardingProtection","Welcome","EnhancedRegister","Onboarding","Login","Dashboard","LoadingSpinner","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","ProtectedRoute","_ref","children","user","loading","to","replace","OnboardingProtectedRoute","_ref2","PublicRoute","_ref3","AppRoutes","path","element","App","className"],"sources":["C:/Users/arian/OneDrive/Desktop/Nutrition/client/src/App.tsx"],"sourcesContent":["import React from 'react';\nimport { Routes, Route, Navigate } from 'react-router-dom';\nimport { AuthProvider, useAuth } from './contexts/AuthContext';\nimport { useOnboardingProtection } from './hooks/useOnboardingProtection';\n\n// Test auto-deploy connection - 2025-01-05\n// Second test after config fix\n// Fresh project test - should auto-deploy\n\nimport Welcome from './components/Welcome';\nimport EnhancedRegister from './components/EnhancedRegister';\nimport Onboarding from './components/Onboarding';\nimport Login from './components/auth/Login';\nimport Dashboard from './components/Dashboard';\nimport LoadingSpinner from './components/ui/LoadingSpinner';\n\n// Protected route component\nconst ProtectedRoute: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const { user, loading } = useAuth();\n  \n  if (loading) {\n    return <LoadingSpinner />;\n  }\n  \n  // Add a small delay to prevent flash of login page during auth verification\n  if (!user) {\n    return <Navigate to=\"/login\" replace />;\n  }\n  \n  return <>{children}</>;\n};\n\n// Smart protection for onboarding - only blocks users who have completed onboarding\nconst OnboardingProtectedRoute: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const { user, loading } = useAuth();\n  \n  if (loading) {\n    return <LoadingSpinner />;\n  }\n  \n  if (!user) {\n    return <Navigate to=\"/login\" replace />;\n  }\n  \n  // Allow new users to access onboarding, but prevent users who have completed it from returning\n  // The actual profile check happens inside the Onboarding component for proper async handling\n  return <>{children}</>;\n};\n\n// Public route component (redirects if already logged in)\nconst PublicRoute: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const { user, loading } = useAuth();\n  \n  if (loading) {\n    return <LoadingSpinner />;\n  }\n  \n  return user ? <Navigate to=\"/dashboard\" replace /> : <>{children}</>;\n};\n\nfunction AppRoutes() {\n  // Global protection against onboarding access for existing users\n  useOnboardingProtection();\n  \n  return (\n    <Routes>\n      <Route path=\"/\" element={<Welcome />} />\n      <Route path=\"/login\" element={\n        <PublicRoute>\n          <Login />\n        </PublicRoute>\n      } />\n      <Route path=\"/register\" element={\n        <PublicRoute>\n          <EnhancedRegister />\n        </PublicRoute>\n      } />\n      <Route path=\"/onboarding\" element={\n        <OnboardingProtectedRoute>\n          <Onboarding />\n        </OnboardingProtectedRoute>\n      } />\n      <Route path=\"/dashboard/*\" element={\n        <ProtectedRoute>\n          <Dashboard />\n        </ProtectedRoute>\n      } />\n      <Route path=\"*\" element={<Navigate to=\"/dashboard\" replace />} />\n    </Routes>\n  );\n}\n\nfunction App() {\n  return (\n    <AuthProvider>\n      <div className=\"min-h-screen bg-gray-50\">\n        <AppRoutes />\n      </div>\n    </AuthProvider>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}