{"ast":null,"code":"import _objectSpread from\"C:/Users/arian/OneDrive/Desktop/Nutrition/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Routes,Route,useNavigate,useLocation}from'react-router-dom';import{createPortal}from'react-dom';import{useAuth}from'../contexts/AuthContext';// import { useUserSession } from '../hooks/useUserSession'; // Unused import removed\nimport{LogOut,User,Plus,BarChart3,Home,Target,PenTool,Image,X,ChevronDown,UserPlus,Settings,Utensils,Search}from'lucide-react';import{profileAPI,socialAPI}from'../services/api';import Overview from'./Overview';import SocialProfile from'./SocialProfile';import Feed from'./Feed';import Inputs from'./Inputs';import Groups from'./Groups';import MealPlan from'./MealPlan';// LoadingSpinner removed - not used in this component\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const{user,logout}=useAuth();const navigate=useNavigate();const location=useLocation();// const { hasAccessedAppBefore } = useUserSession(); // Unused variable removed\nconst[loading,setLoading]=useState(false);const[checkingProfile,setCheckingProfile]=useState(true);const[showNewPostModal,setShowNewPostModal]=useState(false);const[showProfileDropdown,setShowProfileDropdown]=useState(false);const[dropdownButtonRef,setDropdownButtonRef]=useState(null);const[newPost,setNewPost]=useState({content:'',imageFile:null,allowComments:true,hideLikeCount:false});const[showSearchDropdown,setShowSearchDropdown]=useState(false);const[searchQuery,setSearchQuery]=useState('');const[searchFilter,setSearchFilter]=useState('Friends');// Default filter\nconst handleCreatePost=async()=>{console.log('Dashboard handleCreatePost called with:',newPost);if(!newPost.content.trim()){console.log('No content, returning early');alert('Please enter some content for your post');return;}try{// Create FormData for file upload\nconst formData=new FormData();formData.append('content',newPost.content);formData.append('allowComments',newPost.allowComments.toString());formData.append('hideLikeCount',newPost.hideLikeCount.toString());if(newPost.imageFile){formData.append('image',newPost.imageFile);console.log('Added image file:',newPost.imageFile.name);}console.log('Sending request to socialAPI.createPost from Dashboard');// Use the centralized socialAPI instead of direct fetch\nconst response=await socialAPI.createPost(formData);console.log('Dashboard response status:',response.status);if(response&&(response.status===200||response.status===201)){const result=response.data;console.log('Dashboard post created successfully:',result);// Ensure the post has proper user information\nif(!result.user&&user){result.user={id:user.id,username:user.username,first_name:user.first_name,last_name:user.last_name,profile_picture:user.profile_picture||undefined};}// Store the new post in localStorage for persistence across navigation\nconst existingLocalPosts=JSON.parse(localStorage.getItem('local_posts')||'[]');const updatedLocalPosts=[result,...existingLocalPosts.filter(p=>p.id!==result.id)];localStorage.setItem('local_posts',JSON.stringify(updatedLocalPosts));console.log('üíæ Dashboard: Stored post in localStorage for persistence');setNewPost({content:'',imageFile:null,allowComments:true,hideLikeCount:false});setShowNewPostModal(false);// Trigger a custom event to update the feed\nwindow.dispatchEvent(new CustomEvent('postCreated',{detail:result}));// Don't navigate - let the user stay on current page\nconsole.log('üéâ Post created successfully from Dashboard!');}else{console.error('Dashboard failed to create post. Status:',response===null||response===void 0?void 0:response.status,'Response:',response);alert(\"Failed to create post: \".concat((response===null||response===void 0?void 0:response.status)||'Unknown error'));}}catch(error){console.error('Dashboard error creating post:',error);alert('Error creating post: '+(error instanceof Error?error.message:'Unknown error'));}};const handleImageUpload=e=>{var _e$target$files;const file=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0];if(file){setNewPost(_objectSpread(_objectSpread({},newPost),{},{imageFile:file}));}};const handleLogout=async()=>{setLoading(true);try{logout();navigate('/login');}finally{setLoading(false);}};const tabs=[{id:'feed',name:'Feed',icon:Home,path:'/dashboard/feed'},{id:'overview',name:'Overview',icon:BarChart3,path:'/dashboard/overview'},{id:'groups',name:'Groups',icon:User,path:'/dashboard/groups'},{id:'mealplan',name:'Meal Plan',icon:Utensils,path:'/dashboard/mealplan'},{id:'profile',name:'Profile',icon:User,path:'/dashboard/profile'}];const getCurrentTab=()=>{const currentPath=location.pathname;return tabs.find(tab=>currentPath.startsWith(tab.path))||tabs[0];};const currentTab=getCurrentTab();// Check if user needs onboarding (new users only) - RENDER REDEPLOY PROTECTION\nuseEffect(()=>{const checkProfileExists=async function(){let retryCount=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;try{const response=await profileAPI.get();if(!response.data.profile){// Check if this might be a temporary issue (Render redeploy)\nconst hasAccessedApp=localStorage.getItem('hasAccessedApp');const lastAccess=localStorage.getItem('lastAccess');if(hasAccessedApp==='true'&&lastAccess){const lastAccessDate=new Date(lastAccess);const hoursSinceAccess=(Date.now()-lastAccessDate.getTime())/(1000*60*60);// If user accessed recently (within 24 hours), this is likely a Render redeploy\nif(hoursSinceAccess<24){console.log('üîÑ Render redeploy detected - user accessed recently, waiting for database restore...');if(retryCount<5){// Wait and retry - database might be restoring\nsetTimeout(()=>checkProfileExists(retryCount+1),2000*(retryCount+1));return;}else{console.log('‚ö†Ô∏è Database still not restored after retries, allowing dashboard access');setCheckingProfile(false);return;}}}// Truly new user - redirect to onboarding\nconsole.log('New user with no profile, redirecting to onboarding');navigate('/onboarding');return;}// User has a profile - mark them as having accessed the app\nlocalStorage.setItem('hasAccessedApp','true');localStorage.setItem('lastAccess',new Date().toISOString());console.log('‚úÖ User has profile, allowing dashboard access');setCheckingProfile(false);}catch(error){var _error$response;console.error('‚ùå Error checking profile:',error);// Enhanced error handling for Render redeploys\nconst hasAccessedApp=localStorage.getItem('hasAccessedApp');if((error===null||error===void 0?void 0:(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===404){// Check if this is a returning user experiencing Render redeploy\nif(hasAccessedApp==='true'&&retryCount<3){console.log('üîÑ Returning user, 404 might be temporary (Render redeploy), retrying...');setTimeout(()=>checkProfileExists(retryCount+1),3000);return;}console.log('Profile not found (404), redirecting to onboarding');navigate('/onboarding');}else{// For network/server errors, be more lenient with existing users\nif(hasAccessedApp==='true'){console.log('üîÑ Existing user with network error, allowing dashboard access');setCheckingProfile(false);}else if(retryCount<2){console.log('üîÑ Network error, retrying profile check...');setTimeout(()=>checkProfileExists(retryCount+1),2000);}else{console.log('‚ö†Ô∏è Network issues persist, allowing onboarding attempt');navigate('/onboarding');}}}};if(user){checkProfileExists();}else{setCheckingProfile(false);}},[user,navigate]);// Close dropdown when clicking outside\nuseEffect(()=>{const handleClickOutside=event=>{const target=event.target;if(!target.closest('.profile-dropdown')){setShowProfileDropdown(false);}// Close search when clicking outside the inline search bar\nif(showSearchDropdown&&!target.closest('.inline-search-bar')){setShowSearchDropdown(false);setSearchQuery('');}};if(showProfileDropdown||showSearchDropdown){document.addEventListener('mousedown',handleClickOutside);}return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[showProfileDropdown,showSearchDropdown]);// Listen for meal updates to refresh sidebar data globally\nuseEffect(()=>{const handleMealUpdate=event=>{console.log('üè† Dashboard: Meal update event received:',event.type);// Force refresh of any sidebar data if needed\n// This ensures sidebar updates across all tabs\nsetTimeout(()=>{console.log('üè† Dashboard: Dispatching sidebar refresh...');window.dispatchEvent(new CustomEvent('sidebarRefresh'));},100);};const handleNavigateToMeals=()=>{navigate('/dashboard/inputs');};// Listen to various meal-related events\nwindow.addEventListener('mealAdded',handleMealUpdate);window.addEventListener('mealDataChanged',handleMealUpdate);window.addEventListener('mealDeleted',handleMealUpdate);window.addEventListener('mealUpdated',handleMealUpdate);window.addEventListener('navigateToMeals',handleNavigateToMeals);return()=>{window.removeEventListener('mealAdded',handleMealUpdate);window.removeEventListener('mealDataChanged',handleMealUpdate);window.removeEventListener('mealDeleted',handleMealUpdate);window.removeEventListener('mealUpdated',handleMealUpdate);window.removeEventListener('navigateToMeals',handleNavigateToMeals);};},[navigate]);if(checkingProfile){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-orange-50 via-white to-red-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Checking your profile...\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-br from-orange-50 via-white to-red-50\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"bg-white/80 backdrop-blur-sm shadow-lg border-b border-orange-200/50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between h-20\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-6\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/dashboard/feed'),className:\"flex items-center hover:opacity-80 transition-opacity\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"relative\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-10 w-10 bg-gradient-to-r from-orange-500 to-red-500 rounded-xl flex items-center justify-center shadow-lg\",children:/*#__PURE__*/_jsx(Target,{className:\"w-5 h-5 text-white\"})})}),/*#__PURE__*/_jsx(\"h1\",{className:\"ml-3 text-xl font-bold text-gray-900\",children:\"NutriTrack\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:showSearchDropdown?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center bg-white border border-gray-300 rounded-xl shadow-lg transition-all duration-200 inline-search-bar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"relative\",children:/*#__PURE__*/_jsxs(\"select\",{value:searchFilter,onChange:e=>setSearchFilter(e.target.value),className:\"appearance-none bg-white hover:bg-gray-50 border-0 rounded-l-xl px-4 py-2 pr-10 text-sm font-medium text-gray-700 focus:outline-none focus:ring-2 focus:ring-orange-500 transition-all duration-200 cursor-pointer\",style:{backgroundImage:\"url(\\\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e\\\")\",backgroundPosition:'right 0.5rem center',backgroundRepeat:'no-repeat',backgroundSize:'1.2em 1.2em'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"Friends\",className:\"bg-white text-gray-700 py-3 px-4 hover:bg-gray-50\",children:\"Friends\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Groups\",className:\"bg-white text-gray-700 py-3 px-4 hover:bg-gray-50\",children:\"Groups\"})]})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search \".concat(searchFilter.toLowerCase(),\"...\"),value:searchQuery,onChange:e=>setSearchQuery(e.target.value),className:\"border-0 border-l border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500 text-sm w-64 bg-white placeholder-gray-500\",autoFocus:true}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowSearchDropdown(false);setSearchQuery('');},className:\"p-2 hover:bg-gray-100 rounded-r-xl transition-colors border-l border-gray-300\",children:/*#__PURE__*/_jsx(X,{className:\"h-4 w-4 text-gray-400 hover:text-gray-600\"})})]}):/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowSearchDropdown(true),className:\"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2 border border-gray-300\",children:[/*#__PURE__*/_jsx(Search,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Search\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-700\",children:[\"Welcome, \",/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:(user===null||user===void 0?void 0:user.first_name)||'User'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-green-500 rounded-full animate-pulse\",title:\"Server connected\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500\",children:\"Connected\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{navigate('/dashboard/inputs');// Trigger sidebar refresh when going to add meal\nsetTimeout(()=>{window.dispatchEvent(new CustomEvent('sidebarRefresh'));},100);},className:\"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2 shadow-md hover:shadow-lg\",children:[/*#__PURE__*/_jsx(Plus,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Meals\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowNewPostModal(true),className:\"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2 shadow-md hover:shadow-lg\",children:[/*#__PURE__*/_jsx(PenTool,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Post\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"relative profile-dropdown\",children:/*#__PURE__*/_jsxs(\"button\",{ref:setDropdownButtonRef,onClick:()=>setShowProfileDropdown(!showProfileDropdown),className:\"flex items-center space-x-2 px-3 py-2 rounded-lg hover:bg-gray-100 transition-all duration-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center\",children:user!==null&&user!==void 0&&user.profile_picture?/*#__PURE__*/_jsx(\"img\",{src:user.profile_picture,alt:\"Profile\",className:\"w-8 h-8 rounded-full object-cover\"}):/*#__PURE__*/_jsx(User,{className:\"w-4 h-4 text-white\"})}),/*#__PURE__*/_jsx(ChevronDown,{className:\"w-4 h-4 text-gray-600 transition-transform duration-200 \".concat(showProfileDropdown?'rotate-180':'')})]})})]})]})})}),/*#__PURE__*/_jsx(\"nav\",{className:\"bg-white/80 backdrop-blur-sm border-b border-orange-200/50 shadow-sm\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-8\",children:tabs.map(tab=>{const Icon=tab.icon;const isActive=currentTab.id===tab.id;return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate(tab.path),className:\"flex items-center space-x-2 py-4 px-1 border-b-3 font-semibold text-sm transition-all duration-200 transform hover:-translate-y-0.5 \".concat(isActive?'border-orange-500 text-orange-600 shadow-sm':'border-transparent text-gray-500 hover:text-orange-600 hover:border-orange-300'),children:[tab.id==='profile'?/*#__PURE__*/_jsx(\"div\",{className:\"w-5 h-5 rounded-full overflow-hidden flex items-center justify-center bg-gradient-to-r from-orange-500 to-red-500\",children:user!==null&&user!==void 0&&user.profile_picture?/*#__PURE__*/_jsx(\"img\",{src:user.profile_picture,alt:\"Profile\",className:\"w-5 h-5 rounded-full object-cover\"}):/*#__PURE__*/_jsx(User,{className:\"w-3 h-3 text-white\"})}):/*#__PURE__*/_jsx(Icon,{className:\"h-5 w-5\"}),/*#__PURE__*/_jsx(\"span\",{children:tab.name})]},tab.id);})})})}),/*#__PURE__*/_jsx(\"main\",{className:\"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard/feed\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/overview\",element:/*#__PURE__*/_jsx(Overview,{})}),/*#__PURE__*/_jsx(Route,{path:\"/feed\",element:/*#__PURE__*/_jsx(Feed,{})}),/*#__PURE__*/_jsx(Route,{path:\"/inputs\",element:/*#__PURE__*/_jsx(Inputs,{})}),/*#__PURE__*/_jsx(Route,{path:\"/mealplan\",element:/*#__PURE__*/_jsx(MealPlan,{})}),/*#__PURE__*/_jsx(Route,{path:\"/groups\",element:/*#__PURE__*/_jsx(Groups,{})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(SocialProfile,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard/feed\",replace:true})})]})}),showNewPostModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[85vh] flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-4 border-b border-gray-200 flex-shrink-0\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-900\",children:\"Create New Post\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowNewPostModal(false),className:\"text-gray-400 hover:text-gray-600 transition-colors\",children:/*#__PURE__*/_jsx(X,{className:\"h-6 w-6\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 space-y-4 flex-1 overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"textarea\",{value:newPost.content,onChange:e=>setNewPost(_objectSpread(_objectSpread({},newPost),{},{content:e.target.value})),placeholder:\"What's going on?\",className:\"w-full border border-gray-300 rounded-lg p-4 resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\",rows:4})}),newPost.imageFile&&/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:URL.createObjectURL(newPost.imageFile),alt:\"Preview\",className:\"w-full h-40 object-cover rounded-lg\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setNewPost(_objectSpread(_objectSpread({},newPost),{},{imageFile:null})),className:\"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors shadow-lg\",children:/*#__PURE__*/_jsx(X,{className:\"h-3 w-3\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border border-gray-200 rounded-lg p-3\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 mb-2\",children:\"Add to your post\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-4\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center space-x-2 bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded-lg cursor-pointer transition-colors\",children:[/*#__PURE__*/_jsx(Image,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:\"Upload Photo\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleImageUpload,className:\"hidden\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border border-gray-200 rounded-lg p-3\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 mb-3\",children:\"Privacy Settings\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-medium text-gray-700\",children:\"Allow comments\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"Let people comment on your post\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setNewPost(_objectSpread(_objectSpread({},newPost),{},{allowComments:!newPost.allowComments})),className:\"relative inline-flex h-6 w-11 items-center rounded-full transition-colors \".concat(newPost.allowComments?'bg-blue-600':'bg-gray-200'),children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-block h-4 w-4 transform rounded-full bg-white transition-transform \".concat(newPost.allowComments?'translate-x-6':'translate-x-1')})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-medium text-gray-700\",children:\"Hide like count\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"Only you will see the total number of likes\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setNewPost(_objectSpread(_objectSpread({},newPost),{},{hideLikeCount:!newPost.hideLikeCount})),className:\"relative inline-flex h-6 w-11 items-center rounded-full transition-colors \".concat(newPost.hideLikeCount?'bg-blue-600':'bg-gray-200'),children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-block h-4 w-4 transform rounded-full bg-white transition-transform \".concat(newPost.hideLikeCount?'translate-x-6':'translate-x-1')})})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-end space-x-3 p-4 border-t border-gray-200 bg-gray-50 flex-shrink-0\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowNewPostModal(false),className:\"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{console.log('Dashboard Post button clicked',newPost);handleCreatePost();},disabled:!newPost.content.trim(),className:\"px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors\",children:\"Post\"})]})]})}),showProfileDropdown&&dropdownButtonRef&&/*#__PURE__*/createPortal(/*#__PURE__*/_jsxs(\"div\",{className:\"profile-dropdown\",style:{position:'fixed',top:\"\".concat(dropdownButtonRef.getBoundingClientRect().bottom+8,\"px\"),right:\"\".concat(window.innerWidth-dropdownButtonRef.getBoundingClientRect().right,\"px\"),zIndex:999999,width:'192px',backgroundColor:'white',borderRadius:'0.5rem',boxShadow:'0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(0, 0, 0, 0.05)',border:'1px solid rgb(229, 231, 235)',padding:'0.25rem 0'},children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setShowProfileDropdown(false);// TODO: Navigate to find friends page\n},className:\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(UserPlus,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Find Friends\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setShowProfileDropdown(false);navigate('/dashboard/profile');},className:\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(User,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"My Profile\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setShowProfileDropdown(false);// TODO: Navigate to settings page\n},className:\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Settings,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Settings\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"border-t border-gray-100 my-1\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setShowProfileDropdown(false);handleLogout();},disabled:loading,className:\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(LogOut,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Logout\"})]})]}),document.body)]});};// Helper component for navigation\nconst Navigate=_ref=>{let{to,replace}=_ref;const navigate=useNavigate();React.useEffect(()=>{navigate(to,{replace});},[navigate,to,replace]);return null;};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","Routes","Route","useNavigate","useLocation","createPortal","useAuth","LogOut","User","Plus","BarChart3","Home","Target","PenTool","Image","X","ChevronDown","UserPlus","Settings","Utensils","Search","profileAPI","socialAPI","Overview","SocialProfile","Feed","Inputs","Groups","MealPlan","jsx","_jsx","jsxs","_jsxs","Dashboard","user","logout","navigate","location","loading","setLoading","checkingProfile","setCheckingProfile","showNewPostModal","setShowNewPostModal","showProfileDropdown","setShowProfileDropdown","dropdownButtonRef","setDropdownButtonRef","newPost","setNewPost","content","imageFile","allowComments","hideLikeCount","showSearchDropdown","setShowSearchDropdown","searchQuery","setSearchQuery","searchFilter","setSearchFilter","handleCreatePost","console","log","trim","alert","formData","FormData","append","toString","name","response","createPost","status","result","data","id","username","first_name","last_name","profile_picture","undefined","existingLocalPosts","JSON","parse","localStorage","getItem","updatedLocalPosts","filter","p","setItem","stringify","window","dispatchEvent","CustomEvent","detail","error","concat","Error","message","handleImageUpload","e","_e$target$files","file","target","files","_objectSpread","handleLogout","tabs","icon","path","getCurrentTab","currentPath","pathname","find","tab","startsWith","currentTab","checkProfileExists","retryCount","arguments","length","get","profile","hasAccessedApp","lastAccess","lastAccessDate","Date","hoursSinceAccess","now","getTime","setTimeout","toISOString","_error$response","handleClickOutside","event","closest","document","addEventListener","removeEventListener","handleMealUpdate","type","handleNavigateToMeals","className","children","onClick","value","onChange","style","backgroundImage","backgroundPosition","backgroundRepeat","backgroundSize","placeholder","toLowerCase","autoFocus","title","ref","src","alt","map","Icon","isActive","element","Navigate","to","replace","rows","URL","createObjectURL","accept","disabled","position","top","getBoundingClientRect","bottom","right","innerWidth","zIndex","width","backgroundColor","borderRadius","boxShadow","border","padding","body","_ref"],"sources":["C:/Users/arian/OneDrive/Desktop/Nutrition/client/src/components/Dashboard.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Routes, Route, useNavigate, useLocation } from 'react-router-dom';\nimport { createPortal } from 'react-dom';\nimport { useAuth } from '../contexts/AuthContext';\n// import { useUserSession } from '../hooks/useUserSession'; // Unused import removed\nimport { LogOut, User, Plus, BarChart3, Home, Target, PenTool, Image, X, ChevronDown, UserPlus, Settings, Utensils, Search } from 'lucide-react';\nimport { profileAPI, socialAPI } from '../services/api';\nimport Overview from './Overview';\nimport SocialProfile from './SocialProfile';\nimport Feed from './Feed';\nimport Inputs from './Inputs';\nimport Groups from './Groups';\nimport MealPlan from './MealPlan';\n\n// LoadingSpinner removed - not used in this component\n\nconst Dashboard: React.FC = () => {\n  const { user, logout } = useAuth();\n  const navigate = useNavigate();\n  const location = useLocation();\n  // const { hasAccessedAppBefore } = useUserSession(); // Unused variable removed\n  const [loading, setLoading] = useState(false);\n  const [checkingProfile, setCheckingProfile] = useState(true);\n  const [showNewPostModal, setShowNewPostModal] = useState(false);\n  const [showProfileDropdown, setShowProfileDropdown] = useState(false);\n  const [dropdownButtonRef, setDropdownButtonRef] = useState<HTMLButtonElement | null>(null);\n  const [newPost, setNewPost] = useState({\n    content: '',\n    imageFile: null as File | null,\n    allowComments: true,\n    hideLikeCount: false\n  });\n  const [showSearchDropdown, setShowSearchDropdown] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchFilter, setSearchFilter] = useState('Friends'); // Default filter\n\n  const handleCreatePost = async () => {\n    console.log('Dashboard handleCreatePost called with:', newPost);\n    \n    if (!newPost.content.trim()) {\n      console.log('No content, returning early');\n      alert('Please enter some content for your post');\n      return;\n    }\n\n    try {\n      // Create FormData for file upload\n      const formData = new FormData();\n      formData.append('content', newPost.content);\n      formData.append('allowComments', newPost.allowComments.toString());\n      formData.append('hideLikeCount', newPost.hideLikeCount.toString());\n      \n      if (newPost.imageFile) {\n        formData.append('image', newPost.imageFile);\n        console.log('Added image file:', newPost.imageFile.name);\n      }\n\n      console.log('Sending request to socialAPI.createPost from Dashboard');\n      \n      // Use the centralized socialAPI instead of direct fetch\n      const response = await socialAPI.createPost(formData);\n\n      console.log('Dashboard response status:', response.status);\n\n      if (response && (response.status === 200 || response.status === 201)) {\n        const result = response.data;\n        console.log('Dashboard post created successfully:', result);\n        \n        // Ensure the post has proper user information\n        if (!result.user && user) {\n          result.user = {\n            id: user.id,\n            username: user.username,\n            first_name: user.first_name,\n            last_name: user.last_name,\n            profile_picture: user.profile_picture || undefined\n          };\n        }\n        \n        // Store the new post in localStorage for persistence across navigation\n        const existingLocalPosts = JSON.parse(localStorage.getItem('local_posts') || '[]');\n        const updatedLocalPosts = [result, ...existingLocalPosts.filter((p: any) => p.id !== result.id)];\n        localStorage.setItem('local_posts', JSON.stringify(updatedLocalPosts));\n        console.log('üíæ Dashboard: Stored post in localStorage for persistence');\n        \n        setNewPost({ content: '', imageFile: null, allowComments: true, hideLikeCount: false });\n        setShowNewPostModal(false);\n        \n        // Trigger a custom event to update the feed\n        window.dispatchEvent(new CustomEvent('postCreated', { detail: result }));\n        \n        // Don't navigate - let the user stay on current page\n        console.log('üéâ Post created successfully from Dashboard!');\n      } else {\n        console.error('Dashboard failed to create post. Status:', response?.status, 'Response:', response);\n        alert(`Failed to create post: ${response?.status || 'Unknown error'}`);\n      }\n    } catch (error) {\n      console.error('Dashboard error creating post:', error);\n      alert('Error creating post: ' + (error instanceof Error ? error.message : 'Unknown error'));\n    }\n  };\n\n  const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      setNewPost({ ...newPost, imageFile: file });\n    }\n  };\n\n  const handleLogout = async () => {\n    setLoading(true);\n    try {\n      logout();\n      navigate('/login');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const tabs = [\n    { id: 'feed', name: 'Feed', icon: Home, path: '/dashboard/feed' },\n    { id: 'overview', name: 'Overview', icon: BarChart3, path: '/dashboard/overview' },\n    { id: 'groups', name: 'Groups', icon: User, path: '/dashboard/groups' },\n    { id: 'mealplan', name: 'Meal Plan', icon: Utensils, path: '/dashboard/mealplan' },\n    { id: 'profile', name: 'Profile', icon: User, path: '/dashboard/profile' },\n  ];\n\n  const getCurrentTab = () => {\n    const currentPath = location.pathname;\n    return tabs.find(tab => currentPath.startsWith(tab.path)) || tabs[0];\n  };\n\n  const currentTab = getCurrentTab();\n\n  // Check if user needs onboarding (new users only) - RENDER REDEPLOY PROTECTION\n  useEffect(() => {\n    const checkProfileExists = async (retryCount = 0) => {\n      try {\n        const response = await profileAPI.get();\n        if (!response.data.profile) {\n          // Check if this might be a temporary issue (Render redeploy)\n          const hasAccessedApp = localStorage.getItem('hasAccessedApp');\n          const lastAccess = localStorage.getItem('lastAccess');\n          \n          if (hasAccessedApp === 'true' && lastAccess) {\n            const lastAccessDate = new Date(lastAccess);\n            const hoursSinceAccess = (Date.now() - lastAccessDate.getTime()) / (1000 * 60 * 60);\n            \n            // If user accessed recently (within 24 hours), this is likely a Render redeploy\n            if (hoursSinceAccess < 24) {\n              console.log('üîÑ Render redeploy detected - user accessed recently, waiting for database restore...');\n              \n              if (retryCount < 5) {\n                // Wait and retry - database might be restoring\n                setTimeout(() => checkProfileExists(retryCount + 1), 2000 * (retryCount + 1));\n                return;\n              } else {\n                console.log('‚ö†Ô∏è Database still not restored after retries, allowing dashboard access');\n                setCheckingProfile(false);\n                return;\n              }\n            }\n          }\n          \n          // Truly new user - redirect to onboarding\n          console.log('New user with no profile, redirecting to onboarding');\n          navigate('/onboarding');\n          return;\n        }\n        \n        // User has a profile - mark them as having accessed the app\n        localStorage.setItem('hasAccessedApp', 'true');\n        localStorage.setItem('lastAccess', new Date().toISOString());\n        console.log('‚úÖ User has profile, allowing dashboard access');\n        setCheckingProfile(false);\n      } catch (error: any) {\n        console.error('‚ùå Error checking profile:', error);\n        \n        // Enhanced error handling for Render redeploys\n        const hasAccessedApp = localStorage.getItem('hasAccessedApp');\n        \n        if (error?.response?.status === 404) {\n          // Check if this is a returning user experiencing Render redeploy\n          if (hasAccessedApp === 'true' && retryCount < 3) {\n            console.log('üîÑ Returning user, 404 might be temporary (Render redeploy), retrying...');\n            setTimeout(() => checkProfileExists(retryCount + 1), 3000);\n            return;\n          }\n          console.log('Profile not found (404), redirecting to onboarding');\n          navigate('/onboarding');\n        } else {\n          // For network/server errors, be more lenient with existing users\n          if (hasAccessedApp === 'true') {\n            console.log('üîÑ Existing user with network error, allowing dashboard access');\n            setCheckingProfile(false);\n          } else if (retryCount < 2) {\n            console.log('üîÑ Network error, retrying profile check...');\n            setTimeout(() => checkProfileExists(retryCount + 1), 2000);\n          } else {\n            console.log('‚ö†Ô∏è Network issues persist, allowing onboarding attempt');\n            navigate('/onboarding');\n          }\n        }\n      }\n    };\n    \n    if (user) {\n      checkProfileExists();\n    } else {\n      setCheckingProfile(false);\n    }\n  }, [user, navigate]);\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      const target = event.target as Element;\n      if (!target.closest('.profile-dropdown')) {\n        setShowProfileDropdown(false);\n      }\n      // Close search when clicking outside the inline search bar\n      if (showSearchDropdown && !target.closest('.inline-search-bar')) {\n        setShowSearchDropdown(false);\n        setSearchQuery('');\n      }\n    };\n\n    if (showProfileDropdown || showSearchDropdown) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showProfileDropdown, showSearchDropdown]);\n\n  // Listen for meal updates to refresh sidebar data globally\n  useEffect(() => {\n    const handleMealUpdate = (event: any) => {\n      console.log('üè† Dashboard: Meal update event received:', event.type);\n      // Force refresh of any sidebar data if needed\n      // This ensures sidebar updates across all tabs\n      setTimeout(() => {\n        console.log('üè† Dashboard: Dispatching sidebar refresh...');\n        window.dispatchEvent(new CustomEvent('sidebarRefresh'));\n      }, 100);\n    };\n\n    const handleNavigateToMeals = () => {\n      navigate('/dashboard/inputs');\n    };\n\n    // Listen to various meal-related events\n    window.addEventListener('mealAdded', handleMealUpdate);\n    window.addEventListener('mealDataChanged', handleMealUpdate);\n    window.addEventListener('mealDeleted', handleMealUpdate);\n    window.addEventListener('mealUpdated', handleMealUpdate);\n    window.addEventListener('navigateToMeals', handleNavigateToMeals);\n    \n    return () => {\n      window.removeEventListener('mealAdded', handleMealUpdate);\n      window.removeEventListener('mealDataChanged', handleMealUpdate);\n      window.removeEventListener('mealDeleted', handleMealUpdate);\n      window.removeEventListener('mealUpdated', handleMealUpdate);\n      window.removeEventListener('navigateToMeals', handleNavigateToMeals);\n    };\n  }, [navigate]);\n\n  if (checkingProfile) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-orange-50 via-white to-red-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Checking your profile...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-orange-50 via-white to-red-50\">\n      {/* Header */}\n      <header className=\"bg-white/80 backdrop-blur-sm shadow-lg border-b border-orange-200/50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex items-center justify-between h-20\">\n            {/* Left Section: Logo + Search */}\n            <div className=\"flex items-center space-x-6\">\n              <button \n                onClick={() => navigate('/dashboard/feed')}\n                className=\"flex items-center hover:opacity-80 transition-opacity\"\n              >\n                <div className=\"relative\">\n                  <div className=\"h-10 w-10 bg-gradient-to-r from-orange-500 to-red-500 rounded-xl flex items-center justify-center shadow-lg\">\n                    <Target className=\"w-5 h-5 text-white\" />\n                  </div>\n                </div>\n                <h1 className=\"ml-3 text-xl font-bold text-gray-900\">\n                  NutriTrack\n                </h1>\n              </button>\n              \n              {/* Inline Search Bar */}\n              <div className=\"flex items-center\">\n              {showSearchDropdown ? (\n                <div className=\"flex items-center bg-white border border-gray-300 rounded-xl shadow-lg transition-all duration-200 inline-search-bar\">\n                  {/* Search Filter Dropdown */}\n                  <div className=\"relative\">\n                    <select\n                      value={searchFilter}\n                      onChange={(e) => setSearchFilter(e.target.value)}\n                      className=\"appearance-none bg-white hover:bg-gray-50 border-0 rounded-l-xl px-4 py-2 pr-10 text-sm font-medium text-gray-700 focus:outline-none focus:ring-2 focus:ring-orange-500 transition-all duration-200 cursor-pointer\"\n                      style={{\n                        backgroundImage: `url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e\")`,\n                        backgroundPosition: 'right 0.5rem center',\n                        backgroundRepeat: 'no-repeat',\n                        backgroundSize: '1.2em 1.2em'\n                      }}\n                    >\n                      <option value=\"Friends\" className=\"bg-white text-gray-700 py-3 px-4 hover:bg-gray-50\">Friends</option>\n                      <option value=\"Groups\" className=\"bg-white text-gray-700 py-3 px-4 hover:bg-gray-50\">Groups</option>\n                    </select>\n                  </div>\n                  \n                  {/* Search Input */}\n                  <input\n                    type=\"text\"\n                    placeholder={`Search ${searchFilter.toLowerCase()}...`}\n                    value={searchQuery}\n                    onChange={(e) => setSearchQuery(e.target.value)}\n                    className=\"border-0 border-l border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500 text-sm w-64 bg-white placeholder-gray-500\"\n                    autoFocus\n                  />\n                  \n                  {/* Close Button */}\n                  <button\n                    onClick={() => {\n                      setShowSearchDropdown(false);\n                      setSearchQuery('');\n                    }}\n                    className=\"p-2 hover:bg-gray-100 rounded-r-xl transition-colors border-l border-gray-300\"\n                  >\n                    <X className=\"h-4 w-4 text-gray-400 hover:text-gray-600\" />\n                  </button>\n                </div>\n              ) : (\n                <button\n                  onClick={() => setShowSearchDropdown(true)}\n                  className=\"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2 border border-gray-300\"\n                >\n                  <Search className=\"h-4 w-4\" />\n                  <span>Search</span>\n                </button>\n              )}\n              </div>\n            </div>\n            \n            {/* Right Section: User Info + Actions */}\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"text-sm text-gray-700\">\n                Welcome, <span className=\"font-medium\">{user?.first_name || 'User'}</span>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <div className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\" title=\"Server connected\"></div>\n                <span className=\"text-xs text-gray-500\">Connected</span>\n              </div>\n\n              <button\n                onClick={() => {\n                  navigate('/dashboard/inputs');\n                  // Trigger sidebar refresh when going to add meal\n                  setTimeout(() => {\n                    window.dispatchEvent(new CustomEvent('sidebarRefresh'));\n                  }, 100);\n                }}\n                className=\"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2 shadow-md hover:shadow-lg\"\n              >\n                <Plus className=\"h-4 w-4\" />\n                <span>Meals</span>\n              </button>\n              <button\n                onClick={() => setShowNewPostModal(true)}\n                className=\"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2 shadow-md hover:shadow-lg\"\n              >\n                <PenTool className=\"h-4 w-4\" />\n                <span>Post</span>\n              </button>\n              {/* Profile Dropdown */}\n              <div className=\"relative profile-dropdown\">\n                <button\n                  ref={setDropdownButtonRef}\n                  onClick={() => setShowProfileDropdown(!showProfileDropdown)}\n                  className=\"flex items-center space-x-2 px-3 py-2 rounded-lg hover:bg-gray-100 transition-all duration-200\"\n                >\n                  <div className=\"w-8 h-8 bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center\">\n                    {user?.profile_picture ? (\n                      <img \n                        src={user.profile_picture} \n                        alt=\"Profile\" \n                        className=\"w-8 h-8 rounded-full object-cover\"\n                      />\n                    ) : (\n                      <User className=\"w-4 h-4 text-white\" />\n                    )}\n                  </div>\n                  <ChevronDown className={`w-4 h-4 text-gray-600 transition-transform duration-200 ${\n                    showProfileDropdown ? 'rotate-180' : ''\n                  }`} />\n                </button>\n\n              </div>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Navigation Tabs */}\n      <nav className=\"bg-white/80 backdrop-blur-sm border-b border-orange-200/50 shadow-sm\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex space-x-8\">\n            {tabs.map((tab) => {\n              const Icon = tab.icon;\n              const isActive = currentTab.id === tab.id;\n              \n              return (\n                <button\n                  key={tab.id}\n                  onClick={() => navigate(tab.path)}\n                  className={`flex items-center space-x-2 py-4 px-1 border-b-3 font-semibold text-sm transition-all duration-200 transform hover:-translate-y-0.5 ${\n                    isActive\n                      ? 'border-orange-500 text-orange-600 shadow-sm'\n                      : 'border-transparent text-gray-500 hover:text-orange-600 hover:border-orange-300'\n                  }`}\n                >\n                  {tab.id === 'profile' ? (\n                    <div className=\"w-5 h-5 rounded-full overflow-hidden flex items-center justify-center bg-gradient-to-r from-orange-500 to-red-500\">\n                      {user?.profile_picture ? (\n                        <img \n                          src={user.profile_picture} \n                          alt=\"Profile\" \n                          className=\"w-5 h-5 rounded-full object-cover\"\n                        />\n                      ) : (\n                        <User className=\"w-3 h-3 text-white\" />\n                      )}\n                    </div>\n                  ) : (\n                    <Icon className=\"h-5 w-5\" />\n                  )}\n                  <span>{tab.name}</span>\n                </button>\n              );\n            })}\n          </div>\n        </div>\n      </nav>\n\n      {/* Main Content */}\n      <main className=\"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8\">\n        <Routes>\n          <Route path=\"/\" element={<Navigate to=\"/dashboard/feed\" replace />} />\n          <Route path=\"/overview\" element={<Overview />} />\n          <Route path=\"/feed\" element={<Feed />} />\n          <Route path=\"/inputs\" element={<Inputs />} />\n          <Route path=\"/mealplan\" element={<MealPlan />} />\n          <Route path=\"/groups\" element={<Groups />} />\n          <Route path=\"/profile\" element={<SocialProfile />} />\n          {/* Catch-all route for any invalid dashboard paths */}\n          <Route path=\"*\" element={<Navigate to=\"/dashboard/feed\" replace />} />\n        </Routes>\n      </main>\n\n      {/* New Post Modal */}\n      {showNewPostModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[85vh] flex flex-col\">\n            {/* Modal Header */}\n            <div className=\"flex items-center justify-between p-4 border-b border-gray-200 flex-shrink-0\">\n              <h3 className=\"text-xl font-semibold text-gray-900\">Create New Post</h3>\n              <button\n                onClick={() => setShowNewPostModal(false)}\n                className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n              >\n                <X className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            {/* Modal Body */}\n            <div className=\"p-4 space-y-4 flex-1 overflow-y-auto\">\n              {/* Text Input */}\n              <div>\n                <textarea\n                  value={newPost.content}\n                  onChange={(e) => setNewPost({ ...newPost, content: e.target.value })}\n                  placeholder=\"What's going on?\"\n                  className=\"w-full border border-gray-300 rounded-lg p-4 resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\"\n                  rows={4}\n                />\n              </div>\n\n              {/* Image Preview */}\n              {newPost.imageFile && (\n                <div className=\"relative\">\n                  <img\n                    src={URL.createObjectURL(newPost.imageFile)}\n                    alt=\"Preview\"\n                    className=\"w-full h-40 object-cover rounded-lg\"\n                  />\n                  <button\n                    onClick={() => setNewPost({ ...newPost, imageFile: null })}\n                    className=\"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors shadow-lg\"\n                  >\n                    <X className=\"h-3 w-3\" />\n                  </button>\n                </div>\n              )}\n\n              {/* Upload Controls */}\n              <div className=\"border border-gray-200 rounded-lg p-3\">\n                <h4 className=\"font-medium text-gray-900 mb-2\">Add to your post</h4>\n                <div className=\"flex items-center space-x-4\">\n                  <label className=\"flex items-center space-x-2 bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded-lg cursor-pointer transition-colors\">\n                    <Image className=\"h-4 w-4\" />\n                    <span className=\"text-sm font-medium\">Upload Photo</span>\n                    <input\n                      type=\"file\"\n                      accept=\"image/*\"\n                      onChange={handleImageUpload}\n                      className=\"hidden\"\n                    />\n                  </label>\n                </div>\n              </div>\n\n              {/* Privacy Settings */}\n              <div className=\"border border-gray-200 rounded-lg p-3\">\n                <h4 className=\"font-medium text-gray-900 mb-3\">Privacy Settings</h4>\n                <div className=\"space-y-3\">\n                  {/* Allow Comments Toggle */}\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <label className=\"text-sm font-medium text-gray-700\">Allow comments</label>\n                      <p className=\"text-xs text-gray-500\">Let people comment on your post</p>\n                    </div>\n                    <button\n                      onClick={() => setNewPost({ ...newPost, allowComments: !newPost.allowComments })}\n                      className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${\n                        newPost.allowComments ? 'bg-blue-600' : 'bg-gray-200'\n                      }`}\n                    >\n                      <span\n                        className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${\n                          newPost.allowComments ? 'translate-x-6' : 'translate-x-1'\n                        }`}\n                      />\n                    </button>\n                  </div>\n\n                  {/* Hide Like Count Toggle */}\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <label className=\"text-sm font-medium text-gray-700\">Hide like count</label>\n                      <p className=\"text-xs text-gray-500\">Only you will see the total number of likes</p>\n                    </div>\n                    <button\n                      onClick={() => setNewPost({ ...newPost, hideLikeCount: !newPost.hideLikeCount })}\n                      className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${\n                        newPost.hideLikeCount ? 'bg-blue-600' : 'bg-gray-200'\n                      }`}\n                    >\n                      <span\n                        className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${\n                          newPost.hideLikeCount ? 'translate-x-6' : 'translate-x-1'\n                        }`}\n                      />\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Modal Footer */}\n            <div className=\"flex items-center justify-end space-x-3 p-4 border-t border-gray-200 bg-gray-50 flex-shrink-0\">\n              <button\n                onClick={() => setShowNewPostModal(false)}\n                className=\"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={() => {\n                  console.log('Dashboard Post button clicked', newPost);\n                  handleCreatePost();\n                }}\n                disabled={!newPost.content.trim()}\n                className=\"px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors\"\n              >\n                Post\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Profile Dropdown Portal - Renders outside normal DOM hierarchy */}\n      {showProfileDropdown && dropdownButtonRef && createPortal(\n        <div \n          className=\"profile-dropdown\"\n          style={{\n            position: 'fixed',\n            top: `${dropdownButtonRef.getBoundingClientRect().bottom + 8}px`,\n            right: `${window.innerWidth - dropdownButtonRef.getBoundingClientRect().right}px`,\n            zIndex: 999999,\n            width: '192px',\n            backgroundColor: 'white',\n            borderRadius: '0.5rem',\n            boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(0, 0, 0, 0.05)',\n            border: '1px solid rgb(229, 231, 235)',\n            padding: '0.25rem 0'\n          }}\n        >\n          <button\n            onClick={() => {\n              setShowProfileDropdown(false);\n              // TODO: Navigate to find friends page\n            }}\n            className=\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2\"\n          >\n            <UserPlus className=\"w-4 h-4\" />\n            <span>Find Friends</span>\n          </button>\n          <button\n            onClick={() => {\n              setShowProfileDropdown(false);\n              navigate('/dashboard/profile');\n            }}\n            className=\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2\"\n          >\n            <User className=\"w-4 h-4\" />\n            <span>My Profile</span>\n          </button>\n          <button\n            onClick={() => {\n              setShowProfileDropdown(false);\n              // TODO: Navigate to settings page\n            }}\n            className=\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2\"\n          >\n            <Settings className=\"w-4 h-4\" />\n            <span>Settings</span>\n          </button>\n          <div className=\"border-t border-gray-100 my-1\"></div>\n          <button\n            onClick={() => {\n              setShowProfileDropdown(false);\n              handleLogout();\n            }}\n            disabled={loading}\n            className=\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2\"\n          >\n            <LogOut className=\"w-4 h-4\" />\n            <span>Logout</span>\n          </button>\n        </div>,\n        document.body\n      )}\n    </div>\n  );\n};\n\n// Helper component for navigation\nconst Navigate: React.FC<{ to: string; replace?: boolean }> = ({ to, replace }) => {\n  const navigate = useNavigate();\n  React.useEffect(() => {\n    navigate(to, { replace });\n  }, [navigate, to, replace]);\n  return null;\n};\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}