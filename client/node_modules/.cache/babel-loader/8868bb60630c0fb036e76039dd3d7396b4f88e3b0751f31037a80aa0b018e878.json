{"ast":null,"code":"import _objectSpread from\"C:/Users/arian/OneDrive/Desktop/Nutrition/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{useAuth}from'../contexts/AuthContext';import{Heart,MessageCircle,Share,MoreHorizontal,PenTool,Bookmark,Image,X,ChevronLeft,ChevronRight}from'lucide-react';import{formatDistanceToNow,format,startOfMonth,endOfMonth,eachDayOfInterval,isToday,addMonths,subMonths}from'date-fns';import{diaryAPI,mealsAPI,profileAPI,socialAPI}from'../services/api';import{usePostPersistence}from'../hooks/usePostPersistence';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Feed=()=>{var _user$first_name,_user$username,_profileData$profile,_profileData$profile2,_profileData$profile3,_user$first_name2,_user$username2,_user$first_name4,_user$username4;const{user}=useAuth();// const navigate = useNavigate(); // Unused\nconst[posts,setPosts]=useState([]);const{localPosts,savePostLocally,mergeWithServerPosts,clearLocalPosts}=usePostPersistence();const[loading,setLoading]=useState(true);const[creatingPost,setCreatingPost]=useState(false);const[showCreatePost,setShowCreatePost]=useState(false);const[newPost,setNewPost]=useState({content:'',imageFile:null,mealData:null,allowComments:true,hideLikeCount:false});const[expandedComments,setExpandedComments]=useState(new Set());const[comments,setComments]=useState({});const[newComments,setNewComments]=useState({});const[loadingComments,setLoadingComments]=useState(new Set());// Sidebar data states\nconst[profileData,setProfileData]=useState(null);const[todayNutrition,setTodayNutrition]=useState(null);const[currentDate,setCurrentDate]=useState(new Date());const[monthData,setMonthData]=useState(null);const[sidebarLoading,setSidebarLoading]=useState(true);// Follow people search states\nconst[showFollowSearch,setShowFollowSearch]=useState(false);const[searchQuery,setSearchQuery]=useState('');const[searchResults,setSearchResults]=useState([]);const[searchLoading,setSearchLoading]=useState(false);const formatPostDate=dateString=>{// Handle invalid or missing date strings\nif(!dateString){return'Just now';}const postDate=new Date(dateString);// Check if the date is valid\nif(isNaN(postDate.getTime())){console.warn('Invalid date string:',dateString);return'Just now';}const today=new Date();const isToday=postDate.toDateString()===today.toDateString();if(isToday){return\"Today at \".concat(postDate.toLocaleTimeString('en-US',{hour:'numeric',minute:'2-digit',hour12:true}));}else{try{return formatDistanceToNow(postDate,{addSuffix:true});}catch(error){console.warn('Error formatting date distance:',error);return'Recently';}}};const loadMonthData=useCallback(async()=>{try{var _response$data$days,_response$data$days$f;const year=currentDate.getFullYear();const month=currentDate.getMonth()+1;console.log('📅 Feed Calendar: Loading month data for:',{year,month});// Use the EXACT same API call as Diary component\nconst response=await diaryAPI.getMonth(year,month);console.log('📅 Feed Calendar: Response received:',response.data);console.log('📅 Feed Calendar: Days with data:',((_response$data$days=response.data.days)===null||_response$data$days===void 0?void 0:(_response$data$days$f=_response$data$days.filter(d=>d.has_data))===null||_response$data$days$f===void 0?void 0:_response$data$days$f.length)||0);setMonthData(response.data);}catch(error){console.error('📅 Feed Calendar: Error loading month data:',error);setMonthData(null);}},[currentDate]);const loadSidebarData=useCallback(async()=>{if(!user)return;setSidebarLoading(true);try{console.log('📊 Feed: Loading sidebar data...');// Load profile data using the same API as Overview - FIXED\nconst profileResponse=await profileAPI.get();console.log('📊 Feed: Full profile response:',profileResponse.data);if(profileResponse.data){var _profileResponse$data,_profileResponse$data2,_profileResponse$data3;setProfileData(profileResponse.data);console.log('📊 Feed: Profile data set:',{posts:(_profileResponse$data=profileResponse.data.profile)===null||_profileResponse$data===void 0?void 0:_profileResponse$data.posts_count,followers:(_profileResponse$data2=profileResponse.data.profile)===null||_profileResponse$data2===void 0?void 0:_profileResponse$data2.followers_count,following:(_profileResponse$data3=profileResponse.data.profile)===null||_profileResponse$data3===void 0?void 0:_profileResponse$data3.following_count});}// Load today's nutrition using EXACT same method as Overview - FIXED\nconst today=new Date().toISOString().split('T')[0];console.log('📊 Feed: Loading meals for date:',today);const mealsResponse=await mealsAPI.getByDate(today);console.log('📊 Feed: Raw meals response:',mealsResponse);console.log('📊 Feed: Meals data:',mealsResponse.data);if(mealsResponse.data&&mealsResponse.data.meals){var _profileResponse$data4,_profileResponse$data5;// Calculate totals from meals (EXACT same as Overview)\nconst meals=mealsResponse.data.meals||[];console.log('📊 Feed: Processing meals:',meals.length,'meals found');const totalCalories=meals.reduce((sum,meal)=>{console.log('📊 Feed: Meal calories:',meal.calories);return sum+(meal.calories||0);},0);const totalProtein=meals.reduce((sum,meal)=>sum+(meal.protein||0),0);const totalCarbs=meals.reduce((sum,meal)=>sum+(meal.carbs||0),0);const totalFat=meals.reduce((sum,meal)=>sum+(meal.fat||0),0);// Create nutrition data object (same structure as Overview)\nconst nutritionData={totalCalories:totalCalories,totalProtein:totalProtein,totalCarbs:totalCarbs,totalFat:totalFat,calorieGoal:((_profileResponse$data4=profileResponse.data.profile)===null||_profileResponse$data4===void 0?void 0:_profileResponse$data4.daily_calories)||2000,proteinGoal:((_profileResponse$data5=profileResponse.data.profile)===null||_profileResponse$data5===void 0?void 0:_profileResponse$data5.daily_protein)||150};console.log('📊 Feed: Final calculated nutrition data:',nutritionData);setTodayNutrition(nutritionData);}else{var _profileResponse$data6,_profileResponse$data7;console.log('📊 Feed: No meals data found, setting empty nutrition');setTodayNutrition({totalCalories:0,totalProtein:0,totalCarbs:0,totalFat:0,calorieGoal:((_profileResponse$data6=profileResponse.data.profile)===null||_profileResponse$data6===void 0?void 0:_profileResponse$data6.daily_calories)||2000,proteinGoal:((_profileResponse$data7=profileResponse.data.profile)===null||_profileResponse$data7===void 0?void 0:_profileResponse$data7.daily_protein)||150});}// Load month data for calendar - FIXED\nawait loadMonthData();}catch(error){console.error('📊 Feed: Error loading sidebar data:',error);// Set default nutrition data on error\nsetTodayNutrition({totalCalories:0,totalProtein:0,totalCarbs:0,totalFat:0,calorieGoal:2000,proteinGoal:150});}finally{setSidebarLoading(false);}},[user,loadMonthData]);const loadPosts=async()=>{try{console.log('📡 Loading posts from feed...');console.log('💾 Current localStorage posts:',JSON.parse(localStorage.getItem('local_posts')||'[]'));const response=await socialAPI.getFeed();console.log('📡 Feed response:',response);if(response&&response.data){console.log('✅ Posts loaded successfully:',response.data);// Ensure response.data is an array\nlet serverPosts=[];if(Array.isArray(response.data)){serverPosts=response.data;}else if(response.data.posts&&Array.isArray(response.data.posts)){serverPosts=response.data.posts;}console.log('🔄 Server returned',serverPosts.length,'posts');console.log('💾 Local posts:',localPosts.length);// ALWAYS merge server and local posts properly\nconst mergedPosts=mergeWithServerPosts(serverPosts);console.log('✅ Merged posts:',mergedPosts.length,'total posts');setPosts(mergedPosts);}else{console.warn('⚠️ No data in feed response');// Don't clear posts if server fails - keep local posts\nif(localPosts.length>0){console.log('📱 Using local posts as fallback:',localPosts.length);setPosts(localPosts);}else{setPosts([]);}}}catch(error){console.error('❌ Error loading posts:',error);// On error, use local posts as fallback\nif(localPosts.length>0){console.log('📱 Using local posts due to error:',localPosts.length);setPosts(localPosts);}}finally{setLoading(false);}};const handleLike=async postId=>{try{console.log('👍 Toggling like for post:',postId);const response=await socialAPI.likePost(postId);console.log('👍 Like response:',response.data);// Update local state optimistically\nsetPosts(prevPosts=>{const postsArray=Array.isArray(prevPosts)?prevPosts:[];return postsArray.map(post=>post.id===postId?_objectSpread(_objectSpread({},post),{},{is_liked:!post.is_liked,likes_count:post.is_liked?post.likes_count-1:post.likes_count+1}):post);});}catch(error){console.error('❌ Error liking post:',error);alert('Failed to like post. Please try again.');}};const handleBookmark=async postId=>{try{console.log('🔖 Toggling bookmark for post:',postId);const response=await socialAPI.bookmarkPost(postId);console.log('🔖 Bookmark response:',response.data);// Update local state optimistically\nsetPosts(prevPosts=>{const postsArray=Array.isArray(prevPosts)?prevPosts:[];return postsArray.map(post=>post.id===postId?_objectSpread(_objectSpread({},post),{},{is_bookmarked:!post.is_bookmarked}):post);});}catch(error){console.error('❌ Error bookmarking post:',error);alert('Failed to bookmark post. Please try again.');}};const toggleComments=async postId=>{if(expandedComments.has(postId)){setExpandedComments(prev=>{const newSet=new Set(prev);newSet.delete(postId);return newSet;});}else{setExpandedComments(prev=>{const newSet=new Set(prev);newSet.add(postId);return newSet;});if(!comments[postId]){setLoadingComments(prev=>{const newSet=new Set(prev);newSet.add(postId);return newSet;});try{console.log('💬 Loading comments for post:',postId);const response=await socialAPI.getComments(postId);if(response&&response.data){console.log('✅ Comments loaded:',response.data);setComments(prev=>_objectSpread(_objectSpread({},prev),{},{[postId]:response.data}));}}catch(error){console.error('❌ Error loading comments:',error);}finally{setLoadingComments(prev=>{const newSet=new Set(prev);newSet.delete(postId);return newSet;});}}}};const handleAddComment=async postId=>{var _newComments$postId;const content=(_newComments$postId=newComments[postId])===null||_newComments$postId===void 0?void 0:_newComments$postId.trim();if(!content)return;try{console.log('💬 Adding comment to post:',postId,'Content:',content);const response=await socialAPI.addComment(postId,content);if(response&&response.data){console.log('✅ Comment added:',response.data);const newComment=response.data;setComments(prev=>_objectSpread(_objectSpread({},prev),{},{[postId]:[...(prev[postId]||[]),newComment]}));setNewComments(prev=>_objectSpread(_objectSpread({},prev),{},{[postId]:''}));setPosts(prevPosts=>{const postsArray=Array.isArray(prevPosts)?prevPosts:[];return postsArray.map(post=>post.id===postId?_objectSpread(_objectSpread({},post),{},{comments_count:post.comments_count+1}):post);});}}catch(error){console.error('❌ Error adding comment:',error);}};const handleCreatePost=async()=>{console.log('🛡️ BULLETPROOF POST CREATION v2.0 STARTING...');console.log('📝 Current newPost state:',newPost);// BULLETPROOF VALIDATION\nif(!newPost.content.trim()&&!newPost.imageFile){alert('Please enter some content or add an image before posting.');return;}if(!(user!==null&&user!==void 0&&user.id)){alert('You must be logged in to create a post.');return;}setCreatingPost(true);// BULLETPROOF: Create post immediately for instant UI feedback\nconst instantPost={id:Date.now(),content:newPost.content.trim(),image_url:null,meal_data:newPost.mealData,user:{id:user.id,username:user.username||\"user\".concat(user.id),first_name:user.first_name||'User',last_name:user.last_name||'User',profile_picture:user.profile_picture},created_at:new Date().toISOString(),likes_count:0,comments_count:0,is_liked:false,is_bookmarked:false,allow_comments:newPost.allowComments,hide_like_count:newPost.hideLikeCount,_status:'creating'};// Show post immediately\nconsole.log('⚡ Adding post to feed immediately for instant feedback');setPosts(prevPosts=>{const postsArray=Array.isArray(prevPosts)?prevPosts:[];return[instantPost,...postsArray];});// Reset form immediately for better UX\nsetNewPost({content:'',imageFile:null,mealData:null,allowComments:true,hideLikeCount:false});setShowCreatePost(false);// BULLETPROOF: Try to save to server in background\ntry{var _serverResponse,_serverResponse2,_serverResponse2$post,_serverResponse3,_serverResponse4,_serverResponse4$post;const formData=new FormData();formData.append('content',instantPost.content);formData.append('allow_comments',instantPost.allow_comments.toString());formData.append('hide_like_count',instantPost.hide_like_count.toString());if(newPost.imageFile){formData.append('image',newPost.imageFile);}if(newPost.mealData){formData.append('meal_data',JSON.stringify(newPost.mealData));}console.log('🚀 Attempting to save to server...');// Try multiple methods to save to server\nlet serverSuccess=false;let serverResponse=null;// Method 1: socialAPI\ntry{const response=await socialAPI.createPost(formData);if(response&&(response.status===200||response.status===201)&&response.data){serverSuccess=true;serverResponse=response.data;console.log('✅ socialAPI SUCCESS');}}catch(apiError){console.warn('⚠️ socialAPI failed:',apiError);}// Method 2: Direct fetch\nif(!serverSuccess){try{const authData=JSON.parse(localStorage.getItem('nutritrack_auth_data')||'{}');const token=authData.token||localStorage.getItem('token');if(token){const directResponse=await fetch(\"\".concat(process.env.REACT_APP_API_URL||'https://nutrition-back-jtf3.onrender.com',\"/api/social/posts\"),{method:'POST',headers:{'Authorization':\"Bearer \".concat(token)},body:formData});if(directResponse.ok){serverResponse=await directResponse.json();serverSuccess=true;console.log('✅ Direct fetch SUCCESS');}}}catch(directError){console.warn('⚠️ Direct fetch failed:',directError);}}// Update the post in the feed with server data or keep as local\nconst finalPost=_objectSpread(_objectSpread({},instantPost),{},{id:((_serverResponse=serverResponse)===null||_serverResponse===void 0?void 0:_serverResponse.postId)||((_serverResponse2=serverResponse)===null||_serverResponse2===void 0?void 0:(_serverResponse2$post=_serverResponse2.post)===null||_serverResponse2$post===void 0?void 0:_serverResponse2$post.id)||instantPost.id,image_url:((_serverResponse3=serverResponse)===null||_serverResponse3===void 0?void 0:_serverResponse3.imageUrl)||((_serverResponse4=serverResponse)===null||_serverResponse4===void 0?void 0:(_serverResponse4$post=_serverResponse4.post)===null||_serverResponse4$post===void 0?void 0:_serverResponse4$post.image_url)||null,_status:serverSuccess?'saved':'local-only',_serverSaved:serverSuccess});// Update the existing post in the feed\nsetPosts(prevPosts=>{const postsArray=Array.isArray(prevPosts)?prevPosts:[];return postsArray.map(p=>p.id===instantPost.id?finalPost:p);});// Save for persistence\nsavePostLocally(finalPost);if(serverSuccess){console.log('🎉 POST SAVED TO SERVER SUCCESSFULLY');window.dispatchEvent(new CustomEvent('postCreated',{detail:finalPost}));}else{console.log('📱 POST SAVED LOCALLY - Will sync when server available');}}catch(error){console.error('💥 Background server save failed:',error);// Don't show error to user - post is already visible\nconsole.log('📱 Post remains local-only due to server issues');}finally{setCreatingPost(false);console.log('✅ BULLETPROOF POST CREATION COMPLETED');}};const handleImageUpload=event=>{var _event$target$files;const file=(_event$target$files=event.target.files)===null||_event$target$files===void 0?void 0:_event$target$files[0];if(file){setNewPost(prev=>_objectSpread(_objectSpread({},prev),{},{imageFile:file}));}};const searchUsers=async query=>{if(!query.trim()){setSearchResults([]);return;}setSearchLoading(true);try{// Get token from proper auth system\nconst authData=JSON.parse(localStorage.getItem('nutritrack_auth_data')||'{}');const token=authData.token||localStorage.getItem('token');const response=await fetch(\"/api/social/users/search?q=\".concat(encodeURIComponent(query)),{headers:{'Authorization':\"Bearer \".concat(token)}});if(response.ok){const data=await response.json();setSearchResults(data);}}catch(error){console.error('Error searching users:',error);}finally{setSearchLoading(false);}};const handleFollow=async userId=>{try{// Get token from proper auth system\nconst authData=JSON.parse(localStorage.getItem('nutritrack_auth_data')||'{}');const token=authData.token||localStorage.getItem('token');const response=await fetch(\"/api/social/users/\".concat(userId,\"/follow\"),{method:'POST',headers:{'Authorization':\"Bearer \".concat(token)}});if(response.ok){setSearchResults(searchResults.map(user=>user.id===userId?_objectSpread(_objectSpread({},user),{},{is_following:!user.is_following}):user));}}catch(error){console.error('Error following user:',error);}};useEffect(()=>{if(user){console.log('🔧 Feed: Loading posts...');// First, immediately show local posts if available\nif(localPosts.length>0){console.log('⚡ Feed: Showing local posts immediately:',localPosts.length);setPosts(localPosts);}// Then load from server and merge\nloadPosts();}},[user,localPosts]);// Functions are stable\n// Debug posts state changes\nuseEffect(()=>{console.log('🎯 Posts state changed:',posts.length,'posts');console.log('📊 Current posts:',posts);},[posts]);useEffect(()=>{console.log('🔧 Feed: Month data effect triggered');loadMonthData();},[]);// Function is stable\n// Force data load when user becomes available\nuseEffect(()=>{if(user){console.log('🔧 Feed: User available, loading data immediately...');// Clear any stale local posts to prevent duplicates on login\nif(localPosts.length>0){console.log('🧹 Clearing stale local posts to prevent duplicates');clearLocalPosts();}loadSidebarData();loadMonthData();loadPosts();}},[user,localPosts.length]);// Functions are stable\n// Enhanced automatic syncing with Overview page - IMPROVED\nuseEffect(()=>{const handleMealDataChanged=()=>{console.log('📊 Feed: Meal data changed event received, auto-syncing...');loadSidebarData();loadMonthData();// Also refresh calendar when meals change\n};const handleStorageChange=e=>{if(e.key==='mealAdded'||e.key==='mealDeleted'||e.key==='mealUpdated'){console.log('📊 Feed: Storage event detected, auto-syncing...');handleMealDataChanged();}};// Listen for custom events (same tab)\nwindow.addEventListener('mealDataChanged',handleMealDataChanged);window.addEventListener('mealAdded',handleMealDataChanged);window.addEventListener('mealUpdated',handleMealDataChanged);window.addEventListener('mealDeleted',handleMealDataChanged);// Listen for storage events (cross-tab)\nwindow.addEventListener('storage',handleStorageChange);// Also listen for sidebar refresh events from other components\nwindow.addEventListener('sidebarRefresh',handleMealDataChanged);return()=>{window.removeEventListener('mealDataChanged',handleMealDataChanged);window.removeEventListener('mealAdded',handleMealDataChanged);window.removeEventListener('mealUpdated',handleMealDataChanged);window.removeEventListener('mealDeleted',handleMealDataChanged);window.removeEventListener('storage',handleStorageChange);window.removeEventListener('sidebarRefresh',handleMealDataChanged);};},[]);// Functions are stable\nif(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"})});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-6 max-w-7xl mx-auto p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-80 flex-shrink-0 sticky top-6 self-start space-y-6 max-h-[calc(100vh-3rem)] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 relative overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-0 right-0 w-16 h-16 bg-blue-50 rounded-full -translate-y-8 translate-x-8\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-0 left-0 w-12 h-12 bg-purple-50 rounded-full translate-y-6 -translate-x-6\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative text-center\",children:[user!==null&&user!==void 0&&user.profile_picture?/*#__PURE__*/_jsxs(\"div\",{className:\"relative inline-block\",children:[/*#__PURE__*/_jsx(\"img\",{src:user.profile_picture,alt:\"Profile\",className:\"w-20 h-20 rounded-full mx-auto mb-4 object-cover ring-3 ring-blue-100 shadow-md\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-3 border-white\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"relative inline-block\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-20 h-20 rounded-full bg-blue-500 flex items-center justify-center text-white text-xl font-semibold mx-auto mb-4 ring-3 ring-blue-100 shadow-md\",children:(user===null||user===void 0?void 0:(_user$first_name=user.first_name)===null||_user$first_name===void 0?void 0:_user$first_name.charAt(0))||(user===null||user===void 0?void 0:(_user$username=user.username)===null||_user$username===void 0?void 0:_user$username.charAt(0))||'U'}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-3 border-white\"})]}),/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-1\",children:[user===null||user===void 0?void 0:user.first_name,\" \",user===null||user===void 0?void 0:user.last_name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-500 mb-4\",children:[\"@\",user===null||user===void 0?void 0:user.username]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-bold text-blue-600\",children:(profileData===null||profileData===void 0?void 0:(_profileData$profile=profileData.profile)===null||_profileData$profile===void 0?void 0:_profileData$profile.posts_count)||0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"Posts\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-bold text-green-600\",children:(profileData===null||profileData===void 0?void 0:(_profileData$profile2=profileData.profile)===null||_profileData$profile2===void 0?void 0:_profileData$profile2.following_count)||0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"Following\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-bold text-purple-600\",children:(profileData===null||profileData===void 0?void 0:(_profileData$profile3=profileData.profile)===null||_profileData$profile3===void 0?void 0:_profileData$profile3.followers_count)||0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"Followers\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowFollowSearch(true),className:\"w-full bg-gradient-to-r from-orange-500 to-orange-600 text-white py-2.5 px-4 rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all duration-200 font-medium shadow-lg hover:shadow-xl transform hover:scale-105\",children:\"Find People\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 relative overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-0 right-0 w-14 h-14 bg-green-50 rounded-full -translate-y-7 translate-x-7\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4 relative\",children:\"Today's Nutrition\"}),todayNutrition?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4 relative\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Calories\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold text-gray-900\",children:[todayNutrition.totalCalories||0,\" / \",todayNutrition.calorieGoal||2000]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-100 rounded-full h-2.5 shadow-inner\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-orange-500 h-2.5 rounded-full transition-all duration-300\",style:{width:\"\".concat(Math.min(100,(todayNutrition.totalCalories||0)/(todayNutrition.calorieGoal||2000)*100),\"%\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mt-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Protein\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold text-gray-900\",children:[todayNutrition.totalProtein||0,\"g / \",todayNutrition.proteinGoal||150,\"g\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-100 rounded-full h-2.5 shadow-inner\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-500 h-2.5 rounded-full transition-all duration-300\",style:{width:\"\".concat(Math.min(100,(todayNutrition.totalProtein||0)/(todayNutrition.proteinGoal||150)*100),\"%\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center bg-yellow-50 rounded-lg p-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-yellow-600 font-semibold text-sm\",children:[todayNutrition.totalCarbs||0,\"g\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 text-xs\",children:\"Carbs\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center bg-red-50 rounded-lg p-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-red-600 font-semibold text-sm\",children:[todayNutrition.totalFat||0,\"g\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 text-xs\",children:\"Fat\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center bg-blue-50 rounded-lg p-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-blue-600 font-semibold text-sm\",children:[Math.round((todayNutrition.totalCalories||0)/(todayNutrition.calorieGoal||2000)*100),\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 text-xs\",children:\"Goal\"})]})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-center py-6 relative\",children:\"No nutrition data for today\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 relative overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-0 left-0 w-16 h-16 bg-purple-50 rounded-full translate-y-8 -translate-x-8\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4 relative\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Calendar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentDate(subMonths(currentDate,1)),className:\"p-2 hover:bg-gray-100 rounded-lg transition-colors\",children:/*#__PURE__*/_jsx(ChevronLeft,{className:\"w-4 h-4 text-gray-500\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentDate(addMonths(currentDate,1)),className:\"p-2 hover:bg-gray-100 rounded-lg transition-colors\",children:/*#__PURE__*/_jsx(ChevronRight,{className:\"w-4 h-4 text-gray-500\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mb-3 relative\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900 bg-gray-50 rounded-lg py-2 px-3\",children:format(currentDate,'MMMM yyyy')})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-7 gap-1 text-xs relative\",children:[['S','M','T','W','T','F','S'].map(day=>/*#__PURE__*/_jsx(\"div\",{className:\"text-center p-2 text-gray-500 font-medium\",children:day},day)),eachDayOfInterval({start:startOfMonth(currentDate),end:endOfMonth(currentDate)}).map(day=>{var _monthData$days;const dayData=monthData===null||monthData===void 0?void 0:(_monthData$days=monthData.days)===null||_monthData$days===void 0?void 0:_monthData$days.find(d=>new Date(d.date).getDate()===day.getDate());const hasData=dayData===null||dayData===void 0?void 0:dayData.has_data;const isCurrentDay=isToday(day);return/*#__PURE__*/_jsx(\"div\",{className:\"\\n                        text-center p-2 rounded-lg text-sm font-medium transition-all duration-200\\n                        \".concat(isCurrentDay?'bg-orange-500 text-white shadow-md':'',\"\\n                        \").concat(hasData&&!isCurrentDay?'bg-green-100 text-green-700':'',\"\\n                        \").concat(!hasData&&!isCurrentDay?'text-gray-400 hover:bg-gray-50':'',\"\\n                      \"),children:day.getDate()},day.toISOString());})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 space-y-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCreatePost(true),className:\"w-full bg-white border border-gray-200 rounded-lg p-4 text-left hover:bg-gray-50 transition-colors shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-full bg-orange-500 flex items-center justify-center text-white font-semibold\",children:(user===null||user===void 0?void 0:(_user$first_name2=user.first_name)===null||_user$first_name2===void 0?void 0:_user$first_name2.charAt(0))||(user===null||user===void 0?void 0:(_user$username2=user.username)===null||_user$username2===void 0?void 0:_user$username2.charAt(0))||'U'}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"What's on your mind?\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[posts.length===0&&!loading&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-200 rounded-lg shadow-sm p-8 text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(MessageCircle,{className:\"w-8 h-8 text-orange-500\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:\"No posts yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"Your feed is empty. Start connecting with others to see their posts!\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row gap-3 justify-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowFollowSearch(true),className:\"px-4 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all duration-200 font-medium shadow-md hover:shadow-lg transform hover:scale-105\",children:\"Find Friends\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{/* Navigate to groups when implemented */},className:\"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium\",children:\"Browse Groups\"})]})]}),Array.isArray(posts)&&posts.length>0&&posts.map(post=>{var _post$user,_post$user$first_name,_post$user2,_post$user2$username,_post$user3,_post$user4,_user$first_name3,_user$username3,_newComments$post$id,_comments$post$id;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-200 rounded-lg shadow-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-4 border-b border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 rounded-full bg-orange-500 flex items-center justify-center text-white text-sm font-semibold\",children:((_post$user=post.user)===null||_post$user===void 0?void 0:(_post$user$first_name=_post$user.first_name)===null||_post$user$first_name===void 0?void 0:_post$user$first_name.charAt(0))||((_post$user2=post.user)===null||_post$user2===void 0?void 0:(_post$user2$username=_post$user2.username)===null||_post$user2$username===void 0?void 0:_post$user2$username.charAt(0))||'U'}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-semibold text-gray-900\",children:[((_post$user3=post.user)===null||_post$user3===void 0?void 0:_post$user3.first_name)||'Unknown',\" \",((_post$user4=post.user)===null||_post$user4===void 0?void 0:_post$user4.last_name)||'User']}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:formatPostDate(post.created_at)})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(MoreHorizontal,{className:\"w-5 h-5\"})})]}),post.content&&/*#__PURE__*/_jsx(\"div\",{className:\"p-4\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-900\",children:post.content})}),post.image_url&&/*#__PURE__*/_jsx(\"div\",{className:\"w-full\",children:/*#__PURE__*/_jsx(\"img\",{src:post.image_url,alt:\"Post\",className:\"w-full object-cover\"})}),post.meal_data&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-gray-50 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900 mb-2\",children:\"Meal Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-4 gap-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold text-orange-600\",children:post.meal_data.calories||0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-600\",children:\"Calories\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-semibold text-green-600\",children:[post.meal_data.protein||0,\"g\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-600\",children:\"Protein\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-semibold text-yellow-600\",children:[post.meal_data.carbs||0,\"g\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-600\",children:\"Carbs\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-semibold text-red-600\",children:[post.meal_data.fat||0,\"g\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-600\",children:\"Fat\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-3 border-t border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-6\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleLike(post.id),className:\"flex items-center space-x-2 \".concat(post.is_liked?'text-red-500':'text-gray-500 hover:text-red-500'),children:[/*#__PURE__*/_jsx(Heart,{className:\"w-5 h-5 \".concat(post.is_liked?'fill-current':'')}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:post.likes_count})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>toggleComments(post.id),className:\"flex items-center space-x-2 text-gray-500 hover:text-orange-500\",children:[/*#__PURE__*/_jsx(MessageCircle,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:post.comments_count})]}),/*#__PURE__*/_jsx(\"button\",{className:\"text-gray-500 hover:text-orange-500\",children:/*#__PURE__*/_jsx(Share,{className:\"w-5 h-5\"})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleBookmark(post.id),className:\"\".concat(post.is_bookmarked?'text-orange-500':'text-gray-500 hover:text-orange-500'),children:/*#__PURE__*/_jsx(Bookmark,{className:\"w-5 h-5 \".concat(post.is_bookmarked?'fill-current':'')})})]})}),expandedComments.has(post.id)&&/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-3 border-t border-gray-200 bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 rounded-full bg-orange-500 flex items-center justify-center text-white text-sm font-semibold\",children:(user===null||user===void 0?void 0:(_user$first_name3=user.first_name)===null||_user$first_name3===void 0?void 0:_user$first_name3.charAt(0))||(user===null||user===void 0?void 0:(_user$username3=user.username)===null||_user$username3===void 0?void 0:_user$username3.charAt(0))||'U'}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Add a comment...\",value:newComments[post.id]||'',onChange:e=>setNewComments(prev=>_objectSpread(_objectSpread({},prev),{},{[post.id]:e.target.value})),className:\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500\",onKeyPress:e=>e.key==='Enter'&&handleAddComment(post.id)}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAddComment(post.id),disabled:!((_newComments$post$id=newComments[post.id])!==null&&_newComments$post$id!==void 0&&_newComments$post$id.trim()),className:\"px-4 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-md hover:shadow-lg\",children:\"Post\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:(_comments$post$id=comments[post.id])===null||_comments$post$id===void 0?void 0:_comments$post$id.map(comment=>{var _comment$user,_comment$user$first_n,_comment$user2,_comment$user2$userna,_comment$user3,_comment$user4;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 rounded-full bg-orange-500 flex items-center justify-center text-white text-sm font-semibold\",children:((_comment$user=comment.user)===null||_comment$user===void 0?void 0:(_comment$user$first_n=_comment$user.first_name)===null||_comment$user$first_n===void 0?void 0:_comment$user$first_n.charAt(0))||((_comment$user2=comment.user)===null||_comment$user2===void 0?void 0:(_comment$user2$userna=_comment$user2.username)===null||_comment$user2$userna===void 0?void 0:_comment$user2$userna.charAt(0))||'U'}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-semibold text-sm text-gray-900\",children:[((_comment$user3=comment.user)===null||_comment$user3===void 0?void 0:_comment$user3.first_name)||'Unknown',\" \",((_comment$user4=comment.user)===null||_comment$user4===void 0?void 0:_comment$user4.last_name)||'User']}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-700\",children:comment.content})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 mt-1\",children:formatPostDate(comment.created_at)})]})]},comment.id);})})]})]},post.id);})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-80 flex-shrink-0 sticky top-6 self-start space-y-6 max-h-[calc(100vh-3rem)] overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 relative overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-0 right-0 w-14 h-14 bg-indigo-50 rounded-full -translate-y-7 translate-x-7\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6 relative\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Groups\"}),/*#__PURE__*/_jsx(\"button\",{className:\"text-blue-600 hover:text-blue-700 text-sm font-medium bg-blue-50 hover:bg-blue-100 px-3 py-1 rounded-full transition-colors\",children:\"See All\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 relative\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-50 cursor-pointer transition-colors group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-green-500 flex items-center justify-center shadow-sm\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-semibold text-sm\",children:\"VG\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900 group-hover:text-green-600 transition-colors\",children:\"Vegan Recipes\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"1.2k members\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-50 cursor-pointer transition-colors group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-blue-500 flex items-center justify-center shadow-sm\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-semibold text-sm\",children:\"FT\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900 group-hover:text-blue-600 transition-colors\",children:\"Fitness Goals\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"856 members\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-50 cursor-pointer transition-colors group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-purple-500 flex items-center justify-center shadow-sm\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-semibold text-sm\",children:\"WL\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900 group-hover:text-purple-600 transition-colors\",children:\"Weight Loss\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"2.1k members\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-50 cursor-pointer transition-colors group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-orange-500 flex items-center justify-center shadow-sm\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-semibold text-sm\",children:\"KT\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900 group-hover:text-orange-600 transition-colors\",children:\"Keto Diet\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"643 members\"})]})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"w-full mt-6 bg-gradient-to-r from-orange-500 to-orange-600 text-white py-2.5 px-4 rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all duration-200 font-medium shadow-lg hover:shadow-xl transform hover:scale-105\",children:\"Create Group\"})]})})]})}),showCreatePost&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-gray-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-6 border-b border-gray-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(PenTool,{className:\"w-4 h-4 text-orange-600\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900\",children:\"Create Post\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCreatePost(false),className:\"text-gray-400 hover:text-gray-600 p-2 hover:bg-gray-100 rounded-lg transition-colors\",children:/*#__PURE__*/_jsx(X,{className:\"w-5 h-5\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 rounded-full bg-orange-500 flex items-center justify-center text-white font-semibold shadow-md\",children:(user===null||user===void 0?void 0:(_user$first_name4=user.first_name)===null||_user$first_name4===void 0?void 0:_user$first_name4.charAt(0))||(user===null||user===void 0?void 0:(_user$username4=user.username)===null||_user$username4===void 0?void 0:_user$username4.charAt(0))||'U'}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"What's on your mind?\",value:newPost.content,onChange:e=>setNewPost(prev=>_objectSpread(_objectSpread({},prev),{},{content:e.target.value})),className:\"w-full p-4 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-300 resize-none bg-gray-50 hover:bg-white transition-colors\",rows:5})})]}),newPost.imageFile&&/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:URL.createObjectURL(newPost.imageFile),alt:\"Preview\",className:\"w-full h-64 object-cover rounded-lg\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setNewPost(prev=>_objectSpread(_objectSpread({},prev),{},{imageFile:null})),className:\"absolute top-2 right-2 bg-black bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-70\",children:/*#__PURE__*/_jsx(X,{className:\"w-4 h-4\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-xl p-4 space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-5 h-5 bg-orange-100 rounded flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-orange-500 rounded-full\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold text-gray-900\",children:\"Post Settings\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center space-x-3 cursor-pointer p-3 bg-white rounded-lg border border-gray-200 hover:border-orange-300 transition-colors\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:newPost.allowComments,onChange:e=>setNewPost(prev=>_objectSpread(_objectSpread({},prev),{},{allowComments:e.target.checked})),className:\"rounded border-gray-300 text-orange-600 focus:ring-orange-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-700\",children:\"Allow comments\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center space-x-3 cursor-pointer p-3 bg-white rounded-lg border border-gray-200 hover:border-orange-300 transition-colors\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:newPost.hideLikeCount,onChange:e=>setNewPost(prev=>_objectSpread(_objectSpread({},prev),{},{hideLikeCount:e.target.checked})),className:\"rounded border-gray-300 text-orange-600 focus:ring-orange-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-700\",children:\"Hide like count\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between pt-6 border-t border-gray-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-4\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center space-x-3 text-gray-600 hover:text-orange-600 cursor-pointer p-2 hover:bg-orange-50 rounded-lg transition-colors\",children:[/*#__PURE__*/_jsx(Image,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:\"Add Photo\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleImageUpload,className:\"hidden\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCreatePost(false),className:\"px-6 py-2.5 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors font-medium\",children:\"Cancel\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleCreatePost,disabled:!newPost.content.trim()&&!newPost.imageFile||creatingPost,className:\"px-6 py-2.5 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium shadow-lg hover:shadow-xl transform hover:scale-105 flex items-center space-x-2\",children:[creatingPost&&/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"}),/*#__PURE__*/_jsx(\"span\",{children:creatingPost?'Posting...':'Share Post'})]})]})]})]})]})}),showFollowSearch&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-6 border-b border-gray-100\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900\",children:\"Find People\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowFollowSearch(false),className:\"text-gray-400 hover:text-gray-600 p-2 hover:bg-gray-100 rounded-full transition-colors\",children:/*#__PURE__*/_jsx(X,{className:\"w-5 h-5\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search for people...\",value:searchQuery,onChange:e=>{setSearchQuery(e.target.value);searchUsers(e.target.value);},className:\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"})}),searchLoading?/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center py-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:searchResults.map(user=>{var _user$first_name5,_user$username5;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-4 hover:bg-gray-50 rounded-xl transition-colors\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-semibold\",children:(user===null||user===void 0?void 0:(_user$first_name5=user.first_name)===null||_user$first_name5===void 0?void 0:_user$first_name5.charAt(0))||(user===null||user===void 0?void 0:(_user$username5=user.username)===null||_user$username5===void 0?void 0:_user$username5.charAt(0))||'U'}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-medium text-gray-900\",children:[(user===null||user===void 0?void 0:user.first_name)||'Unknown',\" \",(user===null||user===void 0?void 0:user.last_name)||'User']}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[\"@\",user.username]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleFollow(user.id),className:\"px-4 py-2 rounded-xl font-medium transition-all duration-200 \".concat(user.is_following?'bg-gray-200 text-gray-700 hover:bg-gray-300':'bg-gradient-to-r from-orange-500 to-orange-600 text-white hover:from-orange-600 hover:to-orange-700 shadow-md hover:shadow-lg'),children:user.is_following?'Following':'Follow'})]},user.id);})})]})]})})]});};export default Feed;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useAuth","Heart","MessageCircle","Share","MoreHorizontal","PenTool","Bookmark","Image","X","ChevronLeft","ChevronRight","formatDistanceToNow","format","startOfMonth","endOfMonth","eachDayOfInterval","isToday","addMonths","subMonths","diaryAPI","mealsAPI","profileAPI","socialAPI","usePostPersistence","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Feed","_user$first_name","_user$username","_profileData$profile","_profileData$profile2","_profileData$profile3","_user$first_name2","_user$username2","_user$first_name4","_user$username4","user","posts","setPosts","localPosts","savePostLocally","mergeWithServerPosts","clearLocalPosts","loading","setLoading","creatingPost","setCreatingPost","showCreatePost","setShowCreatePost","newPost","setNewPost","content","imageFile","mealData","allowComments","hideLikeCount","expandedComments","setExpandedComments","Set","comments","setComments","newComments","setNewComments","loadingComments","setLoadingComments","profileData","setProfileData","todayNutrition","setTodayNutrition","currentDate","setCurrentDate","Date","monthData","setMonthData","sidebarLoading","setSidebarLoading","showFollowSearch","setShowFollowSearch","searchQuery","setSearchQuery","searchResults","setSearchResults","searchLoading","setSearchLoading","formatPostDate","dateString","postDate","isNaN","getTime","console","warn","today","toDateString","concat","toLocaleTimeString","hour","minute","hour12","addSuffix","error","loadMonthData","_response$data$days","_response$data$days$f","year","getFullYear","month","getMonth","log","response","data","days","filter","d","has_data","length","loadSidebarData","profileResponse","get","_profileResponse$data","_profileResponse$data2","_profileResponse$data3","profile","posts_count","followers","followers_count","following","following_count","toISOString","split","mealsResponse","getByDate","meals","_profileResponse$data4","_profileResponse$data5","totalCalories","reduce","sum","meal","calories","totalProtein","protein","totalCarbs","carbs","totalFat","fat","nutritionData","calorieGoal","daily_calories","proteinGoal","daily_protein","_profileResponse$data6","_profileResponse$data7","loadPosts","JSON","parse","localStorage","getItem","getFeed","serverPosts","Array","isArray","mergedPosts","handleLike","postId","likePost","prevPosts","postsArray","map","post","id","_objectSpread","is_liked","likes_count","alert","handleBookmark","bookmarkPost","is_bookmarked","toggleComments","has","prev","newSet","delete","add","getComments","handleAddComment","_newComments$postId","trim","addComment","newComment","comments_count","handleCreatePost","instantPost","now","image_url","meal_data","username","first_name","last_name","profile_picture","created_at","allow_comments","hide_like_count","_status","_serverResponse","_serverResponse2","_serverResponse2$post","_serverResponse3","_serverResponse4","_serverResponse4$post","formData","FormData","append","toString","stringify","serverSuccess","serverResponse","createPost","status","apiError","authData","token","directResponse","fetch","process","env","REACT_APP_API_URL","method","headers","body","ok","json","directError","finalPost","imageUrl","_serverSaved","p","window","dispatchEvent","CustomEvent","detail","handleImageUpload","event","_event$target$files","file","target","files","searchUsers","query","encodeURIComponent","handleFollow","userId","is_following","handleMealDataChanged","handleStorageChange","e","key","addEventListener","removeEventListener","className","children","src","alt","charAt","onClick","style","width","Math","min","round","day","start","end","_monthData$days","dayData","find","date","getDate","hasData","isCurrentDay","_post$user","_post$user$first_name","_post$user2","_post$user2$username","_post$user3","_post$user4","_user$first_name3","_user$username3","_newComments$post$id","_comments$post$id","type","placeholder","value","onChange","onKeyPress","disabled","comment","_comment$user","_comment$user$first_n","_comment$user2","_comment$user2$userna","_comment$user3","_comment$user4","rows","URL","createObjectURL","checked","accept","_user$first_name5","_user$username5"],"sources":["C:/Users/arian/OneDrive/Desktop/Nutrition/client/src/components/Feed.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { Heart, MessageCircle, Share, MoreHorizontal, PenTool, Bookmark, Image, X, ChevronLeft, ChevronRight } from 'lucide-react';\r\nimport { formatDistanceToNow, format, startOfMonth, endOfMonth, eachDayOfInterval, isToday, addMonths, subMonths } from 'date-fns';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { diaryAPI, mealsAPI, profileAPI, socialAPI } from '../services/api';\r\nimport { usePostPersistence } from '../hooks/usePostPersistence';\r\n\r\ninterface Post {\r\n  id: number;\r\n  content: string;\r\n  image_url: string | null;\r\n  meal_data: any;\r\n  likes_count: number;\r\n  comments_count: number;\r\n  is_liked: boolean;\r\n  is_bookmarked: boolean;\r\n  allow_comments?: boolean;\r\n  hide_like_count?: boolean;\r\n  created_at: string;\r\n  user: {\r\n    id: number;\r\n    username: string;\r\n    first_name: string;\r\n    last_name: string;\r\n    profile_picture?: string;\r\n  };\r\n}\r\n\r\ninterface Comment {\r\n  id: number;\r\n  content: string;\r\n  created_at: string;\r\n  user: {\r\n    id: number;\r\n    username: string;\r\n    first_name: string;\r\n    last_name: string;\r\n    profile_picture?: string;\r\n  };\r\n}\r\n\r\nconst Feed: React.FC = () => {\r\n  const { user } = useAuth();\r\n  // const navigate = useNavigate(); // Unused\r\n  const [posts, setPosts] = useState<Post[]>([]);\r\n  const { localPosts, savePostLocally, mergeWithServerPosts, clearLocalPosts } = usePostPersistence();\r\n  const [loading, setLoading] = useState(true);\r\n  const [creatingPost, setCreatingPost] = useState(false);\r\n  const [showCreatePost, setShowCreatePost] = useState(false);\r\n  const [newPost, setNewPost] = useState({ \r\n    content: '', \r\n    imageFile: null as File | null, \r\n    mealData: null,\r\n    allowComments: true,\r\n    hideLikeCount: false\r\n  });\r\n  const [expandedComments, setExpandedComments] = useState<Set<number>>(new Set());\r\n  const [comments, setComments] = useState<{ [postId: number]: Comment[] }>({});\r\n  const [newComments, setNewComments] = useState<{ [postId: number]: string }>({});\r\n  const [loadingComments, setLoadingComments] = useState<Set<number>>(new Set());\r\n  \r\n  // Sidebar data states\r\n  const [profileData, setProfileData] = useState<any>(null);\r\n  const [todayNutrition, setTodayNutrition] = useState<any>(null);\r\n  const [currentDate, setCurrentDate] = useState(new Date());\r\n  const [monthData, setMonthData] = useState<any>(null);\r\n  const [sidebarLoading, setSidebarLoading] = useState(true);\r\n  \r\n  // Follow people search states\r\n  const [showFollowSearch, setShowFollowSearch] = useState(false);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [searchResults, setSearchResults] = useState<any[]>([]);\r\n  const [searchLoading, setSearchLoading] = useState(false);\r\n\r\n  const formatPostDate = (dateString: string) => {\r\n    // Handle invalid or missing date strings\r\n    if (!dateString) {\r\n      return 'Just now';\r\n    }\r\n\r\n    const postDate = new Date(dateString);\r\n    \r\n    // Check if the date is valid\r\n    if (isNaN(postDate.getTime())) {\r\n      console.warn('Invalid date string:', dateString);\r\n      return 'Just now';\r\n    }\r\n\r\n    const today = new Date();\r\n    const isToday = postDate.toDateString() === today.toDateString();\r\n    \r\n    if (isToday) {\r\n      return `Today at ${postDate.toLocaleTimeString('en-US', { \r\n        hour: 'numeric', \r\n        minute: '2-digit', \r\n        hour12: true \r\n      })}`;\r\n    } else {\r\n      try {\r\n        return formatDistanceToNow(postDate, { addSuffix: true });\r\n      } catch (error) {\r\n        console.warn('Error formatting date distance:', error);\r\n        return 'Recently';\r\n      }\r\n    }\r\n  };\r\n\r\n  const loadMonthData = useCallback(async () => {\r\n    try {\r\n      const year = currentDate.getFullYear();\r\n      const month = currentDate.getMonth() + 1;\r\n      \r\n      console.log('📅 Feed Calendar: Loading month data for:', { year, month });\r\n      \r\n      // Use the EXACT same API call as Diary component\r\n      const response = await diaryAPI.getMonth(year, month);\r\n      \r\n      console.log('📅 Feed Calendar: Response received:', response.data);\r\n      console.log('📅 Feed Calendar: Days with data:', response.data.days?.filter((d: any) => d.has_data)?.length || 0);\r\n      \r\n      setMonthData(response.data);\r\n    } catch (error) {\r\n      console.error('📅 Feed Calendar: Error loading month data:', error);\r\n      setMonthData(null);\r\n    }\r\n  }, [currentDate]);\r\n\r\n  const loadSidebarData = useCallback(async () => {\r\n    if (!user) return;\r\n    \r\n    setSidebarLoading(true);\r\n    try {\r\n      console.log('📊 Feed: Loading sidebar data...');\r\n      \r\n      // Load profile data using the same API as Overview - FIXED\r\n      const profileResponse = await profileAPI.get();\r\n      console.log('📊 Feed: Full profile response:', profileResponse.data);\r\n      \r\n      if (profileResponse.data) {\r\n        setProfileData(profileResponse.data);\r\n        console.log('📊 Feed: Profile data set:', {\r\n          posts: profileResponse.data.profile?.posts_count,\r\n          followers: profileResponse.data.profile?.followers_count,\r\n          following: profileResponse.data.profile?.following_count\r\n        });\r\n      }\r\n\r\n      // Load today's nutrition using EXACT same method as Overview - FIXED\r\n      const today = new Date().toISOString().split('T')[0];\r\n      console.log('📊 Feed: Loading meals for date:', today);\r\n      \r\n      const mealsResponse = await mealsAPI.getByDate(today);\r\n      console.log('📊 Feed: Raw meals response:', mealsResponse);\r\n      console.log('📊 Feed: Meals data:', mealsResponse.data);\r\n      \r\n      if (mealsResponse.data && mealsResponse.data.meals) {\r\n        // Calculate totals from meals (EXACT same as Overview)\r\n        const meals = mealsResponse.data.meals || [];\r\n        console.log('📊 Feed: Processing meals:', meals.length, 'meals found');\r\n        \r\n        const totalCalories = meals.reduce((sum: number, meal: any) => {\r\n          console.log('📊 Feed: Meal calories:', meal.calories);\r\n          return sum + (meal.calories || 0);\r\n        }, 0);\r\n        const totalProtein = meals.reduce((sum: number, meal: any) => sum + (meal.protein || 0), 0);\r\n        const totalCarbs = meals.reduce((sum: number, meal: any) => sum + (meal.carbs || 0), 0);\r\n        const totalFat = meals.reduce((sum: number, meal: any) => sum + (meal.fat || 0), 0);\r\n        \r\n        // Create nutrition data object (same structure as Overview)\r\n        const nutritionData = {\r\n          totalCalories: totalCalories,\r\n          totalProtein: totalProtein,\r\n          totalCarbs: totalCarbs,\r\n          totalFat: totalFat,\r\n          calorieGoal: profileResponse.data.profile?.daily_calories || 2000,\r\n          proteinGoal: profileResponse.data.profile?.daily_protein || 150,\r\n        };\r\n        \r\n        console.log('📊 Feed: Final calculated nutrition data:', nutritionData);\r\n        setTodayNutrition(nutritionData);\r\n      } else {\r\n        console.log('📊 Feed: No meals data found, setting empty nutrition');\r\n        setTodayNutrition({\r\n          totalCalories: 0,\r\n          totalProtein: 0,\r\n          totalCarbs: 0,\r\n          totalFat: 0,\r\n          calorieGoal: profileResponse.data.profile?.daily_calories || 2000,\r\n          proteinGoal: profileResponse.data.profile?.daily_protein || 150,\r\n        });\r\n      }\r\n\r\n      // Load month data for calendar - FIXED\r\n      await loadMonthData();\r\n      \r\n    } catch (error) {\r\n      console.error('📊 Feed: Error loading sidebar data:', error);\r\n      // Set default nutrition data on error\r\n      setTodayNutrition({\r\n        totalCalories: 0,\r\n        totalProtein: 0,\r\n        totalCarbs: 0,\r\n        totalFat: 0,\r\n        calorieGoal: 2000,\r\n        proteinGoal: 150,\r\n      });\r\n    } finally {\r\n      setSidebarLoading(false);\r\n    }\r\n  }, [user, loadMonthData]);\r\n\r\n  const loadPosts = async () => {\r\n    try {\r\n      console.log('📡 Loading posts from feed...');\r\n      console.log('💾 Current localStorage posts:', JSON.parse(localStorage.getItem('local_posts') || '[]'));\r\n      const response = await socialAPI.getFeed();\r\n      console.log('📡 Feed response:', response);\r\n      \r\n      if (response && response.data) {\r\n        console.log('✅ Posts loaded successfully:', response.data);\r\n        // Ensure response.data is an array\r\n        let serverPosts = [];\r\n        if (Array.isArray(response.data)) {\r\n          serverPosts = response.data;\r\n        } else if (response.data.posts && Array.isArray(response.data.posts)) {\r\n          serverPosts = response.data.posts;\r\n        }\r\n        \r\n        console.log('🔄 Server returned', serverPosts.length, 'posts');\r\n        console.log('💾 Local posts:', localPosts.length);\r\n        \r\n        // ALWAYS merge server and local posts properly\r\n        const mergedPosts = mergeWithServerPosts(serverPosts);\r\n        console.log('✅ Merged posts:', mergedPosts.length, 'total posts');\r\n        setPosts(mergedPosts);\r\n      } else {\r\n        console.warn('⚠️ No data in feed response');\r\n        // Don't clear posts if server fails - keep local posts\r\n        if (localPosts.length > 0) {\r\n          console.log('📱 Using local posts as fallback:', localPosts.length);\r\n          setPosts(localPosts);\r\n        } else {\r\n          setPosts([]);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('❌ Error loading posts:', error);\r\n      // On error, use local posts as fallback\r\n      if (localPosts.length > 0) {\r\n        console.log('📱 Using local posts due to error:', localPosts.length);\r\n        setPosts(localPosts);\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleLike = async (postId: number) => {\r\n    try {\r\n      console.log('👍 Toggling like for post:', postId);\r\n      const response = await socialAPI.likePost(postId);\r\n      console.log('👍 Like response:', response.data);\r\n      \r\n      // Update local state optimistically\r\n      setPosts(prevPosts => {\r\n        const postsArray = Array.isArray(prevPosts) ? prevPosts : [];\r\n        return postsArray.map(post => \r\n          post.id === postId \r\n            ? { \r\n                ...post, \r\n                is_liked: !post.is_liked,\r\n                likes_count: post.is_liked ? post.likes_count - 1 : post.likes_count + 1\r\n              }\r\n            : post\r\n        );\r\n      });\r\n    } catch (error) {\r\n      console.error('❌ Error liking post:', error);\r\n      alert('Failed to like post. Please try again.');\r\n    }\r\n  };\r\n\r\n  const handleBookmark = async (postId: number) => {\r\n    try {\r\n      console.log('🔖 Toggling bookmark for post:', postId);\r\n      const response = await socialAPI.bookmarkPost(postId);\r\n      console.log('🔖 Bookmark response:', response.data);\r\n      \r\n      // Update local state optimistically\r\n      setPosts(prevPosts => {\r\n        const postsArray = Array.isArray(prevPosts) ? prevPosts : [];\r\n        return postsArray.map(post => \r\n          post.id === postId \r\n            ? { ...post, is_bookmarked: !post.is_bookmarked }\r\n            : post\r\n        );\r\n      });\r\n    } catch (error) {\r\n      console.error('❌ Error bookmarking post:', error);\r\n      alert('Failed to bookmark post. Please try again.');\r\n    }\r\n  };\r\n\r\n  const toggleComments = async (postId: number) => {\r\n    if (expandedComments.has(postId)) {\r\n      setExpandedComments(prev => {\r\n        const newSet = new Set(prev);\r\n        newSet.delete(postId);\r\n        return newSet;\r\n      });\r\n    } else {\r\n      setExpandedComments(prev => {\r\n        const newSet = new Set(prev);\r\n        newSet.add(postId);\r\n        return newSet;\r\n      });\r\n      \r\n      if (!comments[postId]) {\r\n        setLoadingComments(prev => {\r\n          const newSet = new Set(prev);\r\n          newSet.add(postId);\r\n          return newSet;\r\n        });\r\n        \r\n        try {\r\n          console.log('💬 Loading comments for post:', postId);\r\n          const response = await socialAPI.getComments(postId);\r\n          \r\n          if (response && response.data) {\r\n            console.log('✅ Comments loaded:', response.data);\r\n            setComments(prev => ({ ...prev, [postId]: response.data }));\r\n          }\r\n        } catch (error) {\r\n          console.error('❌ Error loading comments:', error);\r\n        } finally {\r\n          setLoadingComments(prev => {\r\n            const newSet = new Set(prev);\r\n            newSet.delete(postId);\r\n            return newSet;\r\n          });\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleAddComment = async (postId: number) => {\r\n    const content = newComments[postId]?.trim();\r\n    if (!content) return;\r\n\r\n    try {\r\n      console.log('💬 Adding comment to post:', postId, 'Content:', content);\r\n      const response = await socialAPI.addComment(postId, content);\r\n      \r\n      if (response && response.data) {\r\n        console.log('✅ Comment added:', response.data);\r\n        const newComment = response.data;\r\n        setComments(prev => ({\r\n          ...prev,\r\n          [postId]: [...(prev[postId] || []), newComment]\r\n        }));\r\n        setNewComments(prev => ({ ...prev, [postId]: '' }));\r\n        \r\n        setPosts(prevPosts => {\r\n          const postsArray = Array.isArray(prevPosts) ? prevPosts : [];\r\n          return postsArray.map(post => \r\n            post.id === postId \r\n              ? { ...post, comments_count: post.comments_count + 1 }\r\n              : post\r\n          );\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('❌ Error adding comment:', error);\r\n    }\r\n  };\r\n\r\n  const handleCreatePost = async () => {\r\n    console.log('🛡️ BULLETPROOF POST CREATION v2.0 STARTING...');\r\n    console.log('📝 Current newPost state:', newPost);\r\n    \r\n    // BULLETPROOF VALIDATION\r\n    if (!newPost.content.trim() && !newPost.imageFile) {\r\n      alert('Please enter some content or add an image before posting.');\r\n      return;\r\n    }\r\n\r\n    if (!user?.id) {\r\n      alert('You must be logged in to create a post.');\r\n      return;\r\n    }\r\n\r\n    setCreatingPost(true);\r\n\r\n    // BULLETPROOF: Create post immediately for instant UI feedback\r\n    const instantPost = {\r\n      id: Date.now(),\r\n      content: newPost.content.trim(),\r\n      image_url: null,\r\n      meal_data: newPost.mealData,\r\n      user: {\r\n        id: user.id,\r\n        username: user.username || `user${user.id}`,\r\n        first_name: user.first_name || 'User',\r\n        last_name: user.last_name || 'User',\r\n        profile_picture: user.profile_picture\r\n      },\r\n      created_at: new Date().toISOString(),\r\n      likes_count: 0,\r\n      comments_count: 0,\r\n      is_liked: false,\r\n      is_bookmarked: false,\r\n      allow_comments: newPost.allowComments,\r\n      hide_like_count: newPost.hideLikeCount,\r\n      _status: 'creating'\r\n    };\r\n\r\n    // Show post immediately\r\n    console.log('⚡ Adding post to feed immediately for instant feedback');\r\n    setPosts(prevPosts => {\r\n      const postsArray = Array.isArray(prevPosts) ? prevPosts : [];\r\n      return [instantPost, ...postsArray];\r\n    });\r\n\r\n    // Reset form immediately for better UX\r\n    setNewPost({\r\n      content: '',\r\n      imageFile: null,\r\n      mealData: null,\r\n      allowComments: true,\r\n      hideLikeCount: false\r\n    });\r\n    setShowCreatePost(false);\r\n\r\n    // BULLETPROOF: Try to save to server in background\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('content', instantPost.content);\r\n      formData.append('allow_comments', instantPost.allow_comments.toString());\r\n      formData.append('hide_like_count', instantPost.hide_like_count.toString());\r\n      \r\n      if (newPost.imageFile) {\r\n        formData.append('image', newPost.imageFile);\r\n      }\r\n      \r\n      if (newPost.mealData) {\r\n        formData.append('meal_data', JSON.stringify(newPost.mealData));\r\n      }\r\n\r\n      console.log('🚀 Attempting to save to server...');\r\n\r\n      // Try multiple methods to save to server\r\n      let serverSuccess = false;\r\n      let serverResponse = null;\r\n\r\n      // Method 1: socialAPI\r\n      try {\r\n        const response = await socialAPI.createPost(formData);\r\n        if (response && (response.status === 200 || response.status === 201) && response.data) {\r\n          serverSuccess = true;\r\n          serverResponse = response.data;\r\n          console.log('✅ socialAPI SUCCESS');\r\n        }\r\n      } catch (apiError) {\r\n        console.warn('⚠️ socialAPI failed:', apiError);\r\n      }\r\n\r\n      // Method 2: Direct fetch\r\n      if (!serverSuccess) {\r\n        try {\r\n          const authData = JSON.parse(localStorage.getItem('nutritrack_auth_data') || '{}');\r\n          const token = authData.token || localStorage.getItem('token');\r\n          \r\n          if (token) {\r\n            const directResponse = await fetch(`${process.env.REACT_APP_API_URL || 'https://nutrition-back-jtf3.onrender.com'}/api/social/posts`, {\r\n              method: 'POST',\r\n              headers: { 'Authorization': `Bearer ${token}` },\r\n              body: formData\r\n            });\r\n            \r\n            if (directResponse.ok) {\r\n              serverResponse = await directResponse.json();\r\n              serverSuccess = true;\r\n              console.log('✅ Direct fetch SUCCESS');\r\n            }\r\n          }\r\n        } catch (directError) {\r\n          console.warn('⚠️ Direct fetch failed:', directError);\r\n        }\r\n      }\r\n\r\n      // Update the post in the feed with server data or keep as local\r\n      const finalPost = {\r\n        ...instantPost,\r\n        id: serverResponse?.postId || serverResponse?.post?.id || instantPost.id,\r\n        image_url: serverResponse?.imageUrl || serverResponse?.post?.image_url || null,\r\n        _status: serverSuccess ? 'saved' : 'local-only',\r\n        _serverSaved: serverSuccess\r\n      };\r\n\r\n      // Update the existing post in the feed\r\n      setPosts(prevPosts => {\r\n        const postsArray = Array.isArray(prevPosts) ? prevPosts : [];\r\n        return postsArray.map(p => \r\n          p.id === instantPost.id ? finalPost : p\r\n        );\r\n      });\r\n\r\n      // Save for persistence\r\n      savePostLocally(finalPost);\r\n\r\n      if (serverSuccess) {\r\n        console.log('🎉 POST SAVED TO SERVER SUCCESSFULLY');\r\n        window.dispatchEvent(new CustomEvent('postCreated', { detail: finalPost }));\r\n      } else {\r\n        console.log('📱 POST SAVED LOCALLY - Will sync when server available');\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('💥 Background server save failed:', error);\r\n      // Don't show error to user - post is already visible\r\n      console.log('📱 Post remains local-only due to server issues');\r\n    } finally {\r\n      setCreatingPost(false);\r\n      console.log('✅ BULLETPROOF POST CREATION COMPLETED');\r\n    }\r\n  };\r\n\r\n  const handleImageUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (file) {\r\n      setNewPost(prev => ({ ...prev, imageFile: file }));\r\n    }\r\n  };\r\n\r\n  const searchUsers = async (query: string) => {\r\n    if (!query.trim()) {\r\n      setSearchResults([]);\r\n      return;\r\n    }\r\n\r\n    setSearchLoading(true);\r\n    try {\r\n      // Get token from proper auth system\r\n      const authData = JSON.parse(localStorage.getItem('nutritrack_auth_data') || '{}');\r\n      const token = authData.token || localStorage.getItem('token');\r\n      \r\n      const response = await fetch(`/api/social/users/search?q=${encodeURIComponent(query)}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setSearchResults(data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error searching users:', error);\r\n    } finally {\r\n      setSearchLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleFollow = async (userId: number) => {\r\n    try {\r\n      // Get token from proper auth system\r\n      const authData = JSON.parse(localStorage.getItem('nutritrack_auth_data') || '{}');\r\n      const token = authData.token || localStorage.getItem('token');\r\n      \r\n      const response = await fetch(`/api/social/users/${userId}/follow`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        setSearchResults(searchResults.map(user =>\r\n          user.id === userId\r\n            ? { ...user, is_following: !user.is_following }\r\n            : user\r\n        ));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error following user:', error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      console.log('🔧 Feed: Loading posts...');\r\n      // First, immediately show local posts if available\r\n      if (localPosts.length > 0) {\r\n        console.log('⚡ Feed: Showing local posts immediately:', localPosts.length);\r\n        setPosts(localPosts);\r\n      }\r\n      // Then load from server and merge\r\n      loadPosts();\r\n    }\r\n  }, [user, localPosts]); // Functions are stable\r\n\r\n  // Debug posts state changes\r\n  useEffect(() => {\r\n    console.log('🎯 Posts state changed:', posts.length, 'posts');\r\n    console.log('📊 Current posts:', posts);\r\n  }, [posts]);\r\n\r\n  useEffect(() => {\r\n    console.log('🔧 Feed: Month data effect triggered');\r\n    loadMonthData();\r\n  }, []); // Function is stable\r\n\r\n  // Force data load when user becomes available\r\n  useEffect(() => {\r\n    if (user) {\r\n      console.log('🔧 Feed: User available, loading data immediately...');\r\n      \r\n      // Clear any stale local posts to prevent duplicates on login\r\n      if (localPosts.length > 0) {\r\n        console.log('🧹 Clearing stale local posts to prevent duplicates');\r\n        clearLocalPosts();\r\n      }\r\n      \r\n      loadSidebarData();\r\n      loadMonthData();\r\n      loadPosts();\r\n    }\r\n  }, [user, localPosts.length]); // Functions are stable\r\n\r\n  // Enhanced automatic syncing with Overview page - IMPROVED\r\n  useEffect(() => {\r\n    const handleMealDataChanged = () => {\r\n      console.log('📊 Feed: Meal data changed event received, auto-syncing...');\r\n      loadSidebarData();\r\n      loadMonthData(); // Also refresh calendar when meals change\r\n    };\r\n\r\n    const handleStorageChange = (e: StorageEvent) => {\r\n      if (e.key === 'mealAdded' || e.key === 'mealDeleted' || e.key === 'mealUpdated') {\r\n        console.log('📊 Feed: Storage event detected, auto-syncing...');\r\n        handleMealDataChanged();\r\n      }\r\n    };\r\n\r\n    // Listen for custom events (same tab)\r\n    window.addEventListener('mealDataChanged', handleMealDataChanged);\r\n    window.addEventListener('mealAdded', handleMealDataChanged);\r\n    window.addEventListener('mealUpdated', handleMealDataChanged);\r\n    window.addEventListener('mealDeleted', handleMealDataChanged);\r\n    \r\n    // Listen for storage events (cross-tab)\r\n    window.addEventListener('storage', handleStorageChange);\r\n\r\n    // Also listen for sidebar refresh events from other components\r\n    window.addEventListener('sidebarRefresh', handleMealDataChanged);\r\n\r\n    return () => {\r\n      window.removeEventListener('mealDataChanged', handleMealDataChanged);\r\n      window.removeEventListener('mealAdded', handleMealDataChanged);\r\n      window.removeEventListener('mealUpdated', handleMealDataChanged);\r\n      window.removeEventListener('mealDeleted', handleMealDataChanged);\r\n      window.removeEventListener('storage', handleStorageChange);\r\n      window.removeEventListener('sidebarRefresh', handleMealDataChanged);\r\n    };\r\n  }, []); // Functions are stable\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-64\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"min-h-screen bg-gray-50\">\r\n        \r\n        {/* Three Column Layout */}\r\n        <div className=\"flex gap-6 max-w-7xl mx-auto p-6\">\r\n          \r\n          {/* Left Sidebar - Profile & Calendar */}\r\n          <div className=\"w-80 flex-shrink-0 sticky top-6 self-start space-y-6 max-h-[calc(100vh-3rem)] overflow-y-auto\">\r\n            \r\n            {/* Profile Card */}\r\n            <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 relative overflow-hidden\">\r\n              {/* Subtle decorative elements */}\r\n              <div className=\"absolute top-0 right-0 w-16 h-16 bg-blue-50 rounded-full -translate-y-8 translate-x-8\"></div>\r\n              <div className=\"absolute bottom-0 left-0 w-12 h-12 bg-purple-50 rounded-full translate-y-6 -translate-x-6\"></div>\r\n              \r\n              <div className=\"relative text-center\">\r\n                {user?.profile_picture ? (\r\n                  <div className=\"relative inline-block\">\r\n                    <img \r\n                      src={user.profile_picture} \r\n                      alt=\"Profile\" \r\n                      className=\"w-20 h-20 rounded-full mx-auto mb-4 object-cover ring-3 ring-blue-100 shadow-md\"\r\n                    />\r\n                    <div className=\"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-3 border-white\"></div>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"relative inline-block\">\r\n                    <div className=\"w-20 h-20 rounded-full bg-blue-500 flex items-center justify-center text-white text-xl font-semibold mx-auto mb-4 ring-3 ring-blue-100 shadow-md\">\r\n                      {user?.first_name?.charAt(0) || user?.username?.charAt(0) || 'U'}\r\n                    </div>\r\n                    <div className=\"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-3 border-white\"></div>\r\n                  </div>\r\n                )}\r\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-1\">\r\n                  {user?.first_name} {user?.last_name}\r\n                </h3>\r\n                <p className=\"text-gray-500 mb-4\">@{user?.username}</p>\r\n                \r\n                {/* Stats */}\r\n                <div className=\"grid grid-cols-3 gap-4 mb-6\">\r\n                  <div className=\"text-center\">\r\n                    <div className=\"text-xl font-bold text-blue-600\">{profileData?.profile?.posts_count || 0}</div>\r\n                    <div className=\"text-xs text-gray-500\">Posts</div>\r\n                  </div>\r\n                  <div className=\"text-center\">\r\n                    <div className=\"text-xl font-bold text-green-600\">{profileData?.profile?.following_count || 0}</div>\r\n                    <div className=\"text-xs text-gray-500\">Following</div>\r\n                  </div>\r\n                  <div className=\"text-center\">\r\n                    <div className=\"text-xl font-bold text-purple-600\">{profileData?.profile?.followers_count || 0}</div>\r\n                    <div className=\"text-xs text-gray-500\">Followers</div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <button \r\n                  onClick={() => setShowFollowSearch(true)}\r\n                  className=\"w-full bg-gradient-to-r from-orange-500 to-orange-600 text-white py-2.5 px-4 rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all duration-200 font-medium shadow-lg hover:shadow-xl transform hover:scale-105\"\r\n                >\r\n                  Find People\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Today's Nutrition Card */}\r\n            <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 relative overflow-hidden\">\r\n              <div className=\"absolute top-0 right-0 w-14 h-14 bg-green-50 rounded-full -translate-y-7 translate-x-7\"></div>\r\n              \r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4 relative\">Today's Nutrition</h3>\r\n              {todayNutrition ? (\r\n                <div className=\"space-y-4 relative\">\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <span className=\"text-gray-600\">Calories</span>\r\n                    <span className=\"font-semibold text-gray-900\">\r\n                      {todayNutrition.totalCalories || 0} / {todayNutrition.calorieGoal || 2000}\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"w-full bg-gray-100 rounded-full h-2.5 shadow-inner\">\r\n                    <div \r\n                      className=\"bg-orange-500 h-2.5 rounded-full transition-all duration-300\" \r\n                      style={{ \r\n                        width: `${Math.min(100, ((todayNutrition.totalCalories || 0) / (todayNutrition.calorieGoal || 2000)) * 100)}%` \r\n                      }}\r\n                    ></div>\r\n                  </div>\r\n                  \r\n                  {/* Protein Progress */}\r\n                  <div className=\"flex justify-between items-center mt-4\">\r\n                    <span className=\"text-gray-600\">Protein</span>\r\n                    <span className=\"font-semibold text-gray-900\">\r\n                      {todayNutrition.totalProtein || 0}g / {todayNutrition.proteinGoal || 150}g\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"w-full bg-gray-100 rounded-full h-2.5 shadow-inner\">\r\n                    <div \r\n                      className=\"bg-green-500 h-2.5 rounded-full transition-all duration-300\" \r\n                      style={{ \r\n                        width: `${Math.min(100, ((todayNutrition.totalProtein || 0) / (todayNutrition.proteinGoal || 150)) * 100)}%` \r\n                      }}\r\n                    ></div>\r\n                  </div>\r\n                  \r\n                  {/* Macros - REMOVED PROTEIN RECTANGLE */}\r\n                  <div className=\"grid grid-cols-3 gap-2\">\r\n                    <div className=\"text-center bg-yellow-50 rounded-lg p-2\">\r\n                      <div className=\"text-yellow-600 font-semibold text-sm\">{todayNutrition.totalCarbs || 0}g</div>\r\n                      <div className=\"text-gray-500 text-xs\">Carbs</div>\r\n                    </div>\r\n                    <div className=\"text-center bg-red-50 rounded-lg p-2\">\r\n                      <div className=\"text-red-600 font-semibold text-sm\">{todayNutrition.totalFat || 0}g</div>\r\n                      <div className=\"text-gray-500 text-xs\">Fat</div>\r\n                    </div>\r\n                    <div className=\"text-center bg-blue-50 rounded-lg p-2\">\r\n                      <div className=\"text-blue-600 font-semibold text-sm\">{Math.round(((todayNutrition.totalCalories || 0) / (todayNutrition.calorieGoal || 2000)) * 100)}%</div>\r\n                      <div className=\"text-gray-500 text-xs\">Goal</div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-gray-400 text-center py-6 relative\">No nutrition data for today</div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Calendar Streak Card */}\r\n            <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 relative overflow-hidden\">\r\n              <div className=\"absolute bottom-0 left-0 w-16 h-16 bg-purple-50 rounded-full translate-y-8 -translate-x-8\"></div>\r\n              \r\n              <div className=\"flex items-center justify-between mb-4 relative\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900\">Calendar</h3>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <button \r\n                    onClick={() => setCurrentDate(subMonths(currentDate, 1))}\r\n                    className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\r\n                  >\r\n                    <ChevronLeft className=\"w-4 h-4 text-gray-500\" />\r\n                  </button>\r\n                  <button \r\n                    onClick={() => setCurrentDate(addMonths(currentDate, 1))}\r\n                    className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\r\n                  >\r\n                    <ChevronRight className=\"w-4 h-4 text-gray-500\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"text-center mb-3 relative\">\r\n                <div className=\"text-sm font-medium text-gray-900 bg-gray-50 rounded-lg py-2 px-3\">\r\n                  {format(currentDate, 'MMMM yyyy')}\r\n                </div>\r\n              </div>\r\n              \r\n              {/* Calendar Grid */}\r\n              <div className=\"grid grid-cols-7 gap-1 text-xs relative\">\r\n                {['S', 'M', 'T', 'W', 'T', 'F', 'S'].map(day => (\r\n                  <div key={day} className=\"text-center p-2 text-gray-500 font-medium\">\r\n                    {day}\r\n                  </div>\r\n                ))}\r\n                {eachDayOfInterval({\r\n                  start: startOfMonth(currentDate),\r\n                  end: endOfMonth(currentDate)\r\n                }).map(day => {\r\n                  const dayData = monthData?.days?.find((d: any) => \r\n                    new Date(d.date).getDate() === day.getDate()\r\n                  );\r\n                  const hasData = dayData?.has_data;\r\n                  const isCurrentDay = isToday(day);\r\n                  \r\n                  return (\r\n                    <div\r\n                      key={day.toISOString()}\r\n                      className={`\r\n                        text-center p-2 rounded-lg text-sm font-medium transition-all duration-200\r\n                        ${isCurrentDay ? 'bg-orange-500 text-white shadow-md' : ''}\r\n                        ${hasData && !isCurrentDay ? 'bg-green-100 text-green-700' : ''}\r\n                        ${!hasData && !isCurrentDay ? 'text-gray-400 hover:bg-gray-50' : ''}\r\n                      `}\r\n                    >\r\n                      {day.getDate()}\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Main Feed Content */}\r\n          <div className=\"flex-1 space-y-6\">\r\n            {/* Create Post Button - Simple */}\r\n            <button\r\n              onClick={() => setShowCreatePost(true)}\r\n              className=\"w-full bg-white border border-gray-200 rounded-lg p-4 text-left hover:bg-gray-50 transition-colors shadow-sm\"\r\n            >\r\n              <div className=\"flex items-center space-x-3\">\r\n                <div className=\"w-10 h-10 rounded-full bg-orange-500 flex items-center justify-center text-white font-semibold\">\r\n                  {user?.first_name?.charAt(0) || user?.username?.charAt(0) || 'U'}\r\n                </div>\r\n                <span className=\"text-gray-600\">What's on your mind?</span>\r\n              </div>\r\n            </button>\r\n\r\n            {/* Posts - Original Simple Design */}\r\n            <div className=\"space-y-6\">\r\n              {posts.length === 0 && !loading && (\r\n                <div className=\"bg-white border border-gray-200 rounded-lg shadow-sm p-8 text-center\">\r\n                  <div className=\"mb-4\">\r\n                    <div className=\"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                      <MessageCircle className=\"w-8 h-8 text-orange-500\" />\r\n                    </div>\r\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">No posts yet</h3>\r\n                    <p className=\"text-gray-600 mb-6\">Your feed is empty. Start connecting with others to see their posts!</p>\r\n                  </div>\r\n                  \r\n                  <div className=\"flex flex-col sm:flex-row gap-3 justify-center\">\r\n                    <button\r\n                      onClick={() => setShowFollowSearch(true)}\r\n                      className=\"px-4 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all duration-200 font-medium shadow-md hover:shadow-lg transform hover:scale-105\"\r\n                    >\r\n                      Find Friends\r\n                    </button>\r\n                    <button\r\n                      onClick={() => {/* Navigate to groups when implemented */}}\r\n                      className=\"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium\"\r\n                    >\r\n                      Browse Groups\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n              \r\n              {Array.isArray(posts) && posts.length > 0 && posts.map(post => (\r\n                <div key={post.id} className=\"bg-white border border-gray-200 rounded-lg shadow-sm\">\r\n                  {/* Post Header */}\r\n                  <div className=\"flex items-center justify-between p-4 border-b border-gray-200\">\r\n                    <div className=\"flex items-center space-x-3\">\r\n                      <div className=\"w-8 h-8 rounded-full bg-orange-500 flex items-center justify-center text-white text-sm font-semibold\">\r\n                        {post.user?.first_name?.charAt(0) || post.user?.username?.charAt(0) || 'U'}\r\n                      </div>\r\n                      <div>\r\n                        <div className=\"font-semibold text-gray-900\">\r\n                          {post.user?.first_name || 'Unknown'} {post.user?.last_name || 'User'}\r\n                        </div>\r\n                        <div className=\"text-sm text-gray-500\">{formatPostDate(post.created_at)}</div>\r\n                      </div>\r\n                    </div>\r\n                    <button className=\"text-gray-400 hover:text-gray-600\">\r\n                      <MoreHorizontal className=\"w-5 h-5\" />\r\n                    </button>\r\n                  </div>\r\n\r\n                  {/* Post Content */}\r\n                  {post.content && (\r\n                    <div className=\"p-4\">\r\n                      <p className=\"text-gray-900\">{post.content}</p>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Post Image */}\r\n                  {post.image_url && (\r\n                    <div className=\"w-full\">\r\n                      <img \r\n                        src={post.image_url} \r\n                        alt=\"Post\" \r\n                        className=\"w-full object-cover\"\r\n                      />\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Meal Data */}\r\n                  {post.meal_data && (\r\n                    <div className=\"p-4 bg-gray-50 border-t border-gray-200\">\r\n                      <div className=\"text-sm font-medium text-gray-900 mb-2\">Meal Information</div>\r\n                      <div className=\"grid grid-cols-4 gap-4 text-sm\">\r\n                        <div className=\"text-center\">\r\n                          <div className=\"font-semibold text-orange-600\">{post.meal_data.calories || 0}</div>\r\n                          <div className=\"text-gray-600\">Calories</div>\r\n                        </div>\r\n                        <div className=\"text-center\">\r\n                          <div className=\"font-semibold text-green-600\">{post.meal_data.protein || 0}g</div>\r\n                          <div className=\"text-gray-600\">Protein</div>\r\n                        </div>\r\n                        <div className=\"text-center\">\r\n                          <div className=\"font-semibold text-yellow-600\">{post.meal_data.carbs || 0}g</div>\r\n                          <div className=\"text-gray-600\">Carbs</div>\r\n                        </div>\r\n                        <div className=\"text-center\">\r\n                          <div className=\"font-semibold text-red-600\">{post.meal_data.fat || 0}g</div>\r\n                          <div className=\"text-gray-600\">Fat</div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Post Actions */}\r\n                  <div className=\"px-4 py-3 border-t border-gray-200\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div className=\"flex items-center space-x-6\">\r\n                        <button\r\n                          onClick={() => handleLike(post.id)}\r\n                          className={`flex items-center space-x-2 ${post.is_liked ? 'text-red-500' : 'text-gray-500 hover:text-red-500'}`}\r\n                        >\r\n                          <Heart className={`w-5 h-5 ${post.is_liked ? 'fill-current' : ''}`} />\r\n                          <span className=\"text-sm\">{post.likes_count}</span>\r\n                        </button>\r\n                        <button\r\n                          onClick={() => toggleComments(post.id)}\r\n                          className=\"flex items-center space-x-2 text-gray-500 hover:text-orange-500\"\r\n                        >\r\n                          <MessageCircle className=\"w-5 h-5\" />\r\n                          <span className=\"text-sm\">{post.comments_count}</span>\r\n                        </button>\r\n                        <button className=\"text-gray-500 hover:text-orange-500\">\r\n                          <Share className=\"w-5 h-5\" />\r\n                        </button>\r\n                      </div>\r\n                      <button\r\n                        onClick={() => handleBookmark(post.id)}\r\n                        className={`${post.is_bookmarked ? 'text-orange-500' : 'text-gray-500 hover:text-orange-500'}`}\r\n                      >\r\n                        <Bookmark className={`w-5 h-5 ${post.is_bookmarked ? 'fill-current' : ''}`} />\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Comments Section */}\r\n                  {expandedComments.has(post.id) && (\r\n                    <div className=\"px-4 py-3 border-t border-gray-200 bg-gray-50\">\r\n                      {/* Add Comment */}\r\n                      <div className=\"flex items-center space-x-3 mb-4\">\r\n                        <div className=\"w-8 h-8 rounded-full bg-orange-500 flex items-center justify-center text-white text-sm font-semibold\">\r\n                          {user?.first_name?.charAt(0) || user?.username?.charAt(0) || 'U'}\r\n                        </div>\r\n                        <div className=\"flex-1 flex items-center space-x-2\">\r\n                          <input\r\n                            type=\"text\"\r\n                            placeholder=\"Add a comment...\"\r\n                            value={newComments[post.id] || ''}\r\n                            onChange={(e) => setNewComments(prev => ({...prev, [post.id]: e.target.value}))}\r\n                            className=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500\"\r\n                            onKeyPress={(e) => e.key === 'Enter' && handleAddComment(post.id)}\r\n                          />\r\n                          <button\r\n                            onClick={() => handleAddComment(post.id)}\r\n                            disabled={!newComments[post.id]?.trim()}\r\n                            className=\"px-4 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-md hover:shadow-lg\"\r\n                          >\r\n                            Post\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Comments List */}\r\n                      <div className=\"space-y-3\">\r\n                        {comments[post.id]?.map(comment => (\r\n                          <div key={comment.id} className=\"flex items-start space-x-3\">\r\n                            <div className=\"w-8 h-8 rounded-full bg-orange-500 flex items-center justify-center text-white text-sm font-semibold\">\r\n                              {comment.user?.first_name?.charAt(0) || comment.user?.username?.charAt(0) || 'U'}\r\n                            </div>\r\n                            <div className=\"flex-1\">\r\n                              <div className=\"bg-white rounded-lg p-3\">\r\n                                <div className=\"font-semibold text-sm text-gray-900\">\r\n                                  {comment.user?.first_name || 'Unknown'} {comment.user?.last_name || 'User'}\r\n                                </div>\r\n                                <div className=\"text-gray-700\">{comment.content}</div>\r\n                              </div>\r\n                              <div className=\"text-xs text-gray-500 mt-1\">{formatPostDate(comment.created_at)}</div>\r\n                            </div>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Right Sidebar - Groups */}\r\n          <div className=\"w-80 flex-shrink-0 sticky top-6 self-start space-y-6 max-h-[calc(100vh-3rem)] overflow-y-auto\">\r\n            \r\n            {/* Groups Card */}\r\n            <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 relative overflow-hidden\">\r\n              <div className=\"absolute top-0 right-0 w-14 h-14 bg-indigo-50 rounded-full -translate-y-7 translate-x-7\"></div>\r\n              \r\n              <div className=\"flex items-center justify-between mb-6 relative\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900\">Groups</h3>\r\n                <button className=\"text-blue-600 hover:text-blue-700 text-sm font-medium bg-blue-50 hover:bg-blue-100 px-3 py-1 rounded-full transition-colors\">\r\n                  See All\r\n                </button>\r\n              </div>\r\n              \r\n              <div className=\"space-y-3 relative\">\r\n                {/* Mock Group Items */}\r\n                <div className=\"flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-50 cursor-pointer transition-colors group\">\r\n                  <div className=\"w-10 h-10 rounded-xl bg-green-500 flex items-center justify-center shadow-sm\">\r\n                    <span className=\"text-white font-semibold text-sm\">VG</span>\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"font-medium text-gray-900 group-hover:text-green-600 transition-colors\">Vegan Recipes</div>\r\n                    <div className=\"text-sm text-gray-500\">1.2k members</div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-50 cursor-pointer transition-colors group\">\r\n                  <div className=\"w-10 h-10 rounded-xl bg-blue-500 flex items-center justify-center shadow-sm\">\r\n                    <span className=\"text-white font-semibold text-sm\">FT</span>\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"font-medium text-gray-900 group-hover:text-blue-600 transition-colors\">Fitness Goals</div>\r\n                    <div className=\"text-sm text-gray-500\">856 members</div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-50 cursor-pointer transition-colors group\">\r\n                  <div className=\"w-10 h-10 rounded-xl bg-purple-500 flex items-center justify-center shadow-sm\">\r\n                    <span className=\"text-white font-semibold text-sm\">WL</span>\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"font-medium text-gray-900 group-hover:text-purple-600 transition-colors\">Weight Loss</div>\r\n                    <div className=\"text-sm text-gray-500\">2.1k members</div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-50 cursor-pointer transition-colors group\">\r\n                  <div className=\"w-10 h-10 rounded-xl bg-orange-500 flex items-center justify-center shadow-sm\">\r\n                    <span className=\"text-white font-semibold text-sm\">KT</span>\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"font-medium text-gray-900 group-hover:text-orange-600 transition-colors\">Keto Diet</div>\r\n                    <div className=\"text-sm text-gray-500\">643 members</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              \r\n              <button className=\"w-full mt-6 bg-gradient-to-r from-orange-500 to-orange-600 text-white py-2.5 px-4 rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all duration-200 font-medium shadow-lg hover:shadow-xl transform hover:scale-105\">\r\n                Create Group\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Create Post Modal - Improved Design */}\r\n      {showCreatePost && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n          <div className=\"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-gray-100\">\r\n            <div className=\"flex items-center justify-between p-6 border-b border-gray-100\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                <div className=\"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center\">\r\n                  <PenTool className=\"w-4 h-4 text-orange-600\" />\r\n                </div>\r\n                <h2 className=\"text-xl font-semibold text-gray-900\">Create Post</h2>\r\n              </div>\r\n              <button\r\n                onClick={() => setShowCreatePost(false)}\r\n                className=\"text-gray-400 hover:text-gray-600 p-2 hover:bg-gray-100 rounded-lg transition-colors\"\r\n              >\r\n                <X className=\"w-5 h-5\" />\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"p-6 space-y-6\">\r\n              <div className=\"flex items-start space-x-4\">\r\n                <div className=\"w-12 h-12 rounded-full bg-orange-500 flex items-center justify-center text-white font-semibold shadow-md\">\r\n                  {user?.first_name?.charAt(0) || user?.username?.charAt(0) || 'U'}\r\n                </div>\r\n                <div className=\"flex-1\">\r\n                  <textarea\r\n                    placeholder=\"What's on your mind?\"\r\n                    value={newPost.content}\r\n                    onChange={(e) => setNewPost(prev => ({ ...prev, content: e.target.value }))}\r\n                    className=\"w-full p-4 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-300 resize-none bg-gray-50 hover:bg-white transition-colors\"\r\n                    rows={5}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {newPost.imageFile && (\r\n                <div className=\"relative\">\r\n                  <img\r\n                    src={URL.createObjectURL(newPost.imageFile)}\r\n                    alt=\"Preview\"\r\n                    className=\"w-full h-64 object-cover rounded-lg\"\r\n                  />\r\n                  <button\r\n                    onClick={() => setNewPost(prev => ({ ...prev, imageFile: null }))}\r\n                    className=\"absolute top-2 right-2 bg-black bg-opacity-50 text-white p-1 rounded-full hover:bg-opacity-70\"\r\n                  >\r\n                    <X className=\"w-4 h-4\" />\r\n                  </button>\r\n                </div>\r\n              )}\r\n\r\n              {/* Post Options */}\r\n              <div className=\"bg-gray-50 rounded-xl p-4 space-y-4\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <div className=\"w-5 h-5 bg-orange-100 rounded flex items-center justify-center\">\r\n                    <div className=\"w-2 h-2 bg-orange-500 rounded-full\"></div>\r\n                  </div>\r\n                  <span className=\"text-sm font-semibold text-gray-900\">Post Settings</span>\r\n                </div>\r\n                \r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <label className=\"flex items-center space-x-3 cursor-pointer p-3 bg-white rounded-lg border border-gray-200 hover:border-orange-300 transition-colors\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={newPost.allowComments}\r\n                      onChange={(e) => setNewPost(prev => ({ ...prev, allowComments: e.target.checked }))}\r\n                      className=\"rounded border-gray-300 text-orange-600 focus:ring-orange-500\"\r\n                    />\r\n                    <span className=\"text-sm text-gray-700\">Allow comments</span>\r\n                  </label>\r\n                  \r\n                  <label className=\"flex items-center space-x-3 cursor-pointer p-3 bg-white rounded-lg border border-gray-200 hover:border-orange-300 transition-colors\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={newPost.hideLikeCount}\r\n                      onChange={(e) => setNewPost(prev => ({ ...prev, hideLikeCount: e.target.checked }))}\r\n                      className=\"rounded border-gray-300 text-orange-600 focus:ring-orange-500\"\r\n                    />\r\n                    <span className=\"text-sm text-gray-700\">Hide like count</span>\r\n                  </label>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex items-center justify-between pt-6 border-t border-gray-100\">\r\n                <div className=\"flex items-center space-x-4\">\r\n                  <label className=\"flex items-center space-x-3 text-gray-600 hover:text-orange-600 cursor-pointer p-2 hover:bg-orange-50 rounded-lg transition-colors\">\r\n                    <Image className=\"w-5 h-5\" />\r\n                    <span className=\"text-sm font-medium\">Add Photo</span>\r\n                    <input\r\n                      type=\"file\"\r\n                      accept=\"image/*\"\r\n                      onChange={handleImageUpload}\r\n                      className=\"hidden\"\r\n                    />\r\n                  </label>\r\n                </div>\r\n                \r\n                <div className=\"flex items-center space-x-3\">\r\n                  <button\r\n                    onClick={() => setShowCreatePost(false)}\r\n                    className=\"px-6 py-2.5 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors font-medium\"\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                  <button\r\n                    onClick={handleCreatePost}\r\n                    disabled={(!newPost.content.trim() && !newPost.imageFile) || creatingPost}\r\n                    className=\"px-6 py-2.5 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium shadow-lg hover:shadow-xl transform hover:scale-105 flex items-center space-x-2\"\r\n                  >\r\n                    {creatingPost && (\r\n                      <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\r\n                    )}\r\n                    <span>{creatingPost ? 'Posting...' : 'Share Post'}</span>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Follow People Search Modal */}\r\n      {showFollowSearch && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n          <div className=\"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\r\n            <div className=\"flex items-center justify-between p-6 border-b border-gray-100\">\r\n              <h2 className=\"text-xl font-semibold text-gray-900\">Find People</h2>\r\n              <button\r\n                onClick={() => setShowFollowSearch(false)}\r\n                className=\"text-gray-400 hover:text-gray-600 p-2 hover:bg-gray-100 rounded-full transition-colors\"\r\n              >\r\n                <X className=\"w-5 h-5\" />\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"p-6\">\r\n              <div className=\"mb-6\">\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Search for people...\"\r\n                  value={searchQuery}\r\n                  onChange={(e) => {\r\n                    setSearchQuery(e.target.value);\r\n                    searchUsers(e.target.value);\r\n                  }}\r\n                  className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              {searchLoading ? (\r\n                <div className=\"flex items-center justify-center py-8\">\r\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"space-y-3\">\r\n                  {searchResults.map(user => (\r\n                    <div key={user.id} className=\"flex items-center justify-between p-4 hover:bg-gray-50 rounded-xl transition-colors\">\r\n                      <div className=\"flex items-center space-x-3\">\r\n                        <div className=\"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-semibold\">\r\n                          {user?.first_name?.charAt(0) || user?.username?.charAt(0) || 'U'}\r\n                        </div>\r\n                        <div>\r\n                          <div className=\"font-medium text-gray-900\">\r\n                            {user?.first_name || 'Unknown'} {user?.last_name || 'User'}\r\n                          </div>\r\n                          <div className=\"text-sm text-gray-500\">@{user.username}</div>\r\n                        </div>\r\n                      </div>\r\n                      <button\r\n                        onClick={() => handleFollow(user.id)}\r\n                        className={`px-4 py-2 rounded-xl font-medium transition-all duration-200 ${\r\n                          user.is_following\r\n                            ? 'bg-gray-200 text-gray-700 hover:bg-gray-300'\r\n                            : 'bg-gradient-to-r from-orange-500 to-orange-600 text-white hover:from-orange-600 hover:to-orange-700 shadow-md hover:shadow-lg'\r\n                        }`}\r\n                      >\r\n                        {user.is_following ? 'Following' : 'Follow'}\r\n                      </button>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Feed;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}