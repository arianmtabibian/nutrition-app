{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\n\n// Smart global protection hook - allows new users to complete onboarding once\nexport const useOnboardingProtection = () => {\n  _s();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const {\n    user\n  } = useAuth();\n  useEffect(() => {\n    // Only run this protection if user is authenticated\n    if (!user) return;\n\n    // Mark that user has accessed the app when they reach dashboard\n    // This happens AFTER they complete onboarding, not before\n    if (location.pathname.startsWith('/dashboard')) {\n      localStorage.setItem('hasAccessedApp', 'true');\n      localStorage.setItem('lastAccess', new Date().toISOString());\n    }\n\n    // Note: We don't prevent onboarding access at the global level anymore\n    // The Onboarding component itself handles the profile check to determine\n    // if the user should be there or not\n  }, [location.pathname, user, navigate]);\n};\n_s(useOnboardingProtection, \"k1GbrS+9ZMLa7IuJBQpaSG++EKw=\", false, function () {\n  return [useNavigate, useLocation, useAuth];\n});","map":{"version":3,"names":["useEffect","useNavigate","useLocation","useAuth","useOnboardingProtection","_s","navigate","location","user","pathname","startsWith","localStorage","setItem","Date","toISOString"],"sources":["C:/Users/arian/OneDrive/Desktop/Nutrition/client/src/hooks/useOnboardingProtection.ts"],"sourcesContent":["import { useEffect } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\n\r\n// Smart global protection hook - allows new users to complete onboarding once\r\nexport const useOnboardingProtection = () => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { user } = useAuth();\r\n\r\n  useEffect(() => {\r\n    // Only run this protection if user is authenticated\r\n    if (!user) return;\r\n    \r\n    // Mark that user has accessed the app when they reach dashboard\r\n    // This happens AFTER they complete onboarding, not before\r\n    if (location.pathname.startsWith('/dashboard')) {\r\n      localStorage.setItem('hasAccessedApp', 'true');\r\n      localStorage.setItem('lastAccess', new Date().toISOString());\r\n    }\r\n    \r\n    // Note: We don't prevent onboarding access at the global level anymore\r\n    // The Onboarding component itself handles the profile check to determine\r\n    // if the user should be there or not\r\n  }, [location.pathname, user, navigate]);\r\n};\r\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,WAAW,EAAEC,WAAW,QAAQ,kBAAkB;AAC3D,SAASC,OAAO,QAAQ,yBAAyB;;AAEjD;AACA,OAAO,MAAMC,uBAAuB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC3C,MAAMC,QAAQ,GAAGL,WAAW,CAAC,CAAC;EAC9B,MAAMM,QAAQ,GAAGL,WAAW,CAAC,CAAC;EAC9B,MAAM;IAAEM;EAAK,CAAC,GAAGL,OAAO,CAAC,CAAC;EAE1BH,SAAS,CAAC,MAAM;IACd;IACA,IAAI,CAACQ,IAAI,EAAE;;IAEX;IACA;IACA,IAAID,QAAQ,CAACE,QAAQ,CAACC,UAAU,CAAC,YAAY,CAAC,EAAE;MAC9CC,YAAY,CAACC,OAAO,CAAC,gBAAgB,EAAE,MAAM,CAAC;MAC9CD,YAAY,CAACC,OAAO,CAAC,YAAY,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAAC;IAC9D;;IAEA;IACA;IACA;EACF,CAAC,EAAE,CAACP,QAAQ,CAACE,QAAQ,EAAED,IAAI,EAAEF,QAAQ,CAAC,CAAC;AACzC,CAAC;AAACD,EAAA,CApBWD,uBAAuB;EAAA,QACjBH,WAAW,EACXC,WAAW,EACXC,OAAO;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}