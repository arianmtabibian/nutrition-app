{"ast":null,"code":"import _objectSpread from\"C:/Users/arian/OneDrive/Desktop/Nutrition/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Routes,Route,useNavigate,useLocation}from'react-router-dom';import{createPortal}from'react-dom';import{useAuth}from'../contexts/AuthContext';import{useUserSession}from'../hooks/useUserSession';import{LogOut,User,Calendar,Plus,BarChart3,Home,Target,PenTool,Image,X,ChevronDown,UserPlus,Settings}from'lucide-react';import{profileAPI}from'../services/api';import Overview from'./Overview';import SocialProfile from'./SocialProfile';import Feed from'./Feed';import Diary from'./Diary';import Inputs from'./Inputs';import Groups from'./Groups';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const{user,logout}=useAuth();const navigate=useNavigate();const location=useLocation();const{hasAccessedAppBefore}=useUserSession();const[loading,setLoading]=useState(false);const[checkingProfile,setCheckingProfile]=useState(true);const[showNewPostModal,setShowNewPostModal]=useState(false);const[showProfileDropdown,setShowProfileDropdown]=useState(false);const[dropdownButtonRef,setDropdownButtonRef]=useState(null);const[newPost,setNewPost]=useState({content:'',imageFile:null,allowComments:true,hideLikeCount:false});const handleCreatePost=async()=>{console.log('Dashboard handleCreatePost called with:',newPost);if(!newPost.content.trim()){console.log('No content, returning early');alert('Please enter some content for your post');return;}try{// Create FormData for file upload\nconst formData=new FormData();formData.append('content',newPost.content);formData.append('allowComments',newPost.allowComments.toString());formData.append('hideLikeCount',newPost.hideLikeCount.toString());if(newPost.imageFile){formData.append('image',newPost.imageFile);console.log('Added image file:',newPost.imageFile.name);}console.log('Sending request to /api/social/posts from Dashboard');const response=await fetch(\"\".concat(process.env.REACT_APP_API_URL||'https://nutrition-back-jtf3.onrender.com',\"/api/social/posts\"),{method:'POST',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))// Don't set Content-Type header - let the browser set it for FormData\n},body:formData});console.log('Dashboard response status:',response.status);if(response.ok){const result=await response.json();console.log('Dashboard post created successfully:',result);setNewPost({content:'',imageFile:null,allowComments:true,hideLikeCount:false});setShowNewPostModal(false);// Trigger a custom event to update the feed\nwindow.dispatchEvent(new CustomEvent('postCreated',{detail:result}));// Navigate to feed to see the new post\nnavigate('/dashboard/feed');}else{const errorText=await response.text();console.error('Dashboard failed to create post. Status:',response.status,'Response:',errorText);alert(\"Failed to create post: \".concat(response.status,\" - \").concat(errorText));}}catch(error){console.error('Dashboard error creating post:',error);alert('Error creating post: '+(error instanceof Error?error.message:'Unknown error'));}};const handleImageUpload=e=>{var _e$target$files;const file=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0];if(file){setNewPost(_objectSpread(_objectSpread({},newPost),{},{imageFile:file}));}};const handleLogout=async()=>{setLoading(true);try{logout();navigate('/login');}finally{setLoading(false);}};const tabs=[{id:'feed',name:'Feed',icon:Home,path:'/dashboard/feed'},{id:'overview',name:'Overview',icon:BarChart3,path:'/dashboard/overview'},{id:'diary',name:'Diary',icon:Calendar,path:'/dashboard/diary'},{id:'groups',name:'Groups',icon:User,path:'/dashboard/groups'},{id:'profile',name:'Profile',icon:User,path:'/dashboard/profile'}];const getCurrentTab=()=>{const currentPath=location.pathname;return tabs.find(tab=>currentPath.startsWith(tab.path))||tabs[0];};const currentTab=getCurrentTab();// Check if user needs onboarding (new users only) - RENDER REDEPLOY PROTECTION\nuseEffect(()=>{const checkProfileExists=async function(){let retryCount=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;try{const response=await profileAPI.get();if(!response.data.profile){// Check if this might be a temporary issue (Render redeploy)\nconst hasAccessedApp=localStorage.getItem('hasAccessedApp');const lastAccess=localStorage.getItem('lastAccess');if(hasAccessedApp==='true'&&lastAccess){const lastAccessDate=new Date(lastAccess);const hoursSinceAccess=(Date.now()-lastAccessDate.getTime())/(1000*60*60);// If user accessed recently (within 24 hours), this is likely a Render redeploy\nif(hoursSinceAccess<24){console.log('üîÑ Render redeploy detected - user accessed recently, waiting for database restore...');if(retryCount<5){// Wait and retry - database might be restoring\nsetTimeout(()=>checkProfileExists(retryCount+1),2000*(retryCount+1));return;}else{console.log('‚ö†Ô∏è Database still not restored after retries, allowing dashboard access');setCheckingProfile(false);return;}}}// Truly new user - redirect to onboarding\nconsole.log('New user with no profile, redirecting to onboarding');navigate('/onboarding');return;}// User has a profile - mark them as having accessed the app\nlocalStorage.setItem('hasAccessedApp','true');localStorage.setItem('lastAccess',new Date().toISOString());console.log('‚úÖ User has profile, allowing dashboard access');setCheckingProfile(false);}catch(error){var _error$response;console.error('‚ùå Error checking profile:',error);// Enhanced error handling for Render redeploys\nconst hasAccessedApp=localStorage.getItem('hasAccessedApp');if((error===null||error===void 0?void 0:(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===404){// Check if this is a returning user experiencing Render redeploy\nif(hasAccessedApp==='true'&&retryCount<3){console.log('üîÑ Returning user, 404 might be temporary (Render redeploy), retrying...');setTimeout(()=>checkProfileExists(retryCount+1),3000);return;}console.log('Profile not found (404), redirecting to onboarding');navigate('/onboarding');}else{// For network/server errors, be more lenient with existing users\nif(hasAccessedApp==='true'){console.log('üîÑ Existing user with network error, allowing dashboard access');setCheckingProfile(false);}else if(retryCount<2){console.log('üîÑ Network error, retrying profile check...');setTimeout(()=>checkProfileExists(retryCount+1),2000);}else{console.log('‚ö†Ô∏è Network issues persist, allowing onboarding attempt');navigate('/onboarding');}}}};if(user){checkProfileExists();}else{setCheckingProfile(false);}},[user,navigate]);// Close dropdown when clicking outside\nuseEffect(()=>{const handleClickOutside=event=>{const target=event.target;if(!target.closest('.profile-dropdown')){setShowProfileDropdown(false);}};if(showProfileDropdown){document.addEventListener('mousedown',handleClickOutside);}return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[showProfileDropdown]);// Listen for meal updates to refresh sidebar data globally\nuseEffect(()=>{const handleMealUpdate=event=>{console.log('üè† Dashboard: Meal update event received:',event.type);// Force refresh of any sidebar data if needed\n// This ensures sidebar updates across all tabs\nsetTimeout(()=>{console.log('üè† Dashboard: Dispatching sidebar refresh...');window.dispatchEvent(new CustomEvent('sidebarRefresh'));},100);};const handleNavigateToMeals=()=>{navigate('/dashboard/inputs');};// Listen to various meal-related events\nwindow.addEventListener('mealAdded',handleMealUpdate);window.addEventListener('mealDataChanged',handleMealUpdate);window.addEventListener('mealDeleted',handleMealUpdate);window.addEventListener('mealUpdated',handleMealUpdate);window.addEventListener('navigateToMeals',handleNavigateToMeals);return()=>{window.removeEventListener('mealAdded',handleMealUpdate);window.removeEventListener('mealDataChanged',handleMealUpdate);window.removeEventListener('mealDeleted',handleMealUpdate);window.removeEventListener('mealUpdated',handleMealUpdate);window.removeEventListener('navigateToMeals',handleNavigateToMeals);};},[navigate]);if(checkingProfile){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-orange-50 via-white to-red-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Checking your profile...\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-br from-orange-50 via-white to-red-50\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"bg-white/80 backdrop-blur-sm shadow-lg border-b border-orange-200/50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center h-20\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/dashboard/feed'),className:\"flex items-center hover:opacity-80 transition-opacity\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"relative\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-10 w-10 bg-gradient-to-r from-orange-500 to-red-500 rounded-xl flex items-center justify-center shadow-lg\",children:/*#__PURE__*/_jsx(Target,{className:\"w-5 h-5 text-white\"})})}),/*#__PURE__*/_jsx(\"h1\",{className:\"ml-3 text-xl font-bold text-gray-900\",children:\"NutriTrack\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-700\",children:[\"Welcome, \",/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:(user===null||user===void 0?void 0:user.first_name)||'User'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-green-500 rounded-full animate-pulse\",title:\"Server connected\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500\",children:\"Connected\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{navigate('/dashboard/inputs');// Trigger sidebar refresh when going to add meal\nsetTimeout(()=>{window.dispatchEvent(new CustomEvent('sidebarRefresh'));},100);},className:\"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2 shadow-md hover:shadow-lg\",children:[/*#__PURE__*/_jsx(Plus,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Meals\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowNewPostModal(true),className:\"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2 shadow-md hover:shadow-lg\",children:[/*#__PURE__*/_jsx(PenTool,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Post\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"relative profile-dropdown\",children:/*#__PURE__*/_jsxs(\"button\",{ref:setDropdownButtonRef,onClick:()=>setShowProfileDropdown(!showProfileDropdown),className:\"flex items-center space-x-2 px-3 py-2 rounded-lg hover:bg-gray-100 transition-all duration-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center\",children:user!==null&&user!==void 0&&user.profile_picture?/*#__PURE__*/_jsx(\"img\",{src:user.profile_picture,alt:\"Profile\",className:\"w-8 h-8 rounded-full object-cover\"}):/*#__PURE__*/_jsx(User,{className:\"w-4 h-4 text-white\"})}),/*#__PURE__*/_jsx(ChevronDown,{className:\"w-4 h-4 text-gray-600 transition-transform duration-200 \".concat(showProfileDropdown?'rotate-180':'')})]})})]})]})})}),/*#__PURE__*/_jsx(\"nav\",{className:\"bg-white/80 backdrop-blur-sm border-b border-orange-200/50 shadow-sm\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-8\",children:tabs.map(tab=>{const Icon=tab.icon;const isActive=currentTab.id===tab.id;return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate(tab.path),className:\"flex items-center space-x-2 py-4 px-1 border-b-3 font-semibold text-sm transition-all duration-200 transform hover:-translate-y-0.5 \".concat(isActive?'border-orange-500 text-orange-600 shadow-sm':'border-transparent text-gray-500 hover:text-orange-600 hover:border-orange-300'),children:[tab.id==='profile'?/*#__PURE__*/_jsx(\"div\",{className:\"w-5 h-5 rounded-full overflow-hidden flex items-center justify-center bg-gradient-to-r from-orange-500 to-red-500\",children:user!==null&&user!==void 0&&user.profile_picture?/*#__PURE__*/_jsx(\"img\",{src:user.profile_picture,alt:\"Profile\",className:\"w-5 h-5 rounded-full object-cover\"}):/*#__PURE__*/_jsx(User,{className:\"w-3 h-3 text-white\"})}):/*#__PURE__*/_jsx(Icon,{className:\"h-5 w-5\"}),/*#__PURE__*/_jsx(\"span\",{children:tab.name})]},tab.id);})})})}),/*#__PURE__*/_jsx(\"main\",{className:\"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard/feed\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/overview\",element:/*#__PURE__*/_jsx(Overview,{})}),/*#__PURE__*/_jsx(Route,{path:\"/feed\",element:/*#__PURE__*/_jsx(Feed,{})}),/*#__PURE__*/_jsx(Route,{path:\"/inputs\",element:/*#__PURE__*/_jsx(Inputs,{})}),/*#__PURE__*/_jsx(Route,{path:\"/diary\",element:/*#__PURE__*/_jsx(Diary,{})}),/*#__PURE__*/_jsx(Route,{path:\"/groups\",element:/*#__PURE__*/_jsx(Groups,{})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(SocialProfile,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard/feed\",replace:true})})]})}),showNewPostModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[85vh] flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-4 border-b border-gray-200 flex-shrink-0\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-900\",children:\"Create New Post\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowNewPostModal(false),className:\"text-gray-400 hover:text-gray-600 transition-colors\",children:/*#__PURE__*/_jsx(X,{className:\"h-6 w-6\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 space-y-4 flex-1 overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"textarea\",{value:newPost.content,onChange:e=>setNewPost(_objectSpread(_objectSpread({},newPost),{},{content:e.target.value})),placeholder:\"What's going on?\",className:\"w-full border border-gray-300 rounded-lg p-4 resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\",rows:4})}),newPost.imageFile&&/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:URL.createObjectURL(newPost.imageFile),alt:\"Preview\",className:\"w-full h-40 object-cover rounded-lg\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setNewPost(_objectSpread(_objectSpread({},newPost),{},{imageFile:null})),className:\"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors shadow-lg\",children:/*#__PURE__*/_jsx(X,{className:\"h-3 w-3\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border border-gray-200 rounded-lg p-3\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 mb-2\",children:\"Add to your post\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-4\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center space-x-2 bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded-lg cursor-pointer transition-colors\",children:[/*#__PURE__*/_jsx(Image,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:\"Upload Photo\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleImageUpload,className:\"hidden\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border border-gray-200 rounded-lg p-3\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 mb-3\",children:\"Privacy Settings\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-medium text-gray-700\",children:\"Allow comments\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"Let people comment on your post\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setNewPost(_objectSpread(_objectSpread({},newPost),{},{allowComments:!newPost.allowComments})),className:\"relative inline-flex h-6 w-11 items-center rounded-full transition-colors \".concat(newPost.allowComments?'bg-blue-600':'bg-gray-200'),children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-block h-4 w-4 transform rounded-full bg-white transition-transform \".concat(newPost.allowComments?'translate-x-6':'translate-x-1')})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-medium text-gray-700\",children:\"Hide like count\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"Only you will see the total number of likes\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setNewPost(_objectSpread(_objectSpread({},newPost),{},{hideLikeCount:!newPost.hideLikeCount})),className:\"relative inline-flex h-6 w-11 items-center rounded-full transition-colors \".concat(newPost.hideLikeCount?'bg-blue-600':'bg-gray-200'),children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-block h-4 w-4 transform rounded-full bg-white transition-transform \".concat(newPost.hideLikeCount?'translate-x-6':'translate-x-1')})})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-end space-x-3 p-4 border-t border-gray-200 bg-gray-50 flex-shrink-0\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowNewPostModal(false),className:\"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{console.log('Dashboard Post button clicked',newPost);handleCreatePost();},disabled:!newPost.content.trim(),className:\"px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors\",children:\"Post\"})]})]})}),showProfileDropdown&&dropdownButtonRef&&/*#__PURE__*/createPortal(/*#__PURE__*/_jsxs(\"div\",{className:\"profile-dropdown\",style:{position:'fixed',top:\"\".concat(dropdownButtonRef.getBoundingClientRect().bottom+8,\"px\"),right:\"\".concat(window.innerWidth-dropdownButtonRef.getBoundingClientRect().right,\"px\"),zIndex:999999,width:'192px',backgroundColor:'white',borderRadius:'0.5rem',boxShadow:'0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(0, 0, 0, 0.05)',border:'1px solid rgb(229, 231, 235)',padding:'0.25rem 0'},children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setShowProfileDropdown(false);// TODO: Navigate to find friends page\n},className:\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(UserPlus,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Find Friends\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setShowProfileDropdown(false);navigate('/dashboard/profile');},className:\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(User,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"My Profile\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setShowProfileDropdown(false);// TODO: Navigate to settings page\n},className:\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Settings,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Settings\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"border-t border-gray-100 my-1\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setShowProfileDropdown(false);handleLogout();},disabled:loading,className:\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(LogOut,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Logout\"})]})]}),document.body)]});};// Helper component for navigation\nconst Navigate=_ref=>{let{to,replace}=_ref;const navigate=useNavigate();React.useEffect(()=>{navigate(to,{replace});},[navigate,to,replace]);return null;};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","Routes","Route","useNavigate","useLocation","createPortal","useAuth","useUserSession","LogOut","User","Calendar","Plus","BarChart3","Home","Target","PenTool","Image","X","ChevronDown","UserPlus","Settings","profileAPI","Overview","SocialProfile","Feed","Diary","Inputs","Groups","jsx","_jsx","jsxs","_jsxs","Dashboard","user","logout","navigate","location","hasAccessedAppBefore","loading","setLoading","checkingProfile","setCheckingProfile","showNewPostModal","setShowNewPostModal","showProfileDropdown","setShowProfileDropdown","dropdownButtonRef","setDropdownButtonRef","newPost","setNewPost","content","imageFile","allowComments","hideLikeCount","handleCreatePost","console","log","trim","alert","formData","FormData","append","toString","name","response","fetch","concat","process","env","REACT_APP_API_URL","method","headers","localStorage","getItem","body","status","ok","result","json","window","dispatchEvent","CustomEvent","detail","errorText","text","error","Error","message","handleImageUpload","e","_e$target$files","file","target","files","_objectSpread","handleLogout","tabs","id","icon","path","getCurrentTab","currentPath","pathname","find","tab","startsWith","currentTab","checkProfileExists","retryCount","arguments","length","undefined","get","data","profile","hasAccessedApp","lastAccess","lastAccessDate","Date","hoursSinceAccess","now","getTime","setTimeout","setItem","toISOString","_error$response","handleClickOutside","event","closest","document","addEventListener","removeEventListener","handleMealUpdate","type","handleNavigateToMeals","className","children","onClick","first_name","title","ref","profile_picture","src","alt","map","Icon","isActive","element","Navigate","to","replace","value","onChange","placeholder","rows","URL","createObjectURL","accept","disabled","style","position","top","getBoundingClientRect","bottom","right","innerWidth","zIndex","width","backgroundColor","borderRadius","boxShadow","border","padding","_ref"],"sources":["C:/Users/arian/OneDrive/Desktop/Nutrition/client/src/components/Dashboard.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Routes, Route, useNavigate, useLocation } from 'react-router-dom';\nimport { createPortal } from 'react-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useUserSession } from '../hooks/useUserSession';\nimport { LogOut, User, Calendar, Plus, BarChart3, Home, Target, PenTool, Image, X, ChevronDown, UserPlus, Settings, Utensils } from 'lucide-react';\nimport { profileAPI } from '../services/api';\nimport Overview from './Overview';\nimport SocialProfile from './SocialProfile';\nimport Feed from './Feed';\nimport Diary from './Diary';\nimport Inputs from './Inputs';\nimport Groups from './Groups';\n\nimport LoadingSpinner from './ui/LoadingSpinner';\n\nconst Dashboard: React.FC = () => {\n  const { user, logout } = useAuth();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { hasAccessedAppBefore } = useUserSession();\n  const [loading, setLoading] = useState(false);\n  const [checkingProfile, setCheckingProfile] = useState(true);\n  const [showNewPostModal, setShowNewPostModal] = useState(false);\n  const [showProfileDropdown, setShowProfileDropdown] = useState(false);\n  const [dropdownButtonRef, setDropdownButtonRef] = useState<HTMLButtonElement | null>(null);\n  const [newPost, setNewPost] = useState({\n    content: '',\n    imageFile: null as File | null,\n    allowComments: true,\n    hideLikeCount: false\n  });\n\n  const handleCreatePost = async () => {\n    console.log('Dashboard handleCreatePost called with:', newPost);\n    \n    if (!newPost.content.trim()) {\n      console.log('No content, returning early');\n      alert('Please enter some content for your post');\n      return;\n    }\n\n    try {\n      // Create FormData for file upload\n      const formData = new FormData();\n      formData.append('content', newPost.content);\n      formData.append('allowComments', newPost.allowComments.toString());\n      formData.append('hideLikeCount', newPost.hideLikeCount.toString());\n      \n      if (newPost.imageFile) {\n        formData.append('image', newPost.imageFile);\n        console.log('Added image file:', newPost.imageFile.name);\n      }\n\n      console.log('Sending request to /api/social/posts from Dashboard');\n      const response = await fetch(`${process.env.REACT_APP_API_URL || 'https://nutrition-back-jtf3.onrender.com'}/api/social/posts`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n          // Don't set Content-Type header - let the browser set it for FormData\n        },\n        body: formData\n      });\n\n      console.log('Dashboard response status:', response.status);\n\n      if (response.ok) {\n        const result = await response.json();\n        console.log('Dashboard post created successfully:', result);\n        setNewPost({ content: '', imageFile: null, allowComments: true, hideLikeCount: false });\n        setShowNewPostModal(false);\n        \n        // Trigger a custom event to update the feed\n        window.dispatchEvent(new CustomEvent('postCreated', { detail: result }));\n        \n        // Navigate to feed to see the new post\n        navigate('/dashboard/feed');\n      } else {\n        const errorText = await response.text();\n        console.error('Dashboard failed to create post. Status:', response.status, 'Response:', errorText);\n        alert(`Failed to create post: ${response.status} - ${errorText}`);\n      }\n    } catch (error) {\n      console.error('Dashboard error creating post:', error);\n      alert('Error creating post: ' + (error instanceof Error ? error.message : 'Unknown error'));\n    }\n  };\n\n  const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      setNewPost({ ...newPost, imageFile: file });\n    }\n  };\n\n  const handleLogout = async () => {\n    setLoading(true);\n    try {\n      logout();\n      navigate('/login');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const tabs = [\n    { id: 'feed', name: 'Feed', icon: Home, path: '/dashboard/feed' },\n    { id: 'overview', name: 'Overview', icon: BarChart3, path: '/dashboard/overview' },\n    { id: 'diary', name: 'Diary', icon: Calendar, path: '/dashboard/diary' },\n    { id: 'groups', name: 'Groups', icon: User, path: '/dashboard/groups' },\n    { id: 'profile', name: 'Profile', icon: User, path: '/dashboard/profile' },\n  ];\n\n  const getCurrentTab = () => {\n    const currentPath = location.pathname;\n    return tabs.find(tab => currentPath.startsWith(tab.path)) || tabs[0];\n  };\n\n  const currentTab = getCurrentTab();\n\n  // Check if user needs onboarding (new users only) - RENDER REDEPLOY PROTECTION\n  useEffect(() => {\n    const checkProfileExists = async (retryCount = 0) => {\n      try {\n        const response = await profileAPI.get();\n        if (!response.data.profile) {\n          // Check if this might be a temporary issue (Render redeploy)\n          const hasAccessedApp = localStorage.getItem('hasAccessedApp');\n          const lastAccess = localStorage.getItem('lastAccess');\n          \n          if (hasAccessedApp === 'true' && lastAccess) {\n            const lastAccessDate = new Date(lastAccess);\n            const hoursSinceAccess = (Date.now() - lastAccessDate.getTime()) / (1000 * 60 * 60);\n            \n            // If user accessed recently (within 24 hours), this is likely a Render redeploy\n            if (hoursSinceAccess < 24) {\n              console.log('üîÑ Render redeploy detected - user accessed recently, waiting for database restore...');\n              \n              if (retryCount < 5) {\n                // Wait and retry - database might be restoring\n                setTimeout(() => checkProfileExists(retryCount + 1), 2000 * (retryCount + 1));\n                return;\n              } else {\n                console.log('‚ö†Ô∏è Database still not restored after retries, allowing dashboard access');\n                setCheckingProfile(false);\n                return;\n              }\n            }\n          }\n          \n          // Truly new user - redirect to onboarding\n          console.log('New user with no profile, redirecting to onboarding');\n          navigate('/onboarding');\n          return;\n        }\n        \n        // User has a profile - mark them as having accessed the app\n        localStorage.setItem('hasAccessedApp', 'true');\n        localStorage.setItem('lastAccess', new Date().toISOString());\n        console.log('‚úÖ User has profile, allowing dashboard access');\n        setCheckingProfile(false);\n      } catch (error: any) {\n        console.error('‚ùå Error checking profile:', error);\n        \n        // Enhanced error handling for Render redeploys\n        const hasAccessedApp = localStorage.getItem('hasAccessedApp');\n        \n        if (error?.response?.status === 404) {\n          // Check if this is a returning user experiencing Render redeploy\n          if (hasAccessedApp === 'true' && retryCount < 3) {\n            console.log('üîÑ Returning user, 404 might be temporary (Render redeploy), retrying...');\n            setTimeout(() => checkProfileExists(retryCount + 1), 3000);\n            return;\n          }\n          console.log('Profile not found (404), redirecting to onboarding');\n          navigate('/onboarding');\n        } else {\n          // For network/server errors, be more lenient with existing users\n          if (hasAccessedApp === 'true') {\n            console.log('üîÑ Existing user with network error, allowing dashboard access');\n            setCheckingProfile(false);\n          } else if (retryCount < 2) {\n            console.log('üîÑ Network error, retrying profile check...');\n            setTimeout(() => checkProfileExists(retryCount + 1), 2000);\n          } else {\n            console.log('‚ö†Ô∏è Network issues persist, allowing onboarding attempt');\n            navigate('/onboarding');\n          }\n        }\n      }\n    };\n    \n    if (user) {\n      checkProfileExists();\n    } else {\n      setCheckingProfile(false);\n    }\n  }, [user, navigate]);\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      const target = event.target as Element;\n      if (!target.closest('.profile-dropdown')) {\n        setShowProfileDropdown(false);\n      }\n    };\n\n    if (showProfileDropdown) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showProfileDropdown]);\n\n  // Listen for meal updates to refresh sidebar data globally\n  useEffect(() => {\n    const handleMealUpdate = (event: any) => {\n      console.log('üè† Dashboard: Meal update event received:', event.type);\n      // Force refresh of any sidebar data if needed\n      // This ensures sidebar updates across all tabs\n      setTimeout(() => {\n        console.log('üè† Dashboard: Dispatching sidebar refresh...');\n        window.dispatchEvent(new CustomEvent('sidebarRefresh'));\n      }, 100);\n    };\n\n    const handleNavigateToMeals = () => {\n      navigate('/dashboard/inputs');\n    };\n\n    // Listen to various meal-related events\n    window.addEventListener('mealAdded', handleMealUpdate);\n    window.addEventListener('mealDataChanged', handleMealUpdate);\n    window.addEventListener('mealDeleted', handleMealUpdate);\n    window.addEventListener('mealUpdated', handleMealUpdate);\n    window.addEventListener('navigateToMeals', handleNavigateToMeals);\n    \n    return () => {\n      window.removeEventListener('mealAdded', handleMealUpdate);\n      window.removeEventListener('mealDataChanged', handleMealUpdate);\n      window.removeEventListener('mealDeleted', handleMealUpdate);\n      window.removeEventListener('mealUpdated', handleMealUpdate);\n      window.removeEventListener('navigateToMeals', handleNavigateToMeals);\n    };\n  }, [navigate]);\n\n  if (checkingProfile) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-orange-50 via-white to-red-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Checking your profile...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-orange-50 via-white to-red-50\">\n      {/* Header */}\n      <header className=\"bg-white/80 backdrop-blur-sm shadow-lg border-b border-orange-200/50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center h-20\">\n            <button \n              onClick={() => navigate('/dashboard/feed')}\n              className=\"flex items-center hover:opacity-80 transition-opacity\"\n            >\n              <div className=\"relative\">\n                <div className=\"h-10 w-10 bg-gradient-to-r from-orange-500 to-red-500 rounded-xl flex items-center justify-center shadow-lg\">\n                  <Target className=\"w-5 h-5 text-white\" />\n                </div>\n              </div>\n              <h1 className=\"ml-3 text-xl font-bold text-gray-900\">\n                NutriTrack\n              </h1>\n            </button>\n            \n            <div className=\"flex items-center space-x-4\">\n              <div className=\"text-sm text-gray-700\">\n                Welcome, <span className=\"font-medium\">{user?.first_name || 'User'}</span>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <div className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\" title=\"Server connected\"></div>\n                <span className=\"text-xs text-gray-500\">Connected</span>\n              </div>\n\n              <button\n                onClick={() => {\n                  navigate('/dashboard/inputs');\n                  // Trigger sidebar refresh when going to add meal\n                  setTimeout(() => {\n                    window.dispatchEvent(new CustomEvent('sidebarRefresh'));\n                  }, 100);\n                }}\n                className=\"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2 shadow-md hover:shadow-lg\"\n              >\n                <Plus className=\"h-4 w-4\" />\n                <span>Meals</span>\n              </button>\n              <button\n                onClick={() => setShowNewPostModal(true)}\n                className=\"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2 shadow-md hover:shadow-lg\"\n              >\n                <PenTool className=\"h-4 w-4\" />\n                <span>Post</span>\n              </button>\n              {/* Profile Dropdown */}\n              <div className=\"relative profile-dropdown\">\n                <button\n                  ref={setDropdownButtonRef}\n                  onClick={() => setShowProfileDropdown(!showProfileDropdown)}\n                  className=\"flex items-center space-x-2 px-3 py-2 rounded-lg hover:bg-gray-100 transition-all duration-200\"\n                >\n                  <div className=\"w-8 h-8 bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center\">\n                    {user?.profile_picture ? (\n                      <img \n                        src={user.profile_picture} \n                        alt=\"Profile\" \n                        className=\"w-8 h-8 rounded-full object-cover\"\n                      />\n                    ) : (\n                      <User className=\"w-4 h-4 text-white\" />\n                    )}\n                  </div>\n                  <ChevronDown className={`w-4 h-4 text-gray-600 transition-transform duration-200 ${\n                    showProfileDropdown ? 'rotate-180' : ''\n                  }`} />\n                </button>\n\n              </div>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Navigation Tabs */}\n      <nav className=\"bg-white/80 backdrop-blur-sm border-b border-orange-200/50 shadow-sm\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex space-x-8\">\n            {tabs.map((tab) => {\n              const Icon = tab.icon;\n              const isActive = currentTab.id === tab.id;\n              \n              return (\n                <button\n                  key={tab.id}\n                  onClick={() => navigate(tab.path)}\n                  className={`flex items-center space-x-2 py-4 px-1 border-b-3 font-semibold text-sm transition-all duration-200 transform hover:-translate-y-0.5 ${\n                    isActive\n                      ? 'border-orange-500 text-orange-600 shadow-sm'\n                      : 'border-transparent text-gray-500 hover:text-orange-600 hover:border-orange-300'\n                  }`}\n                >\n                  {tab.id === 'profile' ? (\n                    <div className=\"w-5 h-5 rounded-full overflow-hidden flex items-center justify-center bg-gradient-to-r from-orange-500 to-red-500\">\n                      {user?.profile_picture ? (\n                        <img \n                          src={user.profile_picture} \n                          alt=\"Profile\" \n                          className=\"w-5 h-5 rounded-full object-cover\"\n                        />\n                      ) : (\n                        <User className=\"w-3 h-3 text-white\" />\n                      )}\n                    </div>\n                  ) : (\n                    <Icon className=\"h-5 w-5\" />\n                  )}\n                  <span>{tab.name}</span>\n                </button>\n              );\n            })}\n          </div>\n        </div>\n      </nav>\n\n      {/* Main Content */}\n      <main className=\"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8\">\n        <Routes>\n          <Route path=\"/\" element={<Navigate to=\"/dashboard/feed\" replace />} />\n          <Route path=\"/overview\" element={<Overview />} />\n          <Route path=\"/feed\" element={<Feed />} />\n          <Route path=\"/inputs\" element={<Inputs />} />\n          <Route path=\"/diary\" element={<Diary />} />\n          <Route path=\"/groups\" element={<Groups />} />\n          <Route path=\"/profile\" element={<SocialProfile />} />\n          {/* Catch-all route for any invalid dashboard paths */}\n          <Route path=\"*\" element={<Navigate to=\"/dashboard/feed\" replace />} />\n        </Routes>\n      </main>\n\n      {/* New Post Modal */}\n      {showNewPostModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[85vh] flex flex-col\">\n            {/* Modal Header */}\n            <div className=\"flex items-center justify-between p-4 border-b border-gray-200 flex-shrink-0\">\n              <h3 className=\"text-xl font-semibold text-gray-900\">Create New Post</h3>\n              <button\n                onClick={() => setShowNewPostModal(false)}\n                className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n              >\n                <X className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            {/* Modal Body */}\n            <div className=\"p-4 space-y-4 flex-1 overflow-y-auto\">\n              {/* Text Input */}\n              <div>\n                <textarea\n                  value={newPost.content}\n                  onChange={(e) => setNewPost({ ...newPost, content: e.target.value })}\n                  placeholder=\"What's going on?\"\n                  className=\"w-full border border-gray-300 rounded-lg p-4 resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\"\n                  rows={4}\n                />\n              </div>\n\n              {/* Image Preview */}\n              {newPost.imageFile && (\n                <div className=\"relative\">\n                  <img\n                    src={URL.createObjectURL(newPost.imageFile)}\n                    alt=\"Preview\"\n                    className=\"w-full h-40 object-cover rounded-lg\"\n                  />\n                  <button\n                    onClick={() => setNewPost({ ...newPost, imageFile: null })}\n                    className=\"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors shadow-lg\"\n                  >\n                    <X className=\"h-3 w-3\" />\n                  </button>\n                </div>\n              )}\n\n              {/* Upload Controls */}\n              <div className=\"border border-gray-200 rounded-lg p-3\">\n                <h4 className=\"font-medium text-gray-900 mb-2\">Add to your post</h4>\n                <div className=\"flex items-center space-x-4\">\n                  <label className=\"flex items-center space-x-2 bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded-lg cursor-pointer transition-colors\">\n                    <Image className=\"h-4 w-4\" />\n                    <span className=\"text-sm font-medium\">Upload Photo</span>\n                    <input\n                      type=\"file\"\n                      accept=\"image/*\"\n                      onChange={handleImageUpload}\n                      className=\"hidden\"\n                    />\n                  </label>\n                </div>\n              </div>\n\n              {/* Privacy Settings */}\n              <div className=\"border border-gray-200 rounded-lg p-3\">\n                <h4 className=\"font-medium text-gray-900 mb-3\">Privacy Settings</h4>\n                <div className=\"space-y-3\">\n                  {/* Allow Comments Toggle */}\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <label className=\"text-sm font-medium text-gray-700\">Allow comments</label>\n                      <p className=\"text-xs text-gray-500\">Let people comment on your post</p>\n                    </div>\n                    <button\n                      onClick={() => setNewPost({ ...newPost, allowComments: !newPost.allowComments })}\n                      className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${\n                        newPost.allowComments ? 'bg-blue-600' : 'bg-gray-200'\n                      }`}\n                    >\n                      <span\n                        className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${\n                          newPost.allowComments ? 'translate-x-6' : 'translate-x-1'\n                        }`}\n                      />\n                    </button>\n                  </div>\n\n                  {/* Hide Like Count Toggle */}\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <label className=\"text-sm font-medium text-gray-700\">Hide like count</label>\n                      <p className=\"text-xs text-gray-500\">Only you will see the total number of likes</p>\n                    </div>\n                    <button\n                      onClick={() => setNewPost({ ...newPost, hideLikeCount: !newPost.hideLikeCount })}\n                      className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${\n                        newPost.hideLikeCount ? 'bg-blue-600' : 'bg-gray-200'\n                      }`}\n                    >\n                      <span\n                        className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${\n                          newPost.hideLikeCount ? 'translate-x-6' : 'translate-x-1'\n                        }`}\n                      />\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Modal Footer */}\n            <div className=\"flex items-center justify-end space-x-3 p-4 border-t border-gray-200 bg-gray-50 flex-shrink-0\">\n              <button\n                onClick={() => setShowNewPostModal(false)}\n                className=\"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={() => {\n                  console.log('Dashboard Post button clicked', newPost);\n                  handleCreatePost();\n                }}\n                disabled={!newPost.content.trim()}\n                className=\"px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors\"\n              >\n                Post\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Profile Dropdown Portal - Renders outside normal DOM hierarchy */}\n      {showProfileDropdown && dropdownButtonRef && createPortal(\n        <div \n          className=\"profile-dropdown\"\n          style={{\n            position: 'fixed',\n            top: `${dropdownButtonRef.getBoundingClientRect().bottom + 8}px`,\n            right: `${window.innerWidth - dropdownButtonRef.getBoundingClientRect().right}px`,\n            zIndex: 999999,\n            width: '192px',\n            backgroundColor: 'white',\n            borderRadius: '0.5rem',\n            boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(0, 0, 0, 0.05)',\n            border: '1px solid rgb(229, 231, 235)',\n            padding: '0.25rem 0'\n          }}\n        >\n          <button\n            onClick={() => {\n              setShowProfileDropdown(false);\n              // TODO: Navigate to find friends page\n            }}\n            className=\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2\"\n          >\n            <UserPlus className=\"w-4 h-4\" />\n            <span>Find Friends</span>\n          </button>\n          <button\n            onClick={() => {\n              setShowProfileDropdown(false);\n              navigate('/dashboard/profile');\n            }}\n            className=\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2\"\n          >\n            <User className=\"w-4 h-4\" />\n            <span>My Profile</span>\n          </button>\n          <button\n            onClick={() => {\n              setShowProfileDropdown(false);\n              // TODO: Navigate to settings page\n            }}\n            className=\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2\"\n          >\n            <Settings className=\"w-4 h-4\" />\n            <span>Settings</span>\n          </button>\n          <div className=\"border-t border-gray-100 my-1\"></div>\n          <button\n            onClick={() => {\n              setShowProfileDropdown(false);\n              handleLogout();\n            }}\n            disabled={loading}\n            className=\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2\"\n          >\n            <LogOut className=\"w-4 h-4\" />\n            <span>Logout</span>\n          </button>\n        </div>,\n        document.body\n      )}\n    </div>\n  );\n};\n\n// Helper component for navigation\nconst Navigate: React.FC<{ to: string; replace?: boolean }> = ({ to, replace }) => {\n  const navigate = useNavigate();\n  React.useEffect(() => {\n    navigate(to, { replace });\n  }, [navigate, to, replace]);\n  return null;\n};\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}